import{F as gg,G as yg,H as vg,I as _g,a as Cr,b as sg,c as og,d as Re,e as ag,f as Rr,g as cg,h as Gl,i as Fi,j as qo,k as zo,l as lg,m as ug,n as Go,o as hg,p as Ui,q as dg,s as Wl,t as fg,u as Wo,v as cn,x as pg,y as mg,z as Kl}from"./chunk-CPLRFK4X.js";import{$ as C,$a as $m,A as Di,Aa as jl,B as Er,Ba as Ni,Bb as qn,C as ko,Ca as Mo,Cb as Qm,D as St,Da as xm,Db as ql,E as Ir,Ea as Vm,Eb as an,F as At,Fa as xo,G as kl,Ga as Fn,H as pt,Ha as Vo,Hb as Ym,I as Sm,Ia as on,Ib as jo,J as xn,K as tn,Kb as Jm,L as Ol,La as Bl,Lb as Xm,M as Am,Ma as se,Mb as Zm,N as Ml,Na as B,Nb as Mi,O as xl,Oa as Lm,Ob as eg,P as Vl,Pa as st,Pb as Bo,Q as Le,Qa as Fm,Qb as $o,R as Cm,Ra as ce,Rb as xi,S as fe,Sa as ye,Sb as zl,T as D,Ta as Um,Tb as Vi,Ua as ki,Ub as Li,V as Vn,Va as jm,Vb as tg,W as M,Wa as Bm,Wb as ng,X as me,Xa as Un,Xb as rg,Y as Rm,Ya as Je,Yb as Ar,Z as Ll,Za as Ce,Zb as ig,_ as j,a as T,aa as A,b as ae,ba as Pi,bb as Sr,c as Po,ca as nn,cb as $l,d as p,da as it,db as qm,e as Em,ea as ge,eb as zm,f as Al,fa as mt,fb as Gm,g as On,ga as Dm,gb as z,h as Cl,ha as Tr,hb as $,i as Rl,ia as rn,ib as ve,j as en,ja as sn,jb as Wm,k as rt,kb as Km,l as Im,la as qt,lb as Hm,m as Tm,ma as Pm,mb as Oi,n as Mn,na as gt,nb as Lo,o as Dl,oa as Nm,ob as ze,p as Pl,pa as br,pb as Ke,q as Nl,qa as Oo,r as be,ra as km,s as S,sa as Ln,t as Ci,ta as Ct,tb as Fo,u as bt,ua as zt,ub as Uo,v as bm,va as Om,vb as jn,w as q,wa as Fl,wb as Bn,x as No,xa as Mm,xb as $n,y as Ye,ya as Gt,yb as _e,z as Ri,za as Ul,zb as Wt}from"./chunk-W53SRJ4Y.js";var Bi=class{},Qo=class{},un=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ql=class{encodeKey(e){return wg(e)}encodeValue(e){return wg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function jI(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var BI=/%(\d[a-f0-9])/gi,$I={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wg(n){return encodeURIComponent(n).replace(BI,(e,t)=>$I[t]??e)}function Ko(n){return`${n}`}var ln=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ql,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=jI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ko):[Ko(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ko(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ko(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Yl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function qI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Eg(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ig(n){return typeof Blob<"u"&&n instanceof Blob}function Tg(n){return typeof FormData<"u"&&n instanceof FormData}function zI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ji=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(qI(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new un),this.context||(this.context=new Yl),!this.params)this.params=new ln,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:Eg(this.body)||Ig(this.body)||Tg(this.body)||zI(this.body)||typeof this.body=="string"?this.body:this.body instanceof ln?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Tg(this.body)?null:Ig(this.body)?this.body.type||null:Eg(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ln?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),l)),new n(t,r,s,{params:l,headers:c,context:u,reportProgress:a,responseType:i,withCredentials:o})}},Dr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Dr||{}),$i=class{constructor(e,t=Jo.Ok,r="OK"){this.headers=e.headers||new un,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Jl=class n extends $i{constructor(e={}){super(e),this.type=Dr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Pr=class n extends $i{constructor(e={}){super(e),this.type=Dr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Yo=class extends $i{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Jo=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Jo||{});function Hl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Zl=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ji)o=r;else{let l;s.headers instanceof un?l=s.headers:l=new un(s.headers);let u;s.params&&(s.params instanceof ln?u=s.params:u=new ln({fromObject:s.params})),o=new ji(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=S(o).pipe(At(l=>this.handler.handle(l)));if(r instanceof ji||s.observe==="events")return a;let c=a.pipe(St(l=>l instanceof Pr));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(q(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(q(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(q(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(q(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ln().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Hl(s,i))}post(r,i,s={}){return this.request("POST",r,Hl(s,i))}put(r,i,s={}){return this.request("PUT",r,Hl(s,i))}};e.\u0275fac=function(i){return new(i||e)(C(Bi))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function Og(n,e){return e(n)}function GI(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function WI(n,e,t){return(r,i)=>Ct(t,()=>e(r,s=>n(s,i)))}var KI=new j(""),eu=new j(""),Mg=new j(""),HI=new j("");function QI(){let n=null;return(e,t)=>{n===null&&(n=(A(KI,{optional:!0})??[]).reduceRight(GI,Og));let r=A(xi),i=r.add();return n(e,t).pipe(xn(()=>r.remove(i)))}}var bg=(()=>{let e=class e extends Bi{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=A(xi);let s=A(HI,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(eu),...this.injector.get(Mg,[])]));this.chain=s.reduceRight((o,a)=>WI(o,a,this.injector),Og)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(xn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(C(Qo),C(Ln))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();var YI=/^\)\]\}',?\n/;function JI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Sg=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new D(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?be(i.\u0275loadImpl()):S(null)).pipe(Le(()=>new On(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,w)=>a.setRequestHeader(m,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let m=a.statusText||"OK",w=new un(a.getAllResponseHeaders()),O=JI(a)||r.url;return l=new Jl({headers:w,status:a.status,statusText:m,url:O}),l},h=()=>{let{headers:m,status:w,statusText:O,url:W}=u(),N=null;w!==Jo.NoContent&&(N=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=N?Jo.Ok:0);let he=w>=200&&w<300;if(r.responseType==="json"&&typeof N=="string"){let X=N;N=N.replace(YI,"");try{N=N!==""?JSON.parse(N):null}catch(re){N=X,he&&(he=!1,N={error:re,text:N})}}he?(o.next(new Pr({body:N,headers:m,status:w,statusText:O,url:W||void 0})),o.complete()):o.error(new Yo({error:N,headers:m,status:w,statusText:O,url:W||void 0}))},d=m=>{let{url:w}=u(),O=new Yo({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});o.error(O)},f=!1,g=m=>{f||(o.next(u()),f=!0);let w={type:Dr.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),o.next(w)},v=m=>{let w={type:Dr.UploadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),o.next(w)};return a.addEventListener("load",h),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),r.reportProgress&&(a.addEventListener("progress",g),c!==null&&a.upload&&a.upload.addEventListener("progress",v)),a.send(c),o.next({type:Dr.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",h),a.removeEventListener("timeout",d),r.reportProgress&&(a.removeEventListener("progress",g),c!==null&&a.upload&&a.upload.removeEventListener("progress",v)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(C(Wo))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),xg=new j("XSRF_ENABLED"),XI="XSRF-TOKEN",ZI=new j("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>XI}),eT="X-XSRF-TOKEN",tT=new j("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>eT}),Xo=class{},nT=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=qo(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(C(Re),C(Gt),C(ZI))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function rT(n,e){let t=n.url.toLowerCase();if(!A(xg)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=A(Xo).getToken(),i=A(tT);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Vg=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Vg||{});function iT(n,e){return{\u0275kind:n,\u0275providers:e}}function sT(...n){let e=[Zl,Sg,bg,{provide:Bi,useExisting:bg},{provide:Qo,useExisting:Sg},{provide:eu,useValue:rT,multi:!0},{provide:xg,useValue:!0},{provide:Xo,useClass:nT}];for(let t of n)e.push(...t.\u0275providers);return br(e)}var Ag=new j("LEGACY_INTERCEPTOR_FN");function oT(){return iT(Vg.LegacyInterceptors,[{provide:Ag,useFactory:QI},{provide:eu,useExisting:Ag,multi:!0}])}var Zo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ge({type:e}),e.\u0275inj=me({providers:[sT(oT())]});let n=e;return n})();var Cg="b",Rg="h",Dg="s",Pg="st",Ng="u",kg="rt",Ho=new j(""),aT=["GET","HEAD"];function cT(n,e){let u=A(Ho),{isCacheActive:t}=u,r=Po(u,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!aT.includes(s)||i===!1||r.filter?.(n)===!1)return e(n);let o=A(xo),a=uT(n),c=o.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[Cg]:h,[kg]:d,[Rg]:f,[Dg]:g,[Pg]:v,[Ng]:m}=c,w=h;switch(d){case"arraybuffer":w=new TextEncoder().encode(h).buffer;break;case"blob":w=new Blob([h]);break}let O=new un(f);return S(new Pr({body:w,headers:O,status:g,statusText:v,url:m}))}return e(n).pipe(fe(h=>{h instanceof Pr&&o.set(a,{[Cg]:h.body,[Rg]:lT(h.headers,l),[Dg]:h.status,[Pg]:h.statusText,[Ng]:h.url||"",[kg]:n.responseType})}))}function lT(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function uT(n){let{params:e,method:t,responseType:r,url:i}=n,s=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),o=t+"."+r+"."+i+"?"+s,a=hT(o);return a}function hT(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Lg(n){return[{provide:Ho,useFactory:()=>(Fm("NgHttpTransferCache"),T({isCacheActive:!0},n))},{provide:Mg,useValue:cT,multi:!0,deps:[xo,Ho]},{provide:Vi,multi:!0,useFactory:()=>{let e=A(Li),t=A(Ho);return()=>{tg(e).then(()=>{t.isCacheActive=!1})}}}]}var ru=class extends og{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iu=class n extends ru{static makeCurrent(){sg(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=fT();return t==null?null:pT(t)}resetBaseElement(){qi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qo(document.cookie,e)}},qi=null;function fT(){return qi=qi||document.querySelector("base"),qi?qi.getAttribute("href"):null}function pT(n){return new URL(n,document.baseURI).pathname}var mT=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),su=new j("EventManagerPlugins"),jg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new D(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(C(su),C(ye))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),ea=class{constructor(e){this._doc=e}},tu="ng-app-id",Bg=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wl(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${tu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(tu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(tu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(C(Re),C(Fl),C(jl,8),C(Gt))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),nu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cu=/%COMP%/g,$g="%COMP%",gT=`_nghost-${$g}`,yT=`_ngcontent-${$g}`,vT=!0,_T=new j("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>vT});function wT(n){return yT.replace(cu,n)}function ET(n){return gT.replace(cu,n)}function qg(n,e){return e.map(t=>t.replace(cu,n))}var ta=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Wl(c),this.defaultRenderer=new zi(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pi.ShadowDom&&(i=ae(T({},i),{encapsulation:Pi.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof na?s.applyToHost(r):s instanceof Gi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Pi.Emulated:o=new na(l,u,i,this.appId,h,a,c,d);break;case Pi.ShadowDom:return new ou(l,u,r,i,a,c,this.nonce,d);default:o=new Gi(l,u,i,h,a,c,d);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(C(jg),C(Bg),C(Fl),C(_T),C(Re),C(Gt),C(ye),C(jl))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),zi=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(nu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Fg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Fg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=nu[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=nu[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ni.DashCase|Ni.Important)?e.style.setProperty(t,r,i&Ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Fg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ou=class extends zi{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=qg(i.id,i.styles);for(let u of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gi=class extends zi{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?qg(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},na=class extends Gi{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=wT(l),this.hostAttr=ET(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},IT=(()=>{let e=class e extends ea{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(C(Re))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),Ug=["alt","control","meta","shift"],TT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ST=(()=>{let e=class e extends ea{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Ug.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=TT[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Ug.forEach(a=>{if(a!==s){let c=bT[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(C(Re))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function zg(n,e){return ng(T({rootComponent:n},AT(e)))}function AT(n){return{appProviders:[...NT,...n?.providers??[]],platformProviders:PT}}function CT(){iu.makeCurrent()}function RT(){return new Bl}function DT(){return Om(document),document}var PT=[{provide:Gt,useValue:dg},{provide:Mm,useValue:CT,multi:!0},{provide:Re,useFactory:DT,deps:[]}];var NT=[{provide:km,useValue:"root"},{provide:Bl,useFactory:RT,deps:[]},{provide:su,useClass:IT,multi:!0,deps:[Re,ye,Gt]},{provide:su,useClass:ST,multi:!0,deps:[Re]},ta,Bg,jg,{provide:Vo,useExisting:ta},{provide:Wo,useClass:mT,deps:[]},[]];function kT(){return new lu(C(Re))}var lu=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(C(Re))},e.\u0275prov=M({token:e,factory:function(i){let s=null;return i?s=new i:s=kT(),s},providedIn:"root"});let n=e;return n})();var au=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n}(au||{});function Gg(...n){let e=[],t=new Set,r=t.has(au.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return br([[],rg(),t.has(au.NoHttpTransferCache)||r?[]:Lg({}),e])}var F="primary",as=Symbol("RouteTitle"),pu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xr(n){return new pu(n)}function MT(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rt(n[t],e[t]))return!1;return!0}function Rt(n,e){let t=n?mu(n):void 0,r=e?mu(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ey(n[i],e[i]))return!1;return!0}function mu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ey(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function ty(n){return n.length>0?n[n.length-1]:null}function mn(n){return bt(n)?n:Lo(n)?be(Promise.resolve(n)):S(n)}var VT={exact:ry,subset:iy},ny={exact:LT,subset:FT,ignored:()=>!0};function Wg(n,e,t){return VT[t.paths](n.root,e.root,t.matrixParams)&&ny[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function LT(n,e){return Rt(n,e)}function ry(n,e,t){if(!Gn(n.segments,e.segments)||!sa(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ry(n.children[r],e.children[r],t))return!1;return!0}function FT(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ey(n[t],e[t]))}function iy(n,e,t){return sy(n,e,e.segments,t)}function sy(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Gn(i,t)||e.hasChildren()||!sa(i,t,r))}else if(n.segments.length===t.length){if(!Gn(n.segments,t)||!sa(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!iy(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Gn(n.segments,i)||!sa(n.segments,i,r)||!n.children[F]?!1:sy(n.children[F],e,s,r)}}function sa(n,e,t){return e.every((r,i)=>ny[t](n[i].parameters,r.parameters))}var hn=class{constructor(e=new ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xr(this.queryParams),this._queryParamMap}toString(){return BT.serialize(this)}},ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oa(this)}},zn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xr(this.parameters),this._parameterMap}toString(){return ay(this)}};function UT(n,e){return Gn(n,e)&&n.every((t,r)=>Rt(t.parameters,e[r].parameters))}function Gn(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jT(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===F&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==F&&(t=t.concat(e(i,r)))}),t}var cs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>new Xi,providedIn:"root"});let n=e;return n})(),Xi=class{parse(e){let t=new yu(e);return new hn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wi(e.root,!0)}`,r=zT(e.queryParams),i=typeof e.fragment=="string"?`#${$T(e.fragment)}`:"";return`${t}${r}${i}`}},BT=new Xi;function oa(n){return n.segments.map(e=>ay(e)).join("/")}function Wi(n,e){if(!n.hasChildren())return oa(n);if(e){let t=n.children[F]?Wi(n.children[F],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==F&&r.push(`${i}:${Wi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jT(n,(r,i)=>i===F?[Wi(n.children[F],!1)]:[`${i}:${Wi(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[F]!=null?`${oa(n)}/${t[0]}`:`${oa(n)}/(${t.join("//")})`}}function oy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ra(n){return oy(n).replace(/%3B/gi,";")}function $T(n){return encodeURI(n)}function gu(n){return oy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aa(n){return decodeURIComponent(n)}function Kg(n){return aa(n.replace(/\+/g,"%20"))}function ay(n){return`${gu(n.path)}${qT(n.parameters)}`}function qT(n){return Object.entries(n).map(([e,t])=>`;${gu(e)}=${gu(t)}`).join("")}function zT(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ra(t)}=${ra(i)}`).join("&"):`${ra(t)}=${ra(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var GT=/^[^\/()?;#]+/;function uu(n){let e=n.match(GT);return e?e[0]:""}var WT=/^[^\/()?;=#]+/;function KT(n){let e=n.match(WT);return e?e[0]:""}var HT=/^[^=?&#]+/;function QT(n){let e=n.match(HT);return e?e[0]:""}var YT=/^[^&#]+/;function JT(n){let e=n.match(YT);return e?e[0]:""}var yu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[F]=new ee(e,t)),r}parseSegment(){let e=uu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new zn(aa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=KT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=uu(this.remaining);i&&(r=i,this.capture(r))}e[aa(t)]=aa(r)}parseQueryParam(e){let t=QT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=JT(this.remaining);o&&(r=o,this.capture(r))}let i=Kg(t),s=Kg(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=F);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[F]:new ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function cy(n){return n.segments.length>0?new ee([],{[F]:n}):n}function ly(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=ly(i);if(r===F&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ee(n.segments,e);return XT(t)}function XT(n){if(n.numberOfChildren===1&&n.children[F]){let e=n.children[F];return new ee(n.segments.concat(e.segments),e.children)}return n}function Vr(n){return n instanceof hn}function ZT(n,e,t=null,r=null){let i=uy(n);return hy(i,e,t,r)}function uy(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ee(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=cy(r);return e??i}function hy(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return hu(i,i,i,t,r);let s=eb(e);if(s.toRoot())return hu(i,i,new ee([],{}),t,r);let o=tb(s,i,n),a=o.processChildren?Qi(o.segmentGroup,o.index,s.commands):fy(o.segmentGroup,o.index,s.commands);return hu(i,o.segmentGroup,a,t,r)}function ca(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Zi(n){return typeof n=="object"&&n!=null&&n.outlets}function hu(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=dy(n,e,t);let a=cy(ly(o));return new hn(a,s,i)}function dy(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=dy(s,e,t)}),new ee(n.segments,r)}var la=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ca(r[0]))throw new D(4003,!1);let i=r.find(Zi);if(i&&i!==ty(r))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eb(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new la(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new la(t,e,r)}var Or=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function tb(n,e,t){if(n.isAbsolute)return new Or(e,!0,0);if(!t)return new Or(e,!1,NaN);if(t.parent===null)return new Or(t,!0,0);let r=ca(n.commands[0])?0:1,i=t.segments.length-1+r;return nb(t,i,n.numberOfDoubleDots)}function nb(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new D(4005,!1);i=r.segments.length}return new Or(r,!1,i-s)}function rb(n){return Zi(n[0])?n[0].outlets:{[F]:n}}function fy(n,e,t){if(n??=new ee([],{}),n.segments.length===0&&n.hasChildren())return Qi(n,e,t);let r=ib(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ee(n.segments.slice(0,r.pathIndex),{});return s.children[F]=new ee(n.segments.slice(r.pathIndex),n.children),Qi(s,0,i)}else return r.match&&i.length===0?new ee(n.segments,{}):r.match&&!n.hasChildren()?vu(n,e,t):r.match?Qi(n,0,i):vu(n,e,t)}function Qi(n,e,t){if(t.length===0)return new ee(n.segments,{});{let r=rb(t),i={};if(Object.keys(r).some(s=>s!==F)&&n.children[F]&&n.numberOfChildren===1&&n.children[F].segments.length===0){let s=Qi(n.children[F],e,t);return new ee(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=fy(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ee(n.segments,i)}}function ib(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Zi(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Qg(c,l,o))return s;r+=2}else{if(!Qg(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vu(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Zi(s)){let c=sb(s.outlets);return new ee(r,c)}if(i===0&&ca(t[0])){let c=n.segments[e];r.push(new zn(c.path,Hg(t[0]))),i++;continue}let o=Zi(s)?s.outlets[F]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ca(a)?(r.push(new zn(o,Hg(a))),i+=2):(r.push(new zn(o,{})),i++)}return new ee(r,{})}function sb(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=vu(new ee([],{}),0,r))}),e}function Hg(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Qg(n,e,t){return n==t.path&&Rt(e,t.parameters)}var Yi="imperative",De=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(De||{}),at=class{constructor(e,t){this.id=e,this.url=t}},Lr=class extends at{constructor(e,t,r="imperative",i=null){super(e,t),this.type=De.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yt=class extends at{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=De.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ot||{}),ua=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ua||{}),dn=class extends at{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fn=class extends at{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationSkipped}},es=class extends at{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=De.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ha=class extends at{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_u=class extends at{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wu=class extends at{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=De.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eu=class extends at{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iu=class extends at{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tu=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bu=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Su=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Au=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cu=class{constructor(e){this.snapshot=e,this.type=De.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ru=class{constructor(e){this.snapshot=e,this.type=De.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},da=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=De.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ts=class{},ns=class{constructor(e){this.url=e}};var Du=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ls,this.attachRef=null}},ls=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Du,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),fa=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Pu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Pu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Nu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nu(e,this._root).map(t=>t.value)}};function Pu(n,e){if(n===e.value)return e;for(let t of e.children){let r=Pu(n,t);if(r)return r}return null}function Nu(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Nu(n,t);if(r.length)return r.unshift(e),r}return[]}var Xe=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function kr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var pa=class extends fa{constructor(e,t){super(e),this.snapshot=t,Bu(this,e)}toString(){return this.snapshot.toString()}};function py(n){let e=ob(n),t=new rt([new zn("",{})]),r=new rt({}),i=new rt({}),s=new rt({}),o=new rt(""),a=new pn(t,r,s,o,i,F,n,e.root);return a.snapshot=e.root,new pa(new Xe(a,[]),e)}function ob(n){let e={},t={},r={},i="",s=new rs([],e,r,i,t,F,n,null,{});return new ma("",new Xe(s,[]))}var pn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(q(l=>l[as]))??S(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>xr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>xr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ju(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),n.params),data:T(T({},e.data),n.data),resolve:T(T(T(T({},n.data),e.data),i?.data),n._resolvedData)}:r={params:T({},n.params),data:T({},n.data),resolve:T(T({},n.data),n._resolvedData??{})},i&&gy(i)&&(r.resolve[as]=i.title),r}var rs=class{get title(){return this.data?.[as]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ma=class extends fa{constructor(e,t){super(t),this.url=e,Bu(this,t)}toString(){return my(this._root)}};function Bu(n,e){e.value._routerState=n,e.children.forEach(t=>Bu(n,t))}function my(n){let e=n.children.length>0?` { ${n.children.map(my).join(", ")} } `:"";return`${n.value}${e}`}function du(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rt(e.params,t.params)||n.paramsSubject.next(t.params),xT(e.url,t.url)||n.urlSubject.next(t.url),Rt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ku(n,e){let t=Rt(n.params,e.params)&&UT(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ku(n.parent,e.parent))}function gy(n){return typeof n.title=="string"||n.title===null}var $u=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=F,this.activateEvents=new ce,this.deactivateEvents=new ce,this.attachEvents=new ce,this.detachEvents=new ce,this.parentContexts=A(ls),this.location=A(Bm),this.changeDetector=A(st),this.environmentInjector=A(Ln),this.inputBinder=A(wa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ou(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tr]});let n=e;return n})(),Ou=class{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pn?this.route:e===ls?this.childContexts:this.parent.get(e,t)}},wa=new j(""),Yg=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=No([i.queryParams,i.params,i.data]).pipe(Le(([o,a,c],l)=>(c=T(T(T({},o),a),c),l===0?S(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=ig(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function ab(n,e,t){let r=is(n,e._root,t?t._root:void 0);return new pa(r,e)}function is(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=cb(n,e,t);return new Xe(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>is(n,a)),o}}let r=lb(e.value),i=e.children.map(s=>is(n,s));return new Xe(r,i)}}function cb(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return is(n,r,i);return is(n,r)})}function lb(n){return new pn(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var yy="ngNavigationCancelingError";function vy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_y(!1,ot.Redirect,e);return i.url=t,i.navigationBehaviorOptions=r,i}function _y(n,e,t){let r=new Error("NavigationCancelingError: "+(n||""));return r[yy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ub(n){return wy(n)&&Vr(n.url)}function wy(n){return n&&n[yy]}var hb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=it({type:e,selectors:[["ng-component"]],standalone:!0,features:[an],decls:1,vars:0,template:function(i,s){i&1&&ve(0,"router-outlet")},dependencies:[$u],encapsulation:2});let n=e;return n})();function db(n,e){return n.providers&&!n._injector&&(n._injector=ql(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qu(n){let e=n.children&&n.children.map(qu),t=e?ae(T({},n),{children:e}):T({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==F&&(t.component=hb),t}function Dt(n){return n.outlet||F}function fb(n,e){let t=n.filter(r=>Dt(r)===e);return t.push(...n.filter(r=>Dt(r)!==e)),t}function us(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pb=(n,e,t,r)=>q(i=>(new Mu(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Mu=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),du(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=kr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=kr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=kr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=kr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ru(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(du(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),du(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=us(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ga=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Mr=class{constructor(e,t){this.component=e,this.route=t}};function mb(n,e,t){let r=n._root,i=e?e._root:null;return Ki(r,i,t,[r.value])}function gb(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ur(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Rm(n)?n:e.get(n):r}function Ki(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=kr(e);return n.children.forEach(o=>{yb(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ji(a,t.getContext(o),i)),i}function yb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=vb(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ga(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ki(n,e,a?a.children:null,r,i):Ki(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mr(a.outlet.component,o))}else o&&Ji(e,a,i),i.canActivateChecks.push(new ga(r)),s.component?Ki(n,null,a?a.children:null,r,i):Ki(n,null,t,r,i);return i}function vb(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gn(n.url,e.url)||!Rt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ku(n,e)||!Rt(n.queryParams,e.queryParams);case"paramsChange":default:return!ku(n,e)}}function Ji(n,e,t){let r=kr(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ji(o,e.children.getContext(s),t):Ji(o,null,t):Ji(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Mr(e.outlet.component,i)):t.canDeactivateChecks.push(new Mr(null,i)):t.canDeactivateChecks.push(new Mr(null,i))}function hs(n){return typeof n=="function"}function _b(n){return typeof n=="boolean"}function wb(n){return n&&hs(n.canLoad)}function Eb(n){return n&&hs(n.canActivate)}function Ib(n){return n&&hs(n.canActivateChild)}function Tb(n){return n&&hs(n.canDeactivate)}function bb(n){return n&&hs(n.canMatch)}function Ey(n){return n instanceof bm||n?.name==="EmptyError"}var ia=Symbol("INITIAL_VALUE");function Fr(){return Le(n=>No(n.map(e=>e.pipe(pt(1),Vl(ia)))).pipe(q(e=>{for(let t of e)if(t!==!0){if(t===ia)return ia;if(t===!1||t instanceof hn)return t}return!0}),St(e=>e!==ia),pt(1)))}function Sb(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?S(ae(T({},t),{guardsResult:!0})):Ab(o,r,i,n).pipe(Ye(a=>a&&_b(a)?Cb(r,s,n,e):S(a)),q(a=>ae(T({},t),{guardsResult:a})))})}function Ab(n,e,t,r){return be(n).pipe(Ye(i=>kb(i.component,i.route,t,e,r)),tn(i=>i!==!0,!0))}function Cb(n,e,t,r){return be(e).pipe(At(i=>Di(Db(i.route.parent,r),Rb(i.route,r),Nb(n,i.path,t),Pb(n,i.route,t))),tn(i=>i!==!0,!0))}function Rb(n,e){return n!==null&&e&&e(new Cu(n)),S(!0)}function Db(n,e){return n!==null&&e&&e(new Su(n)),S(!0)}function Pb(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(s=>Er(()=>{let o=us(e)??t,a=Ur(s,o),c=Eb(a)?a.canActivate(e,n):Ct(o,()=>a(e,n));return mn(c).pipe(tn())}));return S(i).pipe(Fr())}function Nb(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>gb(o)).filter(o=>o!==null).map(o=>Er(()=>{let a=o.guards.map(c=>{let l=us(o.node)??t,u=Ur(c,l),h=Ib(u)?u.canActivateChild(r,n):Ct(l,()=>u(r,n));return mn(h).pipe(tn())});return S(a).pipe(Fr())}));return S(s).pipe(Fr())}function kb(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return S(!0);let o=s.map(a=>{let c=us(e)??i,l=Ur(a,c),u=Tb(l)?l.canDeactivate(n,e,t,r):Ct(c,()=>l(n,e,t,r));return mn(u).pipe(tn())});return S(o).pipe(Fr())}function Ob(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let s=i.map(o=>{let a=Ur(o,n),c=wb(a)?a.canLoad(e,t):Ct(n,()=>a(e,t));return mn(c)});return S(s).pipe(Fr(),Iy(r))}function Iy(n){return Al(fe(e=>{if(Vr(e))throw vy(n,e)}),q(e=>e===!0))}function Mb(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let s=i.map(o=>{let a=Ur(o,n),c=bb(a)?a.canMatch(e,t):Ct(n,()=>a(e,t));return mn(c)});return S(s).pipe(Fr(),Iy(r))}var ss=class{constructor(e){this.segmentGroup=e||null}},ya=class extends Error{constructor(e){super(),this.urlTree=e}};function Nr(n){return Ci(new ss(n))}function xb(n){return Ci(new D(4e3,!1))}function Vb(n){return Ci(_y(!1,ot.GuardRejected))}var xu=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[F])return xb(e.redirectTo);i=i.children[F]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new ya(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new hn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Vu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lb(n,e,t,r,i){let s=zu(n,e,t);return s.matched?(r=db(e,r),Mb(r,e,t,i).pipe(q(o=>o===!0?s:T({},Vu)))):S(s)}function zu(n,e,t){if(e.path==="**")return Fb(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?T({},Vu):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||MT)(t,n,e);if(!i)return T({},Vu);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?T(T({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Fb(n){return{matched:!0,parameters:n.length>0?ty(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Jg(n,e,t,r){return t.length>0&&Bb(n,t,r)?{segmentGroup:new ee(e,jb(r,new ee(t,n.children))),slicedSegments:[]}:t.length===0&&$b(n,t,r)?{segmentGroup:new ee(n.segments,Ub(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ee(n.segments,n.children),slicedSegments:t}}function Ub(n,e,t,r){let i={};for(let s of t)if(Ea(n,e,s)&&!r[Dt(s)]){let o=new ee([],{});i[Dt(s)]=o}return T(T({},r),i)}function jb(n,e){let t={};t[F]=e;for(let r of n)if(r.path===""&&Dt(r)!==F){let i=new ee([],{});t[Dt(r)]=i}return t}function Bb(n,e,t){return t.some(r=>Ea(n,e,r)&&Dt(r)!==F)}function $b(n,e,t){return t.some(r=>Ea(n,e,r))}function Ea(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qb(n,e,t,r){return Dt(n)!==r&&(r===F||!Ea(e,t,n))?!1:zu(e,n,t).matched}function zb(n,e,t){return e.length===0&&!n.children[t]}var Lu=class{};function Gb(n,e,t,r,i,s,o="emptyOnly"){return new Fu(n,e,t,r,i,o,s).recognize()}var Wb=31,Fu=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=Jg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(t=>{let r=new rs([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},F,this.rootComponentType,null,{}),i=new Xe(r,t),s=new ma("",i),o=ZT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,F).pipe(Ir(r=>{if(r instanceof ya)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ss?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=ju(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(q(s=>s instanceof Xe?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return be(i).pipe(At(s=>{let o=r.children[s],a=fb(t,s);return this.processSegmentGroup(e,a,o,s)}),Ml((s,o)=>(s.push(...o),s)),kl(null),Am(),Ye(s=>{if(s===null)return Nr(r);let o=Ty(s);return Kb(o),S(o)}))}processSegment(e,t,r,i,s,o){return be(t).pipe(At(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Ir(c=>{if(c instanceof ss)return S(null);throw c}))),tn(a=>!!a),Ir(a=>{if(Ey(a))return zb(r,i,s)?S(new Lu):Nr(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return qb(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Nr(i):Nr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=zu(t,i,s);if(!a)return Nr(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Wb&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,h).pipe(Ye(d=>this.processSegment(e,r,t,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=Lb(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(Le(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Le(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:d}=a,f=new rs(u,d,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,Qb(r),Dt(r),r.component??r._loadedComponent??null,r,Yb(r)),{segmentGroup:g,slicedSegments:v}=Jg(t,u,h,c);if(v.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(q(w=>w===null?null:new Xe(f,w)));if(c.length===0&&v.length===0)return S(new Xe(f,[]));let m=Dt(r)===s;return this.processSegment(l,c,g,v,m?F:s,!0).pipe(q(w=>new Xe(f,w instanceof Xe?[w]:[])))}))):Nr(t)))}getChildConfig(e,t,r){return t.children?S({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?S({routes:t._loadedRoutes,injector:t._loadedInjector}):Ob(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(fe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Vb(t))):S({routes:[],injector:e})}};function Kb(n){n.sort((e,t)=>e.value.outlet===F?-1:t.value.outlet===F?1:e.value.outlet.localeCompare(t.value.outlet))}function Hb(n){let e=n.value.routeConfig;return e&&e.path===""}function Ty(n){let e=[],t=new Set;for(let r of n){if(!Hb(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Ty(r.children);e.push(new Xe(r.value,i))}return e.filter(r=>!t.has(r))}function Qb(n){return n.data||{}}function Yb(n){return n.resolve||{}}function Jb(n,e,t,r,i,s){return Ye(o=>Gb(n,e,t,r,o.extractedUrl,i,s).pipe(q(({state:a,tree:c})=>ae(T({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Xb(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return S(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of by(c))o.add(l);let a=0;return be(o).pipe(At(c=>s.has(c)?Zb(c,r,n,e):(c.data=ju(c,c.parent,n).resolve,S(void 0))),fe(()=>a++),Ol(1),Ye(c=>a===o.size?S(t):Mn))})}function by(n){let e=n.children.map(t=>by(t)).flat();return[n,...e]}function Zb(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!gy(i)&&(s[as]=i.title),e0(s,n,e,r).pipe(q(o=>(n._resolvedData=o,n.data=ju(n,n.parent,t).resolve,null)))}function e0(n,e,t,r){let i=mu(n);if(i.length===0)return S({});let s={};return be(i).pipe(Ye(o=>t0(n[o],e,t,r).pipe(tn(),fe(a=>{s[o]=a}))),Ol(1),Sm(s),Ir(o=>Ey(o)?Mn:Ci(o)))}function t0(n,e,t,r){let i=us(e)??r,s=Ur(n,i),o=s.resolve?s.resolve(e,t):Ct(i,()=>s(e,t));return mn(o)}function fu(n){return Le(e=>{let t=n(e);return t?be(t).pipe(q(()=>e)):S(e)})}var Sy=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===F);return i}getResolvedTitleForRoute(r){return r.data[as]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(n0),providedIn:"root"});let n=e;return n})(),n0=(()=>{let e=class e extends Sy{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(C(lu))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ds=new j("",{providedIn:"root",factory:()=>({})}),os=new j("ROUTES"),Gu=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A($o)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mn(r.loadComponent()).pipe(q(Ay),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),xn(()=>{this.componentLoaders.delete(r)})),s=new Rl(i,()=>new en).pipe(Cl());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=r0(i,this.compiler,r,this.onLoadEndListener).pipe(xn(()=>{this.childrenLoaders.delete(i)})),a=new Rl(o,()=>new en).pipe(Cl());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function r0(n,e,t,r){return mn(n.loadChildren()).pipe(q(Ay),Ye(i=>i instanceof Qm||Array.isArray(i)?S(i):be(e.compileModuleAsync(i))),q(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(os,[],{optional:!0,self:!0}).flat()),{routes:o.map(qu),injector:s}}))}function i0(n){return n&&typeof n=="object"&&"default"in n}function Ay(n){return i0(n)?n.default:n}var Wu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(s0),providedIn:"root"});let n=e;return n})(),s0=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Cy=new j(""),Ry=new j("");function o0(n,e,t){let r=n.get(Ry),i=n.get(Re);return n.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),a0(n))),{onViewTransitionCreated:c}=r;return c&&Ct(n,()=>c({transition:a,from:e,to:t})),o})}function a0(n){return new Promise(e=>{Um(e,{injector:n})})}var Ku=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new en,this.transitionAbortSubject=new en,this.configLoader=A(Gu),this.environmentInjector=A(Ln),this.urlSerializer=A(cs),this.rootContexts=A(ls),this.location=A(Fi),this.inputBindingEnabled=A(wa,{optional:!0})!==null,this.titleStrategy=A(Sy),this.options=A(ds,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(Wu),this.createViewTransition=A(Cy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Tu(s)),i=s=>this.events.next(new bu(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ae(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new rt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(o=>o.id!==0),q(o=>ae(T({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Le(o=>{this.currentTransition=o;let a=!1,c=!1;return S(o).pipe(fe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ae(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Le(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&h!=="reload"){let d="";return this.events.next(new fn(l.id,this.urlSerializer.serialize(l.rawUrl),d,ua.IgnoredSameUrlNavigation)),l.resolve(null),Mn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return S(l).pipe(Le(d=>{let f=this.transitions?.getValue();return this.events.next(new Lr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Mn:Promise.resolve(d)}),Jb(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=ae(T({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new ha(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:f,source:g,restoredState:v,extras:m}=l,w=new Lr(d,this.urlSerializer.serialize(f),g,v);this.events.next(w);let O=py(this.rootComponentType).snapshot;return this.currentTransition=o=ae(T({},l),{targetSnapshot:O,urlAfterRedirects:f,extras:ae(T({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,S(o)}else{let d="";return this.events.next(new fn(l.id,this.urlSerializer.serialize(l.extractedUrl),d,ua.IgnoredByUrlHandlingStrategy)),l.resolve(null),Mn}}),fe(l=>{let u=new _u(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),q(l=>(this.currentTransition=o=ae(T({},l),{guards:mb(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Sb(this.environmentInjector,l=>this.events.next(l)),fe(l=>{if(o.guardsResult=l.guardsResult,Vr(l.guardsResult))throw vy(this.urlSerializer,l.guardsResult);let u=new wu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),St(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ot.GuardRejected),!1)),fu(l=>{if(l.guards.canActivateChecks.length)return S(l).pipe(fe(u=>{let h=new Eu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Le(u=>{let h=!1;return S(u).pipe(Xb(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",ot.NoDataFromResolver)}}))}),fe(u=>{let h=new Iu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),fu(l=>{let u=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(fe(f=>{h.component=f}),q(()=>{})));for(let f of h.children)d.push(...u(f));return d};return No(u(l.targetSnapshot.root)).pipe(kl(null),pt(1))}),fu(()=>this.afterPreactivation()),Le(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?be(h).pipe(q(()=>o)):S(o)}),q(l=>{let u=ab(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ae(T({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),fe(()=>{this.events.next(new ts)}),pb(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),pt(1),fe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Cm(this.transitionAbortSubject.pipe(fe(l=>{throw l}))),xn(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ir(l=>{if(c=!0,wy(l))this.events.next(new dn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),ub(l)?this.events.next(new ns(l.url)):o.resolve(!1);else{this.events.next(new es(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Mn}))}))}cancelNavigationTransition(r,i,s){let o=new dn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function c0(n){return n!==Yi}var l0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(u0),providedIn:"root"});let n=e;return n})(),Uu=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},u0=(()=>{let e=class e extends Uu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qt(e)))(s||e)}})(),e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Dy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(h0),providedIn:"root"});let n=e;return n})(),h0=(()=>{let e=class e extends Dy{constructor(){super(...arguments),this.location=A(Fi),this.urlSerializer=A(cs),this.options=A(ds,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(Wu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=py(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Lr)this.stateMemento=this.createStateMemento();else if(r instanceof fn)this.rawUrlTree=i.initialUrl;else if(r instanceof ha){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ts?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof dn&&(r.code===ot.GuardRejected||r.code===ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof es?this.restoreHistory(i,!0):r instanceof yt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qt(e)))(s||e)}})(),e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hi=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hi||{});function Py(n,e){n.events.pipe(St(t=>t instanceof yt||t instanceof dn||t instanceof es||t instanceof fn),q(t=>t instanceof yt||t instanceof fn?Hi.COMPLETE:(t instanceof dn?t.code===ot.Redirect||t.code===ot.SupersededByNewNavigation:!1)?Hi.REDIRECTING:Hi.FAILED),St(t=>t!==Hi.REDIRECTING),pt(1)).subscribe(()=>{e()})}function d0(n){throw n}var f0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(Bo),this.stateManager=A(Dy),this.options=A(ds,{optional:!0})||{},this.pendingTasks=A(xi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(Ku),this.urlSerializer=A(cs),this.location=A(Fi),this.urlHandlingStrategy=A(Wu),this._events=new en,this.errorHandler=this.options.errorHandler||d0,this.navigated=!1,this.routeReuseStrategy=A(l0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(os,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(wa,{optional:!0}),this.eventsSubscription=new Em,this.isNgZoneEnabled=A(ye)instanceof ye&&ye.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof dn&&i.code!==ot.Redirect&&i.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof yt)this.navigated=!0;else if(i instanceof ns){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||c0(s.source)};this.scheduleNavigation(a,Yi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}g0(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=T({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(qu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=T(T({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let f=s?s.snapshot:this.routerState.snapshot.root;d=uy(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return hy(d,r,h,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Vr(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Yi,null,i)}navigate(r,i={skipLocationChange:!1}){return m0(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=T({},f0):i===!1?s=T({},p0):s=i,Vr(r))return Wg(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Wg(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((d,f)=>{c=d,l=f});let h=this.pendingTasks.add();return Py(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function m0(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new D(4008,!1)}function g0(n){return!(n instanceof ts)&&!(n instanceof ns)}var va=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new en,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof yt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:xm(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(B(Pt),B(pn),Pm("tabindex"),B(on),B(Fn),B(Rr))},e.\u0275dir=mt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ze("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Je("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[nn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ar],skipLocationChange:[nn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ar],replaceUrl:[nn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ar],routerLink:"routerLink"},standalone:!0,features:[jm,Tr]});let n=e;return n})(),Ny=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ce,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof yt&&this.update()})}ngAfterContentInit(){S(this.links.changes,S(null)).pipe(Ri()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=be(r).pipe(Ri()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=y0(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>s.urlTree?r.isActive(s.urlTree,i):!1}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(B(Pt),B(Fn),B(on),B(st),B(va,8))},e.\u0275dir=mt({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&Fo(o,va,5),i&2){let a;jn(a=Bn())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Tr]});let n=e;return n})();function y0(n){return!!n.paths}var _a=class{};var v0=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(St(r=>r instanceof yt),At(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ql(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return be(s).pipe(Ri())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=S(null);let o=s.pipe(Ye(a=>a===null?S(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return be([o,a]).pipe(Ri())}else return o})}};e.\u0275fac=function(i){return new(i||e)(C(Pt),C($o),C(Ln),C(_a),C(Gu))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ky=new j(""),_0=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof yt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof fn&&r.code===ua.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof da&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new da(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Lm()},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function Oy(n,...e){return br([{provide:os,multi:!0,useValue:n},[],{provide:pn,useFactory:My,deps:[Pt]},{provide:Vi,multi:!0,useFactory:xy},e.map(t=>t.\u0275providers)])}function My(n){return n.routerState.root}function jr(n,e){return{\u0275kind:n,\u0275providers:e}}function xy(){let n=A(zt);return e=>{let t=n.get(Li);if(e!==t.components[0])return;let r=n.get(Pt),i=n.get(Vy);n.get(Hu)===1&&r.initialNavigation(),n.get(Ly,null,Ll.Optional)?.setUpPreloading(),n.get(ky,null,Ll.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Vy=new j("",{factory:()=>new en}),Hu=new j("",{providedIn:"root",factory:()=>1});function w0(){return jr(2,[{provide:Hu,useValue:0},{provide:zl,multi:!0,deps:[zt],useFactory:e=>{let t=e.get(ag,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Pt),s=e.get(Vy);Py(i,()=>{r(!0)}),e.get(Ku).afterPreactivation=()=>(r(!0),s.closed?S(void 0):s),i.initialNavigation()}))}}])}function E0(){return jr(3,[{provide:zl,multi:!0,useFactory:()=>{let e=A(Pt);return()=>{e.setUpLocationChangeListener()}}},{provide:Hu,useValue:2}])}var Ly=new j("");function I0(n){return jr(0,[{provide:Ly,useExisting:v0},{provide:_a,useExisting:n}])}function Fy(){return jr(6,[{provide:Rr,useClass:Gl}])}function T0(){return jr(8,[Yg,{provide:wa,useExisting:Yg}])}function b0(n){let e=[{provide:Cy,useValue:o0},{provide:Ry,useValue:T({skipNextTransition:!!n?.skipInitialTransition},n)}];return jr(9,e)}var Xg=new j("ROUTER_FORROOT_GUARD"),S0=[Fi,{provide:cs,useClass:Xi},Pt,ls,{provide:pn,useFactory:My,deps:[Pt]},Gu,[]],Uy=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[S0,[],{provide:os,multi:!0,useValue:r},{provide:Xg,useFactory:D0,deps:[[Pt,new gt,new Nm]]},{provide:ds,useValue:i||{}},i?.useHash?C0():R0(),A0(),i?.preloadingStrategy?I0(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?P0(i):[],i?.bindToComponentInputs?T0().\u0275providers:[],i?.enableViewTransitions?b0().\u0275providers:[],N0()]}}static forChild(r){return{ngModule:e,providers:[{provide:os,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(C(Xg,8))},e.\u0275mod=ge({type:e}),e.\u0275inj=me({});let n=e;return n})();function A0(){return{provide:ky,useFactory:()=>{let n=A(fg),e=A(ye),t=A(ds),r=A(Ku),i=A(cs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _0(i,r,n,e,t)}}}function C0(){return{provide:Rr,useClass:Gl}}function R0(){return{provide:Rr,useClass:cg}}function D0(n){return"guarded"}function P0(n){return[n.initialNavigation==="disabled"?E0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?w0().\u0275providers:[]]}var Zg=new j("");function N0(){return[{provide:Zg,useFactory:xy},{provide:Vi,multi:!0,useExisting:Zg}]}var jy=[{path:"",redirectTo:"projects",pathMatch:"full"},{path:"projects",loadComponent:()=>import("./chunk-INL6TWTC.js").then(n=>n.ProjectsComponent)},{path:"skills",loadComponent:()=>import("./chunk-RDJADEKH.js").then(n=>n.SkillsComponent)},{path:"experience",loadComponent:()=>import("./chunk-XJAHQTYX.js").then(n=>n.ExperienceComponent)}];var G=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(G||{}),Nt="*";function By(n,e=null){return{type:G.Sequence,steps:n,options:e}}function Qu(n){return{type:G.Style,styles:n,offset:null}}var gn=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},fs=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ia="!";function $y(n){return new D(3e3,!1)}function O0(){return new D(3100,!1)}function M0(){return new D(3101,!1)}function x0(n){return new D(3001,!1)}function V0(n){return new D(3003,!1)}function L0(n){return new D(3004,!1)}function F0(n,e){return new D(3005,!1)}function U0(){return new D(3006,!1)}function j0(){return new D(3007,!1)}function B0(n,e){return new D(3008,!1)}function $0(n){return new D(3002,!1)}function q0(n,e,t,r,i){return new D(3010,!1)}function z0(){return new D(3011,!1)}function G0(){return new D(3012,!1)}function W0(){return new D(3200,!1)}function K0(){return new D(3202,!1)}function H0(){return new D(3013,!1)}function Q0(n){return new D(3014,!1)}function Y0(n){return new D(3015,!1)}function J0(n){return new D(3016,!1)}function X0(n,e){return new D(3404,!1)}function Z0(n){return new D(3502,!1)}function eS(n){return new D(3503,!1)}function tS(){return new D(3300,!1)}function nS(n){return new D(3504,!1)}function rS(n){return new D(3301,!1)}function iS(n,e){return new D(3302,!1)}function sS(n){return new D(3303,!1)}function oS(n,e){return new D(3400,!1)}function aS(n){return new D(3401,!1)}function cS(n){return new D(3402,!1)}function lS(n,e){return new D(3505,!1)}function yn(n){switch(n.length){case 0:return new gn;case 1:return n[0];default:return new fs(n)}}function nv(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,h=u&&a||new Map;c.forEach((d,f)=>{let g=f,v=d;if(f!=="offset")switch(g=n.normalizePropertyName(g,i),v){case Ia:v=t.get(f);break;case Nt:v=r.get(f);break;default:v=n.normalizeStyleValue(f,g,v,i);break}h.set(g,v)}),u||s.push(h),a=h,o=l}),i.length)throw Z0(i);return s}function vh(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Yu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Yu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Yu(t,"destroy",n)));break}}function Yu(n,e,t){let r=t.totalTime,i=!!t.disabled,s=_h(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function _h(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function et(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function qy(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var uS=typeof document>"u"?null:document.documentElement;function wh(n){let e=n.parentNode||n.host||null;return e===uS?null:e}function hS(n){return n.substring(1,6)=="ebkit"}var Wn=null,zy=!1;function dS(n){Wn||(Wn=fS()||{},zy=Wn.style?"WebkitAppearance"in Wn.style:!1);let e=!0;return Wn.style&&!hS(n)&&(e=n in Wn.style,!e&&zy&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Wn.style)),e}function fS(){return typeof document<"u"?document.body:null}function rv(n,e){for(;e;){if(e===n)return!0;e=wh(e)}return!1}function iv(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var Eh=(()=>{let e=class e{validateStyleProperty(r){return dS(r)}matchesElement(r,i){return!1}containsElement(r,i){return rv(r,i)}getParentElement(r){return wh(r)}query(r,i,s){return iv(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new gn(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})(),Sh=class Sh{};Sh.NOOP=new Eh;var Qn=Sh,Yn=class{};var pS=1e3,sv="{{",mS="}}",ov="ng-enter",nh="ng-leave",Ta="ng-trigger",Ra=".ng-trigger",Gy="ng-animating",rh=".ng-animating";function Kt(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ih(parseFloat(e[1]),e[2])}function ih(n,e){switch(e){case"s":return n*pS;default:return n}}function Da(n,e,t){return n.hasOwnProperty("duration")?n:gS(n,e,t)}function gS(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push($y(n)),{duration:0,delay:0,easing:""};i=ih(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=ih(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(O0()),a=!0),s<0&&(e.push(M0()),a=!0),a&&e.splice(c,0,$y(n))}return{duration:i,delay:s,easing:o}}function yS(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function kt(n,e,t){e.forEach((r,i)=>{let s=Ih(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Hn(n,e){e.forEach((t,r)=>{let i=Ih(r);n.style[i]=""})}function ps(n){return Array.isArray(n)?n.length==1?n[0]:By(n):n}function vS(n,e,t){let r=e.params||{},i=av(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(x0(s))})}var sh=new RegExp(`${sv}\\s*(.+?)\\s*${mS}`,"g");function av(n){let e=[];if(typeof n=="string"){let t;for(;t=sh.exec(n);)e.push(t[1]);sh.lastIndex=0}return e}function gs(n,e,t){let r=`${n}`,i=r.replace(sh,(s,o)=>{let a=e[o];return a==null&&(t.push(V0(o)),a=""),a.toString()});return i==r?n:i}var _S=/-+([a-z0-9])/g;function Ih(n){return n.replace(_S,(...e)=>e[1].toUpperCase())}function wS(n,e){return n===0||e===0}function ES(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Th(n,a)))}}return e}function Ze(n,e,t){switch(e.type){case G.Trigger:return n.visitTrigger(e,t);case G.State:return n.visitState(e,t);case G.Transition:return n.visitTransition(e,t);case G.Sequence:return n.visitSequence(e,t);case G.Group:return n.visitGroup(e,t);case G.Animate:return n.visitAnimate(e,t);case G.Keyframes:return n.visitKeyframes(e,t);case G.Style:return n.visitStyle(e,t);case G.Reference:return n.visitReference(e,t);case G.AnimateChild:return n.visitAnimateChild(e,t);case G.AnimateRef:return n.visitAnimateRef(e,t);case G.Query:return n.visitQuery(e,t);case G.Stagger:return n.visitStagger(e,t);default:throw L0(e.type)}}function Th(n,e){return window.getComputedStyle(n)[e]}var IS=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Pa=class extends Yn{normalizePropertyName(e,t){return Ih(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(IS.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(F0(e,r))}return o+s}};var Na="*";function TS(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>bS(r,t,e)):t.push(n),t}function bS(n,e,t){if(n[0]==":"){let c=SS(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(Y0(n)),e;let i=r[1],s=r[2],o=r[3];e.push(Wy(i,o));let a=i==Na&&o==Na;s[0]=="<"&&!a&&e.push(Wy(o,i))}function SS(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(J0(n)),"* => *"}}var ba=new Set(["true","1"]),Sa=new Set(["false","0"]);function Wy(n,e){let t=ba.has(n)||Sa.has(n),r=ba.has(e)||Sa.has(e);return(i,s)=>{let o=n==Na||n==i,a=e==Na||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?ba.has(n):Sa.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?ba.has(e):Sa.has(e)),o&&a}}var cv=":self",AS=new RegExp(`s*${cv}s*,?`,"g");function lv(n,e,t,r){return new oh(n).build(e,t,r)}var Ky="",oh=class{constructor(e){this._driver=e}build(e,t,r){let i=new ah(t);return this._resetContextStyleTimingState(i),Ze(this,ps(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ky,e.collectedStyles=new Map,e.collectedStyles.set(Ky,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(U0()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==G.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==G.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(j0())}),{type:G.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{av(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(B0(e.name,[...s.values()]))}return{type:G.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Ze(this,ps(e.animation),t),i=TS(e.expr,t.errors);return{type:G.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Kn(e.options)}}visitSequence(e,t){return{type:G.Sequence,steps:e.steps.map(r=>Ze(this,r,t)),options:Kn(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Ze(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:G.Group,steps:s,options:Kn(e.options)}}visitAnimate(e,t){let r=PS(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Qu({});if(s.type==G.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=Qu(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:G.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Nt?r.push(a):t.errors.push($0(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(sv)>=0){s=!0;break}}}),{type:G.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),h=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(q0(c,u.startTime,u.endTime,s,i)),h=!1),s=u.startTime),h&&l.set(c,{startTime:s,endTime:i}),t.options&&vS(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:G.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(z0()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(w=>{let O=this._makeStyleAst(w,t),W=O.offset!=null?O.offset:DS(O.styles),N=0;return W!=null&&(s++,N=O.offset=W),c=c||N<0||N>1,a=a||N<l,l=N,o.push(N),O});c&&t.errors.push(G0()),a&&t.errors.push(W0());let h=e.steps.length,d=0;s>0&&s<h?t.errors.push(K0()):s==0&&(d=i/(h-1));let f=h-1,g=t.currentTime,v=t.currentAnimateTimings,m=v.duration;return u.forEach((w,O)=>{let W=d>0?O==f?1:d*O:o[O],N=W*m;t.currentTime=g+v.delay+N,v.duration=N,this._validateStyleAst(w,t),w.offset=W,r.styles.push(w)}),r}visitReference(e,t){return{type:G.Reference,animation:Ze(this,ps(e.animation),t),options:Kn(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:G.AnimateChild,options:Kn(e.options)}}visitAnimateRef(e,t){return{type:G.AnimateRef,animation:this.visitReference(e.animation,t),options:Kn(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=CS(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,et(t.collectedStyles,t.currentQuerySelector,new Map);let a=Ze(this,ps(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:G.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Kn(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(H0());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Da(e.timings,t.errors,!0);return{type:G.Stagger,animation:Ze(this,ps(e.animation),t),timings:r,options:null}}};function CS(n){let e=!!n.split(/\s*,\s*/).find(t=>t==cv);return e&&(n=n.replace(AS,"")),n=n.replace(/@\*/g,Ra).replace(/@\w+/g,t=>Ra+"-"+t.slice(1)).replace(/:animating/g,rh),[n,e]}function RS(n){return n?T({},n):null}var ah=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function DS(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function PS(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Da(n,e).duration;return Ju(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Ju(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Da(t,e);return Ju(i.duration,i.delay,i.easing)}function Kn(n){return n?(n=T({},n),n.params&&(n.params=RS(n.params))):n={},n}function Ju(n,e,t){return{duration:n,delay:e,easing:t}}function bh(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var ys=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},NS=1,kS=":enter",OS=new RegExp(kS,"g"),MS=":leave",xS=new RegExp(MS,"g");function uv(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new ch().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var ch=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new ys;let h=new lh(e,t,l,i,s,u,[]);h.options=c;let d=c.delay?Kt(c.delay):0;h.currentTimeline.delayNextStep(d),h.currentTimeline.setStyles([o],null,h.errors,c),Ze(this,r,h);let f=h.timelines.filter(g=>g.containsAnimation());if(f.length&&a.size){let g;for(let v=f.length-1;v>=0;v--){let m=f[v];if(m.element===t){g=m;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,h.errors,c)}return f.length?f.map(g=>g.buildKeyframes()):[bh(t,[],[],[],0,d,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Kt(gs(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Kt(r.duration):null,a=r.delay!=null?Kt(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ze(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==G.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ka);let o=Kt(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ze(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Kt(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ze(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?gs(r,t.params,t.errors):r;return Da(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==G.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Kt(i.delay):0;s&&(t.previousNode.type===G.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ka);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let h=t.createSubContext(e.options,l);s&&h.delayNextStep(s),l===t.element&&(c=h.currentTimeline),Ze(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let d=h.currentTimeline.currentTime;o=Math.max(o,d)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let h=u.currentTime;Ze(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}},ka={},lh=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ka,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Oa(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Kt(r.duration)),r.delay!=null&&(i.delay=Kt(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=gs(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ka,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new uh(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(OS,"."+this._enterClassName),e=e.replace(xS,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(Q0(t)),a}},Oa=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=NS,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Nt),this._currentKeyframe.set(t,Nt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=VS(e,this._globalTimelineStyles);for(let[a,c]of o){let l=gs(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Nt),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,h)=>{u===Ia?e.add(h):u===Nt&&t.add(h)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return bh(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},uh=class extends Oa{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",Hy(a)),s.push(l);let u=e.length-1;for(let h=1;h<=u;h++){let d=new Map(e[h]),f=d.get("offset"),g=t+f*r;d.set("offset",Hy(g/o)),s.push(d)}r=o,t=0,i="",e=s}return bh(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function Hy(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function VS(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Nt)}else for(let[s,o]of i)t.set(s,o)}),t}function Qy(n,e,t,r,i,s,o,a,c,l,u,h,d){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:h,errors:d}}var Xu={},Ma=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return LS(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let h=[],d=this.ast.options&&this.ast.options.params||Xu,f=a&&a.params||Xu,g=this.buildStyles(r,f,h),v=c&&c.params||Xu,m=this.buildStyles(i,v,h),w=new Set,O=new Map,W=new Map,N=i==="void",he={params:hv(v,d),delay:this.ast.options?.delay},X=u?[]:uv(e,t,this.ast.animation,s,o,g,m,he,l,h),re=0;return X.forEach(de=>{re=Math.max(de.duration+de.delay,re)}),h.length?Qy(t,this._triggerName,r,i,N,g,m,[],[],O,W,re,h):(X.forEach(de=>{let He=de.element,ft=et(O,He,new Set);de.preStyleProps.forEach(Nn=>ft.add(Nn));let ym=et(W,He,new Set);de.postStyleProps.forEach(Nn=>ym.add(Nn)),He!==t&&w.add(He)}),Qy(t,this._triggerName,r,i,N,g,m,X,[...w.values()],O,W,re))}};function LS(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function hv(n,e){let t=T({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var hh=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=hv(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=gs(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function FS(n,e,t){return new dh(n,e,t)}var dh=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new hh(i.style,s,r))}),Yy(this.states,"true","1"),Yy(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Ma(e,i,this.states))}),this.fallbackTransition=US(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function US(n,e,t){let r=[(o,a)=>!0],i={type:G.Sequence,steps:[],options:null},s={type:G.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Ma(n,s,e)}function Yy(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var jS=new ys,fh=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=lv(this._driver,t,r,i);if(r.length)throw eS(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=nv(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=uv(this._driver,t,s,ov,nh,new Map,new Map,r,jS,i),o.forEach(u=>{let h=et(a,u.element,new Map);u.postStyleProps.forEach(d=>h.set(d,null))})):(i.push(tS()),o=[]),i.length)throw nS(i);a.forEach((u,h)=>{u.forEach((d,f)=>{u.set(f,this._driver.computeStyle(h,f,Nt))})});let c=o.map(u=>{let h=a.get(u.element);return this._buildPlayer(u,new Map,h)}),l=yn(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw rS(e);return t}listen(e,t,r,i){let s=_h(t,"","","");return vh(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Jy="ng-animate-queued",BS=".ng-animate-queued",Zu="ng-animate-disabled",$S=".ng-animate-disabled",qS="ng-star-inserted",zS=".ng-star-inserted",GS=[],dv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},WS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vt="__ng_removed",vs=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=HS(i),r){let s=e,{value:o}=s,a=Po(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},ms="void",eh=new vs(ms),ph=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ct(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw iS(r,t);if(r==null||r.length==0)throw sS(t);if(!QS(r))throw oS(r,t);let s=et(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=et(this._engine.statesByElement,e,new Map);return a.has(t)||(ct(e,Ta),ct(e,Ta+"-"+t),a.set(t,eh)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw aS(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new _s(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ct(e,Ta),ct(e,Ta+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new vs(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=eh),!(l.value===ms)&&c.value===l.value){if(!XS(c.params,l.params)){let v=[],m=s.matchStyles(c.value,c.params,v),w=s.matchStyles(l.value,l.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Hn(e,m),kt(e,w)})}return}let d=et(this._engine.playersByElement,e,[]);d.forEach(v=>{v.namespaceId==this.id&&v.triggerName==t&&v.queued&&v.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),g=!1;if(!f){if(!i)return;f=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:g}),g||(ct(e,Jy),o.onStart(()=>{Br(e,Jy)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);let m=this._engine.playersByElement.get(e);if(m){let w=m.indexOf(o);w>=0&&m.splice(w,1)}}),this.players.push(o),d.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ra,!0);r.forEach(i=>{if(i[vt])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,ms,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&yn(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||eh,u=new vs(ms),h=new _s(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[vt];(!s||s===dv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ct(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=_h(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,vh(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},mh=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r,i){this.bodyNode=e,this.driver=t,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new ph(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Aa(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Aa(t))return;let s=t[vt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ct(e,Zu)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Br(e,Zu))}removeNode(e,t,r){if(Aa(t)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[vt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Aa(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Ra,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,rh,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yn(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[vt];if(t&&t.setForRemoval){if(e[vt]=dv,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Zu)&&this.markElementAsDisabled(e,!1),this.driver.query(e,$S,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ct(i,qS)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?yn(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw cS(e)}_flushAnimations(e,t){let r=new ys,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(b=>{u.add(b);let P=this.driver.query(b,BS,!0);for(let k=0;k<P.length;k++)u.add(P[k])});let h=this.bodyNode,d=Array.from(this.statesByElement.keys()),f=ev(d,this.collectedEnterElements),g=new Map,v=0;f.forEach((b,P)=>{let k=ov+v++;g.set(P,k),b.forEach(Q=>ct(Q,k))});let m=[],w=new Set,O=new Set;for(let b=0;b<this.collectedLeaveElements.length;b++){let P=this.collectedLeaveElements[b],k=P[vt];k&&k.setForRemoval&&(m.push(P),w.add(P),k.hasAnimation?this.driver.query(P,zS,!0).forEach(Q=>w.add(Q)):O.add(P))}let W=new Map,N=ev(d,Array.from(w));N.forEach((b,P)=>{let k=nh+v++;W.set(P,k),b.forEach(Q=>ct(Q,k))}),e.push(()=>{f.forEach((b,P)=>{let k=g.get(P);b.forEach(Q=>Br(Q,k))}),N.forEach((b,P)=>{let k=W.get(P);b.forEach(Q=>Br(Q,k))}),m.forEach(b=>{this.processLeaveNode(b)})});let he=[],X=[];for(let b=this._namespaceList.length-1;b>=0;b--)this._namespaceList[b].drainQueuedTransitions(t).forEach(k=>{let Q=k.player,Ae=k.element;if(he.push(Q),this.collectedEnterElements.length){let Ve=Ae[vt];if(Ve&&Ve.setForMove){if(Ve.previousTriggersValues&&Ve.previousTriggersValues.has(k.triggerName)){let kn=Ve.previousTriggersValues.get(k.triggerName),nt=this.statesByElement.get(k.element);if(nt&&nt.has(k.triggerName)){let Do=nt.get(k.triggerName);Do.value=kn,nt.set(k.triggerName,Do)}}Q.destroy();return}}let Tt=!h||!this.driver.containsElement(h,Ae),Qe=W.get(Ae),Zt=g.get(Ae),oe=this._buildInstruction(k,r,Zt,Qe,Tt);if(oe.errors&&oe.errors.length){X.push(oe);return}if(Tt){Q.onStart(()=>Hn(Ae,oe.fromStyles)),Q.onDestroy(()=>kt(Ae,oe.toStyles)),i.push(Q);return}if(k.isFallbackTransition){Q.onStart(()=>Hn(Ae,oe.fromStyles)),Q.onDestroy(()=>kt(Ae,oe.toStyles)),i.push(Q);return}let wm=[];oe.timelines.forEach(Ve=>{Ve.stretchStartingKeyframe=!0,this.disabledNodes.has(Ve.element)||wm.push(Ve)}),oe.timelines=wm,r.append(Ae,oe.timelines);let LI={instruction:oe,player:Q,element:Ae};o.push(LI),oe.queriedElements.forEach(Ve=>et(a,Ve,[]).push(Q)),oe.preStyleProps.forEach((Ve,kn)=>{if(Ve.size){let nt=c.get(kn);nt||c.set(kn,nt=new Set),Ve.forEach((Do,Sl)=>nt.add(Sl))}}),oe.postStyleProps.forEach((Ve,kn)=>{let nt=l.get(kn);nt||l.set(kn,nt=new Set),Ve.forEach((Do,Sl)=>nt.add(Sl))})});if(X.length){let b=[];X.forEach(P=>{b.push(lS(P.triggerName,P.errors))}),he.forEach(P=>P.destroy()),this.reportError(b)}let re=new Map,de=new Map;o.forEach(b=>{let P=b.element;r.has(P)&&(de.set(P,P),this._beforeAnimationBuild(b.player.namespaceId,b.instruction,re))}),i.forEach(b=>{let P=b.element;this._getPreviousPlayers(P,!1,b.namespaceId,b.triggerName,null).forEach(Q=>{et(re,P,[]).push(Q),Q.destroy()})});let He=m.filter(b=>tv(b,c,l)),ft=new Map;Zy(ft,this.driver,O,l,Nt).forEach(b=>{tv(b,c,l)&&He.push(b)});let Nn=new Map;f.forEach((b,P)=>{Zy(Nn,this.driver,new Set(b),c,Ia)}),He.forEach(b=>{let P=ft.get(b),k=Nn.get(b);ft.set(b,new Map([...P?.entries()??[],...k?.entries()??[]]))});let bl=[],vm=[],_m={};o.forEach(b=>{let{element:P,player:k,instruction:Q}=b;if(r.has(P)){if(u.has(P)){k.onDestroy(()=>kt(P,Q.toStyles)),k.disabled=!0,k.overrideTotalTime(Q.totalTime),i.push(k);return}let Ae=_m;if(de.size>1){let Qe=P,Zt=[];for(;Qe=Qe.parentNode;){let oe=de.get(Qe);if(oe){Ae=oe;break}Zt.push(Qe)}Zt.forEach(oe=>de.set(oe,Ae))}let Tt=this._buildAnimation(k.namespaceId,Q,re,s,Nn,ft);if(k.setRealPlayer(Tt),Ae===_m)bl.push(k);else{let Qe=this.playersByElement.get(Ae);Qe&&Qe.length&&(k.parentPlayer=yn(Qe)),i.push(k)}}else Hn(P,Q.fromStyles),k.onDestroy(()=>kt(P,Q.toStyles)),vm.push(k),u.has(P)&&i.push(k)}),vm.forEach(b=>{let P=s.get(b.element);if(P&&P.length){let k=yn(P);b.setRealPlayer(k)}}),i.forEach(b=>{b.parentPlayer?b.syncPlayerEvents(b.parentPlayer):b.destroy()});for(let b=0;b<m.length;b++){let P=m[b],k=P[vt];if(Br(P,nh),k&&k.hasAnimation)continue;let Q=[];if(a.size){let Tt=a.get(P);Tt&&Tt.length&&Q.push(...Tt);let Qe=this.driver.query(P,rh,!0);for(let Zt=0;Zt<Qe.length;Zt++){let oe=a.get(Qe[Zt]);oe&&oe.length&&Q.push(...oe)}}let Ae=Q.filter(Tt=>!Tt.destroyed);Ae.length?YS(this,P,Ae):this.processLeaveNode(P)}return m.length=0,bl.forEach(b=>{this.players.push(b),b.onDone(()=>{b.destroy();let P=this.players.indexOf(b);this.players.splice(P,1)}),b.play()}),bl}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ms;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,h=et(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{let g=f.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),f.destroy(),h.push(f)})}Hn(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,h=new Set,d=t.timelines.map(g=>{let v=g.element;u.add(v);let m=v[vt];if(m&&m.removedBeforeQueried)return new gn(g.duration,g.delay);let w=v!==c,O=JS((r.get(v)||GS).map(re=>re.getRealPlayer())).filter(re=>{let de=re;return de.element?de.element===v:!1}),W=s.get(v),N=o.get(v),he=nv(this._normalizer,g.keyframes,W,N),X=this._buildPlayer(g,he,O);if(g.subTimeline&&i&&h.add(v),w){let re=new _s(e,a,v);re.setRealPlayer(X),l.push(re)}return X});l.forEach(g=>{et(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>KS(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>ct(g,Gy));let f=yn(d);return f.onDestroy(()=>{u.forEach(g=>Br(g,Gy)),kt(c,t.toStyles)}),h.forEach(g=>{et(i,g,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new gn(e.duration,e.delay)}},_s=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new gn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>vh(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){et(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function KS(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function HS(n){return n??null}function Aa(n){return n&&n.nodeType===1}function QS(n){return n=="start"||n=="done"}function Xy(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Zy(n,e,t,r,i){let s=[];t.forEach(c=>s.push(Xy(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(h=>{let d=e.computeStyle(l,h,i);u.set(h,d),(!d||d.length==0)&&(l[vt]=WS,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>Xy(c,s[a++])),o}function ev(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function ct(n,e){n.classList?.add(e)}function Br(n,e){n.classList?.remove(e)}function YS(n,e,t){yn(t).onDone(()=>n.processLeaveNode(e))}function JS(n){let e=[];return fv(n,e),e}function fv(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof fs?fv(r.players,e):e.push(r)}}function XS(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function tv(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var qr=class{constructor(e,t,r,i){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new mh(e.body,t,r,i),this._timelineEngine=new fh(e.body,t,r),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=lv(this._driver,s,c,l);if(c.length)throw X0(i,c);l.length&&void 0,a=FS(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=qy(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=qy(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function ZS(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=th(e[0]),e.length>1&&(r=th(e[e.length-1]))):e instanceof Map&&(t=th(e)),t||r?new gh(n,t,r):null}var $r=class $r{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=$r.initialStylesByElement.get(e);i||$r.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&kt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kt(this._element,this._initialStyles),this._endStyles&&(kt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&($r.initialStylesByElement.delete(this._element),this._startStyles&&(Hn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hn(this._element,this._endStyles),this._endStyles=null),kt(this._element,this._initialStyles),this._state=3)}};$r.initialStylesByElement=new WeakMap;var gh=$r;function th(n){let e=null;return n.forEach((t,r)=>{eA(r)&&(e=e||new Map,e.set(r,t))}),e}function eA(n){return n==="display"||n==="position"}var xa=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Th(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Va=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return rv(e,t)}getParentElement(e){return wh(e)}query(e,t,r){return iv(e,t,r)}computeStyle(e,t,r){return Th(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof xa);wS(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((g,v)=>l.set(v,g))});let h=yS(t).map(f=>new Map(f));h=ES(e,h,l);let d=ZS(e,h);return new xa(e,h,c,d)}};var Ca="@",pv="@.disabled",La=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Ca&&t==pv?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},yh=class extends La{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Ca?t.charAt(1)=="."&&t==pv?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Ca){let i=tA(e),s=t.slice(1),o="";return s.charAt(0)!=Ca&&([s,o]=nA(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function tA(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function nA(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Fa=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let h=()=>l.delete(i);u=new La(r,i,this.engine,h),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new yh(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var iA=(()=>{let e=class e extends qr{constructor(r,i,s){super(r,i,s,A(Vm,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(C(Re),C(Qn),C(Yn))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let n=e;return n})();function sA(){return new Pa}function oA(n,e,t){return new Fa(n,e,t)}var mv=[{provide:Yn,useFactory:sA},{provide:qr,useClass:iA},{provide:Vo,useFactory:oA,deps:[ta,qr,ye]}],aA=[{provide:Qn,useFactory:()=>new Va},{provide:Ul,useValue:"BrowserAnimations"},...mv],nM=[{provide:Qn,useClass:Eh},{provide:Ul,useValue:"NoopAnimations"},...mv];function gv(){return[...aA]}var _n=class{},yv=(()=>{class n extends _n{getTranslation(t){return S({})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qt(n)))(i||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),ws=class{},vv=(()=>{class n{handle(t){return t.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Ua(n,e){if(n===e)return!0;if(n===null||e===null)return!1;if(n!==n&&e!==e)return!0;let t=typeof n,r=typeof e,i,s,o;if(t==r&&t=="object")if(Array.isArray(n)){if(!Array.isArray(e))return!1;if((i=n.length)==e.length){for(s=0;s<i;s++)if(!Ua(n[s],e[s]))return!1;return!0}}else{if(Array.isArray(e))return!1;o=Object.create(null);for(s in n){if(!Ua(n[s],e[s]))return!1;o[s]=!0}for(s in e)if(!(s in o)&&typeof e[s]<"u")return!1;return!0}return!1}function vn(n){return typeof n<"u"&&n!==null}function Ah(n){return n&&typeof n=="object"&&!Array.isArray(n)}function Ev(n,e){let t=Object.assign({},n);return Ah(n)&&Ah(e)&&Object.keys(e).forEach(r=>{Ah(e[r])?r in n?t[r]=Ev(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}var zr=class{},_v=(()=>{class n extends zr{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,r){let i;return typeof t=="string"?i=this.interpolateString(t,r):typeof t=="function"?i=this.interpolateFunction(t,r):i=t,i}getValue(t,r){let i=typeof r=="string"?r.split("."):[r];r="";do r+=i.shift(),vn(t)&&vn(t[r])&&(typeof t[r]=="object"||!i.length)?(t=t[r],r=""):i.length?r+=".":t=void 0;while(i.length);return t}interpolateFunction(t,r){return t(r)}interpolateString(t,r){return r?t.replace(this.templateMatcher,(i,s)=>{let o=this.getValue(r,s);return vn(o)?o:i}):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qt(n)))(i||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Gr=class{},wv=(()=>{class n extends Gr{compile(t,r){return t}compileTranslations(t,r){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qt(n)))(i||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),ja=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new ce;onLangChange=new ce;onDefaultLangChange=new ce},Ch=new j("USE_STORE"),Rh=new j("USE_DEFAULT_LANG"),Dh=new j("DEFAULT_LANGUAGE"),Ph=new j("USE_EXTEND"),Jn=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new ce;_onLangChange=new ce;_onDefaultLangChange=new ce;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,r,i,s,o,a=!0,c=!1,l=!1,u){this.store=t,this.currentLoader=r,this.compiler=i,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=c,this.extend=l,u&&this.setDefaultLang(u)}setDefaultLang(t){if(t===this.defaultLang)return;let r=this.retrieveTranslations(t);typeof r<"u"?(this.defaultLang==null&&(this.defaultLang=t),r.pipe(pt(1)).subscribe(i=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return S(this.translations[t]);let r=this.retrieveTranslations(t);return typeof r<"u"?(this.currentLang||(this.currentLang=t),r.pipe(pt(1)).subscribe(i=>{this.changeLang(t)}),r):(this.changeLang(t),S(this.translations[t]))}retrieveTranslations(t){let r;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),r=this._translationRequests[t]),r}getTranslation(t){this.pending=!0;let r=this.currentLoader.getTranslation(t).pipe(xl(1),pt(1));return this.loadingTranslations=r.pipe(q(i=>this.compiler.compileTranslations(i,t)),xl(1),pt(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[t]=this.extend&&this.translations[t]?T(T({},i),this.translations[t]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(t,r,i=!1){r=this.compiler.compileTranslations(r,t),(i||this.extend)&&this.translations[t]?this.translations[t]=Ev(this.translations[t],r):this.translations[t]=r,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(r=>{this.langs.indexOf(r)===-1&&this.langs.push(r)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,r,i){let s;if(r instanceof Array){let o={},a=!1;for(let c of r)o[c]=this.getParsedResult(t,c,i),bt(o[c])&&(a=!0);if(a){let c=r.map(l=>bt(o[l])?o[l]:S(o[l]));return ko(c).pipe(q(l=>{let u={};return l.forEach((h,d)=>{u[r[d]]=h}),u}))}return o}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,r),i)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],r),i)),typeof s>"u"){let o={key:r,translateService:this};typeof i<"u"&&(o.interpolateParams=i),s=this.missingTranslationHandler.handle(o)}return typeof s<"u"?s:r}get(t,r){if(!vn(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(At(i=>(i=this.getParsedResult(i,t,r),bt(i)?i:S(i))));{let i=this.getParsedResult(this.translations[this.currentLang],t,r);return bt(i)?i:S(i)}}getStreamOnTranslationChange(t,r){if(!vn(t)||!t.length)throw new Error('Parameter "key" required');return Di(Er(()=>this.get(t,r)),this.onTranslationChange.pipe(Le(i=>{let s=this.getParsedResult(i.translations,t,r);return typeof s.subscribe=="function"?s:S(s)})))}stream(t,r){if(!vn(t)||!t.length)throw new Error('Parameter "key" required');return Di(Er(()=>this.get(t,r)),this.onLangChange.pipe(Le(i=>{let s=this.getParsedResult(i.translations,t,r);return bt(s)?s:S(s)})))}instant(t,r){if(!vn(t)||!t.length)throw new Error('Parameter "key" required');let i=this.getParsedResult(this.translations[this.currentLang],t,r);if(bt(i)){if(t instanceof Array){let s={};return t.forEach((o,a)=>{s[t[a]]=t[a]}),s}return t}else return i}set(t,r,i=this.currentLang){this.translations[i][t]=this.compiler.compile(r,i),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;if(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof t>"u"))return t.indexOf("-")!==-1&&(t=t.split("-")[0]),t.indexOf("_")!==-1&&(t=t.split("_")[0]),t}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(r){return new(r||n)(C(ja),C(_n),C(Gr),C(zr),C(ws),C(Rh),C(Ch),C(Ph),C(Dh))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();var Iv=(()=>{class n{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,r){this.translate=t,this._ref=r}updateValue(t,r,i){let s=o=>{this.value=o!==void 0?o:t,this.lastKey=t,this._ref.markForCheck()};if(i){let o=this.translate.getParsedResult(i,t,r);bt(o.subscribe)?o.subscribe(s):s(o)}this.translate.get(t,r).subscribe(s)}transform(t,...r){if(!t||!t.length)return t;if(Ua(t,this.lastKey)&&Ua(r,this.lastParams))return this.value;let i;if(vn(r[0])&&r.length)if(typeof r[0]=="string"&&r[0].length){let s=r[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{i=JSON.parse(s)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else typeof r[0]=="object"&&!Array.isArray(r[0])&&(i=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,i,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||n)(B(Jn,16),B(st,16))};static \u0275pipe=Dm({name:"translate",type:n,pure:!1});static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Ba=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:_n,useClass:yv},t.compiler||{provide:Gr,useClass:wv},t.parser||{provide:zr,useClass:_v},t.missingTranslationHandler||{provide:ws,useClass:vv},ja,{provide:Ch,useValue:t.isolate},{provide:Rh,useValue:t.useDefaultLang},{provide:Ph,useValue:t.extend},{provide:Dh,useValue:t.defaultLanguage},Jn]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:_n,useClass:yv},t.compiler||{provide:Gr,useClass:wv},t.parser||{provide:zr,useClass:_v},t.missingTranslationHandler||{provide:ws,useClass:vv},{provide:Ch,useValue:t.isolate},{provide:Rh,useValue:t.useDefaultLang},{provide:Ph,useValue:t.extend},{provide:Dh,useValue:t.defaultLanguage},Jn]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ge({type:n});static \u0275inj=me({})}return n})();var $a=class{http;prefix;suffix;constructor(e,t="/assets/i18n/",r=".json"){this.http=e,this.prefix=t,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}};var bv=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cA=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),r.push(t[u],t[h],t[d],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new Oh;let d=s<<2|a>>4;if(r.push(d),l!==64){let f=a<<4&240|l>>2;if(r.push(f),h!==64){let g=l<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Oh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lA=function(n){let e=bv(n);return Sv.encodeByteArray(e,!0)},Es=function(n){return lA(n).replace(/\./g,"")},xh=function(n){try{return Sv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hA=()=>uA().__FIREBASE_DEFAULTS__,dA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xh(n[1]);return e&&JSON.parse(e)},za=()=>{try{return hA()||dA()||fA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Av=n=>{var e,t;return(t=(e=za())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Cv=n=>{let e=Av(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vh=()=>{var n;return(n=za())===null||n===void 0?void 0:n.config},Rv=n=>{var e;return(e=za())===null||e===void 0?void 0:e[`_${n}`]};var qa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Dv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Es(JSON.stringify(t)),Es(JSON.stringify(o)),""].join(".")}function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function pA(){var n;let e=(n=za())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nv(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ov(){return!pA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ga(){try{return typeof indexedDB=="object"}catch{return!1}}function Mv(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var mA="FirebaseError",lt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mA,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ht.prototype.create)}},Ht=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lt(i,a,r)}};function gA(n,e){return n.replace(yA,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yA=/\{\$([^}]+)}/g;function Wr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Tv(s)&&Tv(o)){if(!Wr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Tv(n){return n!==null&&typeof n=="object"}function Lh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xv(n,e){let t=new Mh(n,e);return t.subscribe.bind(t)}var Mh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vA(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=kh),i.error===void 0&&(i.error=kh),i.complete===void 0&&(i.complete=kh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vA(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kh(){}var mM=4*60*60*1e3;function wn(n){return n&&n._delegate?n._delegate:n}var ut=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xn="[DEFAULT]";var Fh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new qa;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wA(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_A(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _A(n){return n===Xn?void 0:n}function wA(n){return n.instantiationMode==="EAGER"}var Wa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Fh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var EA=[],K=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(K||{}),IA={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},TA=K.INFO,bA={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},SA=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bA[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},En=class{constructor(e){this.name=e,this._logLevel=TA,this._logHandler=SA,this._userLogHandler=null,EA.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};var AA=(n,e)=>e.some(t=>n instanceof t),Vv,Lv;function CA(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RA(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Fv=new WeakMap,jh=new WeakMap,Uv=new WeakMap,Uh=new WeakMap,$h=new WeakMap;function DA(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ot(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Fv.set(t,n)}).catch(()=>{}),$h.set(e,n),e}function PA(n){if(jh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});jh.set(n,e)}var Bh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Uv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ot(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jv(n){Bh=n(Bh)}function NA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ka(this),e,...t);return Uv.set(r,e.sort?e.sort():[e]),Ot(r)}:RA().includes(n)?function(...e){return n.apply(Ka(this),e),Ot(Fv.get(this))}:function(...e){return Ot(n.apply(Ka(this),e))}}function kA(n){return typeof n=="function"?NA(n):(n instanceof IDBTransaction&&PA(n),AA(n,CA())?new Proxy(n,Bh):n)}function Ot(n){if(n instanceof IDBRequest)return DA(n);if(Uh.has(n))return Uh.get(n);let e=kA(n);return e!==n&&(Uh.set(n,e),$h.set(e,n)),e}var Ka=n=>$h.get(n);function $v(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ot(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ot(o.result),c.oldVersion,c.newVersion,Ot(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var OA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],qh=new Map;function Bv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qh.get(e))return qh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=MA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OA.includes(t)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return qh.set(e,s),s}jv(n=>ae(T({},n),{get:(e,t,r)=>Bv(e,t)||n.get(e,t,r),has:(e,t)=>!!Bv(e,t)||n.has(e,t)}));var Gh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xA(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function xA(n){let e=n.getComponent();return e?.type==="VERSION"}var Wh="@firebase/app",qv="0.10.0";var Zn=new En("@firebase/app"),VA="@firebase/app-compat",LA="@firebase/analytics-compat",FA="@firebase/analytics",UA="@firebase/app-check-compat",jA="@firebase/app-check",BA="@firebase/auth",$A="@firebase/auth-compat",qA="@firebase/database",zA="@firebase/database-compat",GA="@firebase/functions",WA="@firebase/functions-compat",KA="@firebase/installations",HA="@firebase/installations-compat",QA="@firebase/messaging",YA="@firebase/messaging-compat",JA="@firebase/performance",XA="@firebase/performance-compat",ZA="@firebase/remote-config",eC="@firebase/remote-config-compat",tC="@firebase/storage",nC="@firebase/storage-compat",rC="@firebase/firestore",iC="@firebase/firestore-compat",sC="firebase",oC="10.10.0";var Kh="[DEFAULT]",aC={[Wh]:"fire-core",[VA]:"fire-core-compat",[FA]:"fire-analytics",[LA]:"fire-analytics-compat",[jA]:"fire-app-check",[UA]:"fire-app-check-compat",[BA]:"fire-auth",[$A]:"fire-auth-compat",[qA]:"fire-rtdb",[zA]:"fire-rtdb-compat",[GA]:"fire-fn",[WA]:"fire-fn-compat",[KA]:"fire-iid",[HA]:"fire-iid-compat",[QA]:"fire-fcm",[YA]:"fire-fcm-compat",[JA]:"fire-perf",[XA]:"fire-perf-compat",[ZA]:"fire-rc",[eC]:"fire-rc-compat",[tC]:"fire-gcs",[nC]:"fire-gcs-compat",[rC]:"fire-fst",[iC]:"fire-fst-compat","fire-js":"fire-js",[sC]:"fire-js-all"};var Is=new Map,cC=new Map,Hh=new Map;function zv(n,e){try{n.container.addComponent(e)}catch(t){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tn(n){let e=n.name;if(Hh.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;Hh.set(e,n);for(let t of Is.values())zv(t,n);for(let t of cC.values())zv(t,n);return!0}function Xh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kr(n){return n.settings!==void 0}var lC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Ht("app","Firebase",lC);var Qh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}};var Hr=oC;function Zh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Kh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw In.create("bad-app-name",{appName:String(i)});if(t||(t=Vh()),!t)throw In.create("no-options");let s=Is.get(i);if(s){if(Wr(t,s.options)&&Wr(r,s.config))return s;throw In.create("duplicate-app",{appName:i})}let o=new Wa(i);for(let c of Hh.values())o.addComponent(c);let a=new Qh(t,r,o);return Is.set(i,a),a}function bs(n=Kh){let e=Is.get(n);if(!e&&n===Kh&&Vh())return Zh();if(!e)throw In.create("no-app",{appName:n});return e}function Ha(){return Array.from(Is.values())}function Pe(n,e,t){var r;let i=(r=aC[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}Tn(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uC="firebase-heartbeat-database",hC=1,Ts="firebase-heartbeat-store",zh=null;function Hv(){return zh||(zh=$v(uC,hC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ts)}catch(t){console.warn(t)}}}}).catch(n=>{throw In.create("idb-open",{originalErrorMessage:n.message})})),zh}function dC(n){return p(this,null,function*(){try{let t=(yield Hv()).transaction(Ts),r=yield t.objectStore(Ts).get(Qv(n));return yield t.done,r}catch(e){if(e instanceof lt)Zn.warn(e.message);else{let t=In.create("idb-get",{originalErrorMessage:e?.message});Zn.warn(t.message)}}})}function Gv(n,e){return p(this,null,function*(){try{let r=(yield Hv()).transaction(Ts,"readwrite");yield r.objectStore(Ts).put(e,Qv(n)),yield r.done}catch(t){if(t instanceof lt)Zn.warn(t.message);else{let r=In.create("idb-set",{originalErrorMessage:t?.message});Zn.warn(r.message)}}})}function Qv(n){return`${n.name}!${n.options.appId}`}var fC=1024,pC=30*24*60*60*1e3,Yh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Jh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=pC}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Wv(),{heartbeatsToSend:r,unsentEntries:i}=mC(this._heartbeatsCache.heartbeats),s=Es(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Wv(){return new Date().toISOString().substring(0,10)}function mC(n,e=fC){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Kv(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Kv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Jh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Ga()?Mv().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield dC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Kv(n){return Es(JSON.stringify({version:2,heartbeats:n})).length}function gC(n){Tn(new ut("platform-logger",e=>new Gh(e),"PRIVATE")),Tn(new ut("heartbeat",e=>new Yh(e),"PRIVATE")),Pe(Wh,qv,n),Pe(Wh,qv,"esm2017"),Pe("fire-js","")}gC("");var yC="firebase",vC="10.10.0";Pe(yC,vC,"app");var Yr=new Mi("ANGULARFIRE2_VERSION");function td(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var As=(n,e)=>{let t=e?[e]:Ha(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ss=class{constructor(){return As(_C)}},_C="app-check";function Qr(){}var Qa=class{zone;delegate;constructor(e,t=Tm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},ed=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qr,{},Qr,Qr)),t.pipe(fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Cs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Qa(Zone.current)),this.insideAngular=t.run(()=>new Qa(Zone.current,Im)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(C(ye))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ya(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function wC(n){return Ya().ngZone.runOutsideAngular(()=>n())}function er(n){return Ya().ngZone.run(()=>n())}function EC(n){return IC(Ya())(n)}function IC(n){return function(t){return t=t.lift(new ed(n.ngZone)),t.pipe(Nl(n.outsideAngular),Pl(n.insideAngular))}}var TC=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),er(()=>n.apply(void 0,r))},tr=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qr,{},Qr,Qr))),r[s]=TC(r[s],t));let i=wC(()=>n.apply(this,r));if(!e)if(i instanceof On){let s=Ya();return i.pipe(Nl(s.outsideAngular),Pl(s.insideAngular))}else return er(()=>i);return i instanceof On?i.pipe(EC):i instanceof Promise?er(()=>new Promise((s,o)=>i.then(a=>er(()=>s(a)),a=>er(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:er(()=>i)};var nr=class{constructor(e){return e}},Rs=class{constructor(){return Ha()}};function bC(n){return n&&n.length===1?n[0]:new nr(bs())}var nd=new j("angularfire2._apps"),SC={provide:nr,useFactory:bC,deps:[[new gt,nd]]},AC={provide:Rs,deps:[[new gt,nd]]};function CC(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nr(r)}}var RC=(()=>{class n{constructor(t){Pe("angularfire",Yr.full,"core"),Pe("angularfire",Yr.full,"app"),Pe("angular",eg.full,t.toString())}static \u0275fac=function(r){return new(r||n)(C(Gt))};static \u0275mod=ge({type:n});static \u0275inj=me({providers:[SC,AC]})}return n})();function Yv(n,...e){return{ngModule:RC,providers:[{provide:nd,useFactory:CC(n),multi:!0,deps:[ye,zt,Cs,...e]}]}}var Jv=tr(Zh,!0);function s_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var o_=s_,a_=new Ht("auth","Firebase",s_());var ec=new En("@firebase/auth");function PC(n,...e){ec.logLevel<=K.WARN&&ec.warn(`Auth (${Hr}): ${n}`,...e)}function Xa(n,...e){ec.logLevel<=K.ERROR&&ec.error(`Auth (${Hr}): ${n}`,...e)}function Xv(n,...e){throw pd(n,...e)}function fd(n,...e){return pd(n,...e)}function c_(n,e,t){let r=Object.assign(Object.assign({},o_()),{[e]:t});return new Ht("auth","Firebase",r).create(e,{appName:n.name})}function Za(n){return c_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pd(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return a_.create(n,...e)}function Z(n,e,...t){if(!n)throw pd(e,...t)}function Ds(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xa(e),new Error(e)}function tc(n,e){n||Ds(e)}function NC(){return Zv()==="http:"||Zv()==="https:"}function Zv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function kC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NC()||Nv()||"connection"in navigator)?navigator.onLine:!0}function OC(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ir=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,tc(t>e,"Short delay should be less than long delay!"),this.isMobile=Pv()||kv()}get(){return kC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function MC(n,e){tc(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var VC=new ir(3e4,6e4);function l_(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function oc(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){return u_(n,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=Lh(Object.assign({key:n.config.apiKey},u)).slice(1),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode),nc.fetch()(h_(n,n.config.apiHost,t,h),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},l))}))})}function u_(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xC),e);try{let i=new sd(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ja(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ja(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ja(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ja(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw c_(n,u,l);Xv(n,u)}}catch(i){if(i instanceof lt)throw i;Xv(n,"network-request-failed",{message:String(i)})}})}function h_(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?MC(n.config,i):`${n.config.apiScheme}://${i}`}var sd=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fd(this.auth,"network-request-failed")),VC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ja(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=fd(n,e,r);return i.customData._tokenResponse=t,i}function LC(n,e){return p(this,null,function*(){return oc(n,"POST","/v1/accounts:delete",e)})}function d_(n,e){return p(this,null,function*(){return oc(n,"POST","/v1/accounts:lookup",e)})}function Ps(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function md(n,e=!1){return p(this,null,function*(){let t=wn(n),r=yield t.getIdToken(e),i=f_(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ps(rd(i.auth_time)),issuedAtTime:Ps(rd(i.iat)),expirationTime:Ps(rd(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function rd(n){return Number(n)*1e3}function f_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xa("JWT malformed, contained fewer than 3 sections"),null;try{let i=xh(t);return i?JSON.parse(i):(Xa("Failed to decode base64 JWT payload"),null)}catch(i){return Xa("Caught error parsing JWT payload as JSON",i?.toString()),null}}function e_(n){let e=f_(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function od(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof lt&&FC(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function FC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ad=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ks=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ps(this.lastLoginAt),this.creationTime=Ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rc(n){return p(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield od(n,d_(t,{idToken:r}));Z(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?p_(s.providerUserInfo):[],a=UC(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ks(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function gd(n){return p(this,null,function*(){let e=wn(n);yield rc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function UC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function p_(n){return n.map(e=>{var{providerId:t}=e,r=Dl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function jC(n,e){return p(this,null,function*(){let t=yield u_(n,{},()=>p(this,null,function*(){let r=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=h_(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function BC(n,e){return p(this,null,function*(){return oc(n,"POST","/v2/accounts:revokeToken",l_(n,e))})}var Ns=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=e_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield jC(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ds("not implemented")}};function bn(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Os=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Dl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ad(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ks(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield od(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return md(this,e)}reload(){return gd(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield rc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Kr(this.auth.app))return Promise.reject(Za(this.auth));let e=yield this.getIdToken();return yield od(this,LC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,m=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,w=(l=t.createdAt)!==null&&l!==void 0?l:void 0,O=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:W,emailVerified:N,isAnonymous:he,providerData:X,stsTokenManager:re}=t;Z(W&&re,e,"internal-error");let de=Ns.fromJSON(this.name,re);Z(typeof W=="string",e,"internal-error"),bn(h,e.name),bn(d,e.name),Z(typeof N=="boolean",e,"internal-error"),Z(typeof he=="boolean",e,"internal-error"),bn(f,e.name),bn(g,e.name),bn(v,e.name),bn(m,e.name),bn(w,e.name),bn(O,e.name);let He=new n({uid:W,auth:e,email:d,emailVerified:N,displayName:h,isAnonymous:he,photoURL:g,phoneNumber:f,tenantId:v,stsTokenManager:de,createdAt:w,lastLoginAt:O});return X&&Array.isArray(X)&&(He.providerData=X.map(ft=>Object.assign({},ft))),m&&(He._redirectEventId=m),He}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){let i=new Ns;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rc(s),s})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?p_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ns;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ks(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var t_=new Map;function rr(n){tc(n instanceof Function,"Expected a class definition");let e=t_.get(n);return e?(tc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t_.set(n,e),e)}var $C=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,r){return p(this,null,function*(){this.storage[t]=r})}_get(t){return p(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),cd=$C;function id(n,e,t){return`firebase:${n}:${e}:${t}`}var ic=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=id(this.userKey,i.apiKey,s),this.fullPersistenceKey=id("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Os._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new n(rr(cd),e,r);let i=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||rr(cd),o=id(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let h=Os._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function n_(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HC(e))return"Blackberry";if(QC(e))return"Webos";if(zC(e))return"Safari";if((e.includes("chrome/")||GC(e))&&!e.includes("edge/"))return"Chrome";if(KC(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function qC(n=Ue()){return/firefox\//i.test(n)}function zC(n=Ue()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GC(n=Ue()){return/crios\//i.test(n)}function WC(n=Ue()){return/iemobile/i.test(n)}function KC(n=Ue()){return/android/i.test(n)}function HC(n=Ue()){return/blackberry/i.test(n)}function QC(n=Ue()){return/webos/i.test(n)}function m_(n,e=[]){let t;switch(n){case"Browser":t=n_(Ue());break;case"Worker":t=`${n_(Ue())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hr}/${r}`}var ld=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function YC(t){return p(this,arguments,function*(n,e={}){return oc(n,"GET","/v2/passwordPolicy",l_(n,e))})}var JC=6,ud=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:JC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var hd=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sc(this),this.idTokenSubscription=new sc(this),this.beforeStateQueue=new ld(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ic.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield d_(this,{idToken:e}),r=yield Os._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(Kr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield rc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=OC()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Kr(this.app))return Promise.reject(Za(this));let t=e?wn(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Kr(this.app)?Promise.reject(Za(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Kr(this.app)?Promise.reject(Za(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield YC(this),t=new ud(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ht("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield BC(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&rr(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield ic.create(this,[rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return p(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&PC(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function XC(n){return wn(n)}var sc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xv(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ZC={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eR(n){ZC=n}function tR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function nR(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(rr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var ux=tR("rcb"),hx=new ir(3e4,6e4);var dx=new ir(2e3,1e4);var fx=10*60*1e3;var px=new ir(3e4,6e4);var mx=new ir(5e3,15e3);var gx=encodeURIComponent("fac");var r_="@firebase/auth",i_="1.7.0";var dd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function rR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iR(n){Tn(new ut("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m_(n)},l=new hd(r,i,s,c);return nR(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new ut("auth-internal",e=>{let t=XC(e.getProvider("auth").getImmediate());return(r=>new dd(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(r_,i_,rR(n)),Pe(r_,i_,"esm2017")}var sR=5*60,yx=Rv("authIdTokenMaxAge")||sR;function oR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eR({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=fd("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",oR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iR("Browser");var sD="auth";var ac=class{constructor(){return As(sD)}};var oD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wt={},E,Fd=Fd||{},V=oD||self;function Ec(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Ks(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function aD(n){return Object.prototype.hasOwnProperty.call(n,yd)&&n[yd]||(n[yd]=++cD)}var yd="closure_uid_"+(1e9*Math.random()>>>0),cD=0;function lD(n,e,t){return n.call.apply(n.bind,arguments)}function uD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function je(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?je=lD:je=uD,je.apply(null,arguments)}function cc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ke(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Sn(){this.s=this.s,this.o=this.o}var hD=0;Sn.prototype.s=!1;Sn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),hD!=0)&&aD(this)};Sn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var R_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ud(n){let e=n.length;if(0<e){let t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function g_(n,e){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(Ec(r)){let i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Be(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var dD=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let t=()=>{};V.addEventListener("test",t,e),V.removeEventListener("test",t,e)}catch{}return n}();function Us(n){return/^[\s\xa0]*$/.test(n)}function Ic(){var n=V.navigator;return n&&(n=n.userAgent)?n:""}function Mt(n){return Ic().indexOf(n)!=-1}function jd(n){return jd[" "](n),n}jd[" "]=function(){};function fD(n,e){var t=tP;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var pD=Mt("Opera"),ei=Mt("Trident")||Mt("MSIE"),D_=Mt("Edge"),Id=D_||ei,P_=Mt("Gecko")&&!(Ic().toLowerCase().indexOf("webkit")!=-1&&!Mt("Edge"))&&!(Mt("Trident")||Mt("MSIE"))&&!Mt("Edge"),mD=Ic().toLowerCase().indexOf("webkit")!=-1&&!Mt("Edge");function N_(){var n=V.document;return n?n.documentMode:void 0}var Td;e:{if(lc="",uc=function(){var n=Ic();if(P_)return/rv:([^\);]+)(\)|;)/.exec(n);if(D_)return/Edge\/([\d\.]+)/.exec(n);if(ei)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(mD)return/WebKit\/(\S+)/.exec(n);if(pD)return/(?:Version)[ \/]?(\S+)/.exec(n)}(),uc&&(lc=uc?uc[1]:""),ei&&(hc=N_(),hc!=null&&hc>parseFloat(lc))){Td=String(hc);break e}Td=lc}var lc,uc,hc,bd;V.document&&ei?(vd=N_(),bd=vd||parseInt(Td,10)||void 0):bd=void 0;var vd,gD=bd;function js(n,e){if(Be.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(P_){e:{try{jd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:yD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&js.$.h.call(this)}}ke(js,Be);var yD={2:"touch",3:"pen",4:"mouse"};js.prototype.h=function(){js.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hs="closure_listenable_"+(1e6*Math.random()|0),vD=0;function _D(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++vD,this.fa=this.ia=!1}function Tc(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Bd(n,e,t){for(let r in n)e.call(t,n[r],r,n)}function wD(n,e){for(let t in n)e.call(void 0,n[t],t,n)}function k_(n){let e={};for(let t in n)e[t]=n[t];return e}var y_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O_(n,e){let t,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(t in r)n[t]=r[t];for(let s=0;s<y_.length;s++)t=y_[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bc(n){this.src=n,this.g={},this.h=0}bc.prototype.add=function(n,e,t,r,i){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=Ad(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new _D(e,this.src,s,!!r,i),e.ia=t,n.push(e)),e};function Sd(n,e){var t=e.type;if(t in n.g){var r=n.g[t],i=R_(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Tc(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Ad(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}var $d="closure_lm_"+(1e6*Math.random()|0),_d={};function M_(n,e,t,r,i){if(r&&r.once)return V_(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)M_(n,e[s],t,r,i);return null}return t=Gd(t),n&&n[Hs]?n.O(e,t,Ks(r)?!!r.capture:!!r,i):x_(n,e,t,!1,r,i)}function x_(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Ks(i)?!!i.capture:!!i,a=zd(n);if(a||(n[$d]=a=new bc(n)),t=a.add(e,t,r,o,s),t.proxy)return t;if(r=ED(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dD||(i=o),i===void 0&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(F_(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function ED(){function n(t){return e.call(n.src,n.listener,t)}let e=ID;return n}function V_(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)V_(n,e[s],t,r,i);return null}return t=Gd(t),n&&n[Hs]?n.P(e,t,Ks(r)?!!r.capture:!!r,i):x_(n,e,t,!0,r,i)}function L_(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)L_(n,e[s],t,r,i);else r=Ks(r)?!!r.capture:!!r,t=Gd(t),n&&n[Hs]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=Ad(s,t,r,i),-1<t&&(Tc(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=zd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ad(e,t,r,i)),(t=-1<n?e[n]:null)&&qd(t))}function qd(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Hs])Sd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(F_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zd(e))?(Sd(t,n),t.h==0&&(t.src=null,e[$d]=null)):Tc(n)}}}function F_(n){return n in _d?_d[n]:_d[n]="on"+n}function ID(n,e){if(n.fa)n=!0;else{e=new js(e,this);var t=n.listener,r=n.la||n.src;n.ia&&qd(n),n=t.call(r,e)}return n}function zd(n){return n=n[$d],n instanceof bc?n:null}var wd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gd(n){return typeof n=="function"?n:(n[wd]||(n[wd]=function(e){return n.handleEvent(e)}),n[wd])}function Ne(){Sn.call(this),this.i=new bc(this),this.S=this,this.J=null}ke(Ne,Sn);Ne.prototype[Hs]=!0;Ne.prototype.removeEventListener=function(n,e,t,r){L_(this,n,e,t,r)};function xe(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new Be(e,n);else if(e instanceof Be)e.target=e.target||n;else{var i=e;e=new Be(r,n),O_(e,i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=dc(o,r,!0,e)&&i}if(o=e.g=n,i=dc(o,r,!0,e)&&i,i=dc(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)o=e.g=t[s],i=dc(o,r,!1,e)&&i}Ne.prototype.N=function(){if(Ne.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Tc(t[r]);delete n.g[e],n.h--}}this.J=null};Ne.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};Ne.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function dc(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&Sd(n.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Wd=V.JSON.stringify,Cd=class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function TD(){var n=Kd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rd=class{constructor(){this.h=this.g=null}add(e,t){let r=U_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},U_=new Cd(()=>new Dd,n=>n.reset()),Dd=class{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}};function bD(n){var e=1;n=n.split(":");let t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function SD(n){V.setTimeout(()=>{throw n},0)}var Bs,$s=!1,Kd=new Rd,j_=()=>{let n=V.Promise.resolve(void 0);Bs=()=>{n.then(AD)}},AD=()=>{for(var n;n=TD();){try{n.h.call(n.g)}catch(t){SD(t)}var e=U_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$s=!1};function Sc(n,e){Ne.call(this),this.h=n||1,this.g=e||V,this.j=je(this.qb,this),this.l=Date.now()}ke(Sc,Ne);E=Sc.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xe(this,"tick"),this.ga&&(Hd(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Hd(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}E.N=function(){Sc.$.N.call(this),Hd(this),delete this.g};function Qd(n,e,t){if(typeof n=="function")t&&(n=je(n,t));else if(n&&typeof n.handleEvent=="function")n=je(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(n,e||0)}function B_(n){n.g=Qd(()=>{n.g=null,n.i&&(n.i=!1,B_(n))},n.j);let e=n.h;n.h=null,n.m.apply(null,e)}var Pd=class extends Sn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:B_(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function qs(n){Sn.call(this),this.h=n,this.g={}}ke(qs,Sn);var v_=[];function $_(n,e,t,r){Array.isArray(t)||(t&&(v_[0]=t.toString()),t=v_);for(var i=0;i<t.length;i++){var s=M_(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function q_(n){Bd(n.g,function(e,t){this.g.hasOwnProperty(t)&&qd(e)},n),n.g={}}qs.prototype.N=function(){qs.$.N.call(this),q_(this)};qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ac(){this.g=!0}Ac.prototype.Ea=function(){this.g=!1};function CD(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+t+`
`+o})}function RD(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+t+`
`+s+" "+o})}function Xr(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+PD(n,t)+(r?" "+r:"")})}function DD(n,e){n.info(function(){return"TIMEOUT: "+e})}Ac.prototype.info=function(){};function PD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Wd(t)}catch{return e}}var cr={},__=null;function Cc(){return __=__||new Ne}cr.Ta="serverreachability";function z_(n){Be.call(this,cr.Ta,n)}ke(z_,Be);function zs(n){let e=Cc();xe(e,new z_(e))}cr.STAT_EVENT="statevent";function G_(n,e){Be.call(this,cr.STAT_EVENT,n),this.stat=e}ke(G_,Be);function Ge(n){let e=Cc();xe(e,new G_(e,n))}cr.Ua="timingevent";function W_(n,e){Be.call(this,cr.Ua,n),this.size=e}ke(W_,Be);function Qs(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){n()},e)}var Rc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},K_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yd(){}Yd.prototype.h=null;function w_(n){return n.h||(n.h=n.i())}function H_(){}var Ys={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jd(){Be.call(this,"d")}ke(Jd,Be);function Xd(){Be.call(this,"c")}ke(Xd,Be);var Nd;function Dc(){}ke(Dc,Yd);Dc.prototype.g=function(){return new XMLHttpRequest};Dc.prototype.i=function(){return{}};Nd=new Dc;function Js(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new qs(this),this.P=ND,n=Id?125:void 0,this.V=new Sc(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Q_}function Q_(){this.i=null,this.g="",this.h=!1}var ND=45e3,Y_={},kd={};E=Js.prototype;E.setTimeout=function(n){this.P=n};function Od(n,e,t){n.L=1,n.A=Nc(Yt(e)),n.u=t,n.S=!0,J_(n,null)}function J_(n,e){n.G=Date.now(),Xs(n),n.B=Yt(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),sw(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Q_,n.g=Aw(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Pd(je(n.Pa,n,n.g),n.O)),$_(n.U,n.g,"readystatechange",n.nb),e=n.I?k_(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),zs(),CD(n.j,n.v,n.B,n.m,n.W,n.u)}E.nb=function(n){n=n.target;let e=this.M;e&&xt(n)==3?e.l():this.Pa(n)};E.Pa=function(n){try{if(n==this.g)e:{let u=xt(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>u)&&(u!=3||Id||this.g&&(this.h.h||this.g.ja()||b_(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?zs(3):zs(2)),Pc(this);var t=this.g.da();this.ca=t;t:if(X_(this)){var r=b_(this.g);n="";var i=r.length,s=xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),Fs(this);var o="";break t}this.h.i=new V.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,RD(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Us(a)){var l=a;break t}}l=null}if(t=l)Xr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Md(this,t);else{this.i=!1,this.s=3,Ge(12),sr(this),Fs(this);break e}}this.S?(Z_(this,u,o),Id&&this.i&&u==3&&($_(this.U,this.V,"tick",this.mb),this.V.start())):(Xr(this.j,this.m,o,null),Md(this,o)),u==4&&sr(this),this.i&&!this.J&&(u==4?Iw(this.l,this):(this.i=!1,Xs(this)))}else XD(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),sr(this),Fs(this)}}}catch{}finally{}};function X_(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function Z_(n,e,t){let r=!0,i;for(;!n.J&&n.o<t.length;)if(i=kD(n,t),i==kd){e==4&&(n.s=4,Ge(14),r=!1),Xr(n.j,n.m,null,"[Incomplete Response]");break}else if(i==Y_){n.s=4,Ge(15),Xr(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else Xr(n.j,n.m,i,null),Md(n,i);X_(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,Ge(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),sf(e),e.M=!0,Ge(11))):(Xr(n.j,n.m,t,"[Invalid Chunked Response]"),sr(n),Fs(n))}E.mb=function(){if(this.g){var n=xt(this.g),e=this.g.ja();this.o<e.length&&(Pc(this),Z_(this,n,e),this.i&&n!=4&&Xs(this))}};function kD(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?kd:(t=Number(e.substring(t,r)),isNaN(t)?Y_:(r+=1,r+t>e.length?kd:(e=e.slice(r,r+t),n.o=r+t,e)))}E.cancel=function(){this.J=!0,sr(this)};function Xs(n){n.Y=Date.now()+n.P,ew(n,n.P)}function ew(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Qs(je(n.lb,n),e)}function Pc(n){n.C&&(V.clearTimeout(n.C),n.C=null)}E.lb=function(){this.C=null;let n=Date.now();0<=n-this.Y?(DD(this.j,this.B),this.L!=2&&(zs(),Ge(17)),sr(this),this.s=2,Fs(this)):ew(this,this.Y-n)};function Fs(n){n.l.H==0||n.J||Iw(n.l,n)}function sr(n){Pc(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,Hd(n.V),q_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Md(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||xd(t.i,n))){if(!n.K&&xd(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)yc(t),Mc(t);else break e;rf(t),Ge(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&t.A==0&&!t.v&&(t.v=Qs(je(t.ib,t),6e3));if(1>=cw(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else or(t,11)}else if((n.K||t.g==n)&&yc(t),!Us(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.V=l[0],l=l[1],t.H==2)if(l[0]=="c"){t.K=l[1],t.pa=l[2];let u=l[3];u!=null&&(t.ra=u,t.l.info("VER="+t.ra));let h=l[4];h!=null&&(t.Ga=h,t.l.info("SVER="+t.Ga));let d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;let f=n.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Zd(s,s.h),s.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,ie(r.I,r.F,v))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var o=n;if(r.wa=Sw(r,r.J?r.pa:null,r.Y),o.K){lw(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Pc(a),Xs(a)),r.g=o}else ww(r);0<t.j.length&&xc(t)}else l[0]!="stop"&&l[0]!="close"||or(t,7);else t.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?or(t,7):nf(t):l[0]!="noop"&&t.h&&t.h.Aa(l),t.A=0)}}zs(4)}catch{}}function OD(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Ec(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function MD(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ec(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(let r in n)e[t++]=r;return e}}}function tw(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Ec(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=MD(n),r=OD(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}var nw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ar(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ar){this.h=n.h,mc(this,n.j),this.s=n.s,this.g=n.g,gc(this,n.m),this.l=n.l;var e=n.i,t=new Gs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),E_(this,t),this.o=n.o}else n&&(e=String(n).match(nw))?(this.h=!1,mc(this,e[1]||"",!0),this.s=Vs(e[2]||""),this.g=Vs(e[3]||"",!0),gc(this,e[4]),this.l=Vs(e[5]||"",!0),E_(this,e[6]||"",!0),this.o=Vs(e[7]||"")):(this.h=!1,this.i=new Gs(null,this.h))}ar.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ls(e,I_,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Ls(e,I_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Ls(t,t.charAt(0)=="/"?FD:LD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ls(t,jD)),n.join("")};function Yt(n){return new ar(n)}function mc(n,e,t){n.j=t?Vs(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function E_(n,e,t){e instanceof Gs?(n.i=e,BD(n.i,n.h)):(t||(e=Ls(e,UD)),n.i=new Gs(e,n.h))}function ie(n,e,t){n.i.set(e,t)}function Nc(n){return ie(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vs(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ls(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,VD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function VD(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var I_=/[#\/\?@]/g,LD=/[#\?:]/g,FD=/[#\?]/g,UD=/[#\?@]/g,jD=/#/g;function Gs(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function An(n){n.g||(n.g=new Map,n.h=0,n.i&&xD(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}E=Gs.prototype;E.add=function(n,e){An(this),this.i=null,n=ti(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function rw(n,e){An(n),e=ti(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iw(n,e){return An(n),e=ti(n,e),n.g.has(e)}E.forEach=function(n,e){An(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)};E.ta=function(){An(this);let n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){let i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t};E.Z=function(n){An(this);let e=[];if(typeof n=="string")iw(this,n)&&(e=e.concat(this.g.get(ti(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};E.set=function(n,e){return An(this),this.i=null,n=ti(this,n),iw(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};E.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function sw(n,e,t){rw(n,e),0<t.length&&(n.i=null,n.g.set(ti(n,e),Ud(t)),n.h+=t.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};function ti(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function BD(n,e){e&&!n.j&&(An(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rw(this,r),sw(this,i,t))},n)),n.j=e}var $D=class{constructor(n,e){this.g=n,this.map=e}};function ow(n){this.l=n||qD,V.PerformanceNavigationTiming?(n=V.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(V.g&&V.g.Ka&&V.g.Ka()&&V.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qD=10;function aw(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function cw(n){return n.h?1:n.g?n.g.size:0}function xd(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Zd(n,e){n.g?n.g.add(e):n.h=e}function lw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}ow.prototype.cancel=function(){if(this.i=uw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function uw(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(let t of n.g.values())e=e.concat(t.F);return e}return Ud(n.i)}var zD=class{stringify(n){return V.JSON.stringify(n,void 0)}parse(n){return V.JSON.parse(n,void 0)}};function GD(){this.g=new zD}function WD(n,e,t){let r=t||"";try{tw(n,function(i,s){let o=i;Ks(i)&&(o=Wd(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function KD(n,e){let t=new Ac;if(V.Image){let r=new Image;r.onload=cc(fc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cc(fc,t,r,"TestLoadImage: error",!1,e),r.onabort=cc(fc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cc(fc,t,r,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function fc(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zs(n){this.l=n.ec||null,this.j=n.ob||!1}ke(Zs,Yd);Zs.prototype.g=function(){return new kc(this.l,this.j)};Zs.prototype.i=function(n){return function(){return n}}({});function kc(n,e){Ne.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ef,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ke(kc,Ne);var ef=0;E=kc.prototype;E.open=function(n,e){if(this.readyState!=ef)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ws(this)};E.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||V).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=ef};E.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function hw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}E.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?eo(this):Ws(this),this.readyState==3&&hw(this)}};E.Za=function(n){this.g&&(this.response=this.responseText=n,eo(this))};E.Ya=function(n){this.g&&(this.response=n,eo(this))};E.ka=function(){this.g&&eo(this)};function eo(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ws(n)}E.setRequestHeader=function(n,e){this.v.append(n,e)};E.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Ws(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var HD=V.JSON.parse;function le(n){Ne.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dw,this.L=this.M=!1}ke(le,Ne);var dw="",QD=/^https?$/i,YD=["POST","PUT"];E=le.prototype;E.Oa=function(n){this.M=n};E.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nd.g(),this.C=this.u?w_(this.u):w_(Nd),this.g.onreadystatechange=je(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){T_(this,s);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())t.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),i=V.FormData&&n instanceof V.FormData,!(0<=R_(YD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mw(this),0<this.B&&((this.L=JD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=je(this.ua,this)):this.A=Qd(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){T_(this,s)}};function JD(n){return ei&&typeof n.timeout=="number"&&n.ontimeout!==void 0}E.ua=function(){typeof Fd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xe(this,"timeout"),this.abort(8))};function T_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fw(n),Oc(n)}function fw(n){n.F||(n.F=!0,xe(n,"complete"),xe(n,"error"))}E.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xe(this,"complete"),xe(this,"abort"),Oc(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oc(this,!0)),le.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?pw(this):this.kb())};E.kb=function(){pw(this)};function pw(n){if(n.h&&typeof Fd<"u"&&(!n.C[1]||xt(n)!=4||n.da()!=2)){if(n.v&&xt(n)==4)Qd(n.La,0,n);else if(xe(n,"readystatechange"),xt(n)==4){n.h=!1;try{let o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=o===0){var i=String(n.I).match(nw)[1]||null;!i&&V.self&&V.self.location&&(i=V.self.location.protocol.slice(0,-1)),r=!QD.test(i?i.toLowerCase():"")}t=r}if(t)xe(n,"complete"),xe(n,"success");else{n.m=6;try{var s=2<xt(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",fw(n)}}finally{Oc(n)}}}}function Oc(n,e){if(n.g){mw(n);let t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||xe(n,"ready");try{t.onreadystatechange=r}catch{}}}function mw(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(V.clearTimeout(n.A),n.A=null)}E.isActive=function(){return!!this.g};function xt(n){return n.g?n.g.readyState:0}E.da=function(){try{return 2<xt(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),HD(e)}};function b_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case dw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function XD(n){let e={};n=(n.g&&2<=xt(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(Us(n[r]))continue;var t=bD(n[r]);let i=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();let s=e[i]||[];e[i]=s,s.push(t)}wD(e,function(r){return r.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gw(n){let e="";return Bd(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function tf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=gw(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):ie(n,e,t))}function Ms(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yw(n){this.Ga=0,this.j=[],this.l=new Ac,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ms("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ms("baseRetryDelayMs",5e3,n),this.hb=Ms("retryDelaySeedMs",1e4,n),this.eb=Ms("forwardChannelMaxRetries",2,n),this.xa=Ms("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ow(n&&n.concurrentRequestLimit),this.Ja=new GD,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=yw.prototype;E.ra=8;E.H=1;function nf(n){if(vw(n),n.H==3){var e=n.W++,t=Yt(n.I);if(ie(t,"SID",n.K),ie(t,"RID",e),ie(t,"TYPE","terminate"),to(n,t),e=new Js(n,n.l,e),e.L=2,e.A=Nc(Yt(t)),t=!1,V.navigator&&V.navigator.sendBeacon)try{t=V.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&V.Image&&(new Image().src=e.A,t=!0),t||(e.g=Aw(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Xs(e)}bw(n)}function Mc(n){n.g&&(sf(n),n.g.cancel(),n.g=null)}function vw(n){Mc(n),n.u&&(V.clearTimeout(n.u),n.u=null),yc(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&V.clearTimeout(n.m),n.m=null)}function xc(n){if(!aw(n.i)&&!n.m){n.m=!0;var e=n.Na;Bs||j_(),$s||(Bs(),$s=!0),Kd.add(e,n),n.C=0}}function ZD(n,e){return cw(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Qs(je(n.Na,n,e),Tw(n,n.C)),n.C++,!0)}E.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;let i=new Js(this,this.l,n),s=this.s;if(this.U&&(s?(s=k_(s),O_(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_w(this,i,e),t=Yt(this.I),ie(t,"RID",n),ie(t,"CVER",22),this.F&&ie(t,"X-HTTP-Session-Id",this.F),to(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(gw(s)))+"&"+e:this.o&&tf(t,this.o,s)),Zd(this.i,i),this.bb&&ie(t,"TYPE","init"),this.P?(ie(t,"$req",e),ie(t,"SID","null"),i.aa=!0,Od(i,t,null)):Od(i,t,e),this.H=2}}else this.H==3&&(n?S_(this,n):this.j.length==0||aw(this.i)||S_(this))};function S_(n,e){var t;e?t=e.m:t=n.W++;let r=Yt(n.I);ie(r,"SID",n.K),ie(r,"RID",t),ie(r,"AID",n.V),to(n,r),n.o&&n.s&&tf(r,n.o,n.s),t=new Js(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=_w(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Zd(n.i,t),Od(t,r,e)}function to(n,e){n.na&&Bd(n.na,function(t,r){ie(e,r,t)}),n.h&&tw({},function(t,r){ie(e,r,t)})}function _w(n,e,t){t=Math.min(n.j.length,t);var r=n.h?je(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){let o=["count="+t];s==-1?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{WD(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function ww(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Bs||j_(),$s||(Bs(),$s=!0),Kd.add(e,n),n.A=0}}function rf(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Qs(je(n.Ma,n),Tw(n,n.A)),n.A++,!0)}E.Ma=function(){if(this.u=null,Ew(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Qs(je(this.jb,this),n)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ge(10),Mc(this),Ew(this))};function sf(n){n.B!=null&&(V.clearTimeout(n.B),n.B=null)}function Ew(n){n.g=new Js(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=Yt(n.wa);ie(e,"RID","rpc"),ie(e,"SID",n.K),ie(e,"AID",n.V),ie(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ie(e,"TO",n.qa),ie(e,"TYPE","xmlhttp"),to(n,e),n.o&&n.s&&tf(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Nc(Yt(e)),t.u=null,t.S=!0,J_(t,n)}E.ib=function(){this.v!=null&&(this.v=null,Mc(this),rf(this),Ge(19))};function yc(n){n.v!=null&&(V.clearTimeout(n.v),n.v=null)}function Iw(n,e){var t=null;if(n.g==e){yc(n),sf(n),n.g=null;var r=2}else if(xd(n.i,e))t=e.F,lw(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;r=Cc(),xe(r,new W_(r,t)),xc(n)}else ww(n);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&ZD(n,e)||r==2&&rf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:or(n,5);break;case 4:or(n,10);break;case 3:or(n,6);break;default:or(n,2)}}}function Tw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function or(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=je(n.pb,n);t||(t=new ar("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||mc(t,"https"),Nc(t)),KD(t.toString(),r)}else Ge(2);n.H=0,n.h&&n.h.za(e),bw(n),vw(n)}E.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ge(2)):(this.l.info("Failed to ping google.com"),Ge(1))};function bw(n){if(n.H=0,n.ma=[],n.h){let e=uw(n.i);(e.length!=0||n.j.length!=0)&&(g_(n.ma,e),g_(n.ma,n.j),n.i.i.length=0,Ud(n.j),n.j.length=0),n.h.ya()}}function Sw(n,e,t){var r=t instanceof ar?Yt(t):new ar(t);if(r.g!="")e&&(r.g=e+"."+r.g),gc(r,r.m);else{var i=V.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ar(null);r&&mc(s,r),e&&(s.g=e),i&&gc(s,i),t&&(s.l=t),r=s}return t=n.F,e=n.Da,t&&e&&ie(r,t,e),ie(r,"VER",n.ra),to(n,r),r}function Aw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new le(new Zs({ob:t})):new le(n.va),e.Oa(n.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function Cw(){}E=Cw.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function vc(){if(ei&&!(10<=Number(gD)))throw Error("Environmental error: no available transport.")}vc.prototype.g=function(n,e){return new tt(n,e)};function tt(n,e){Ne.call(this),this.g=new yw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Us(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Us(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new ni(this)}ke(tt,Ne);tt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ge(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Sw(n,null,n.Y),xc(n)};tt.prototype.close=function(){nf(this.g)};tt.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=Wd(n),n=t);e.j.push(new $D(e.fb++,n)),e.H==3&&xc(e)};tt.prototype.N=function(){this.g.h=null,delete this.j,nf(this.g),delete this.g,tt.$.N.call(this)};function Rw(n){Jd.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(let t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}ke(Rw,Jd);function Dw(){Xd.call(this),this.status=1}ke(Dw,Xd);function ni(n){this.g=n}ke(ni,Cw);ni.prototype.Ba=function(){xe(this.g,"a")};ni.prototype.Aa=function(n){xe(this.g,new Rw(n))};ni.prototype.za=function(n){xe(this.g,new Dw)};ni.prototype.ya=function(){xe(this.g,"b")};function eP(){this.blockSize=-1}function _t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ke(_t,eP);_t.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ed(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],i=n.g[2];var s=n.g[3],o=e+(s^t&(i^s))+r[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[3]+3250441966&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[7]+4249261313&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[11]+2304563134&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[15]+1236535329&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(t^i))+r[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[0]+3921069994&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[4]+3889429448&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[8]+1163531501&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[12]+2368359562&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(t^i^s)+r[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[14]+4259657740&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[10]+3200236656&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[6]+76029189&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[2]+3299628645&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(i^(t|~s))+r[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[5]+4237533241&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[1]+2240044497&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[13]+1309151649&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}_t.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=t;)Ed(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){Ed(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){Ed(this,r),i=0;break}}this.h=i,this.i+=e};_t.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function ne(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=n[i]|0;r&&s==e||(t[i]=s,r=!1)}this.g=t}var tP={};function of(n){return-128<=n&&128>n?fD(n,function(e){return new ne([e|0],0>e?-1:0)}):new ne([n|0],0>n?-1:0)}function Vt(n){if(isNaN(n)||!isFinite(n))return Zr;if(0>n)return Me(Vt(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Vd;return new ne(e,0)}function Pw(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Me(Pw(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Vt(Math.pow(e,8)),r=Zr,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Vt(Math.pow(e,s)),r=r.R(s).add(Vt(o))):(r=r.R(t),r=r.add(Vt(o)))}return r}var Vd=4294967296,Zr=of(0),Ld=of(1),A_=of(16777216);E=ne.prototype;E.ea=function(){if(ht(this))return-Me(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Vd+r)*e,e*=Vd}return n};E.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Qt(this))return"0";if(ht(this))return"-"+Me(this).toString(n);for(var e=Vt(Math.pow(n,6)),t=this,r="";;){var i=wc(t,e).g;t=_c(t,i.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=i,Qt(t))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};E.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Qt(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function ht(n){return n.h==-1}E.X=function(n){return n=_c(this,n),ht(n)?-1:Qt(n)?0:1};function Me(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new ne(t,~n.h).add(Ld)}E.abs=function(){return ht(this)?Me(this):this};E.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(n.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,t[i]=o<<16|s}return new ne(t,t[t.length-1]&-2147483648?-1:0)};function _c(n,e){return n.add(Me(e))}E.R=function(n){if(Qt(this)||Qt(n))return Zr;if(ht(this))return ht(n)?Me(this).R(Me(n)):Me(Me(this).R(n));if(ht(n))return Me(this.R(Me(n)));if(0>this.X(A_)&&0>n.X(A_))return Vt(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=n.D(i)>>>16,c=n.D(i)&65535;t[2*r+2*i]+=o*c,pc(t,2*r+2*i),t[2*r+2*i+1]+=s*c,pc(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,pc(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,pc(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new ne(t,0)};function pc(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function xs(n,e){this.g=n,this.h=e}function wc(n,e){if(Qt(e))throw Error("division by zero");if(Qt(n))return new xs(Zr,Zr);if(ht(n))return e=wc(Me(n),e),new xs(Me(e.g),Me(e.h));if(ht(e))return e=wc(n,Me(e)),new xs(Me(e.g),e.h);if(30<n.g.length){if(ht(n)||ht(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ld,r=e;0>=r.X(n);)t=C_(t),r=C_(r);var i=Jr(t,1),s=Jr(r,1);for(r=Jr(r,2),t=Jr(t,2);!Qt(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Jr(r,1),t=Jr(t,1)}return e=_c(n,i.R(e)),new xs(i,e)}for(i=Zr;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Vt(t),o=s.R(e);ht(o)||0<o.X(n);)t-=r,s=Vt(t),o=s.R(e);Qt(s)&&(s=Ld),i=i.add(s),n=_c(n,o)}return new xs(i,n)}E.gb=function(n){return wc(this,n).h};E.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new ne(t,this.h&n.h)};E.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new ne(t,this.h|n.h)};E.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new ne(t,this.h^n.h)};function C_(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new ne(t,n.h)}function Jr(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new ne(i,n.h)}vc.prototype.createWebChannel=vc.prototype.g;tt.prototype.send=tt.prototype.u;tt.prototype.open=tt.prototype.m;tt.prototype.close=tt.prototype.close;Rc.NO_ERROR=0;Rc.TIMEOUT=8;Rc.HTTP_ERROR=6;K_.COMPLETE="complete";H_.EventType=Ys;Ys.OPEN="a";Ys.CLOSE="b";Ys.ERROR="c";Ys.MESSAGE="d";Ne.prototype.listen=Ne.prototype.O;le.prototype.listenOnce=le.prototype.P;le.prototype.getLastError=le.prototype.Sa;le.prototype.getLastErrorCode=le.prototype.Ia;le.prototype.getStatus=le.prototype.da;le.prototype.getResponseJson=le.prototype.Wa;le.prototype.getResponseText=le.prototype.ja;le.prototype.send=le.prototype.ha;le.prototype.setWithCredentials=le.prototype.Oa;_t.prototype.digest=_t.prototype.l;_t.prototype.reset=_t.prototype.reset;_t.prototype.update=_t.prototype.j;ne.prototype.add=ne.prototype.add;ne.prototype.multiply=ne.prototype.R;ne.prototype.modulo=ne.prototype.gb;ne.prototype.compare=ne.prototype.X;ne.prototype.toNumber=ne.prototype.ea;ne.prototype.toString=ne.prototype.toString;ne.prototype.getBits=ne.prototype.D;ne.fromNumber=Vt;ne.fromString=Pw;var Nw=wt.createWebChannelTransport=function(){return new vc},kw=wt.getStatEventTarget=function(){return Cc()},Vc=wt.ErrorCode=Rc,Ow=wt.EventType=K_,Mw=wt.Event=cr,af=wt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},aV=wt.FetchXmlHttpFactory=Zs,no=wt.WebChannel=H_,xw=wt.XhrIo=le,Vw=wt.Md5=_t,lr=wt.Integer=ne;var Lw="@firebase/firestore";var Oe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");var Ti="10.10.0";var gr=new En("@firebase/firestore");function ro(){return gr.logLevel}function I(n,...e){if(gr.logLevel<=K.DEBUG){let t=e.map(qp);gr.debug(`Firestore (${Ti}): ${n}`,...t)}}function jt(n,...e){if(gr.logLevel<=K.ERROR){let t=e.map(qp);gr.error(`Firestore (${Ti}): ${n}`,...t)}}function hi(n,...e){if(gr.logLevel<=K.WARN){let t=e.map(qp);gr.warn(`Firestore (${Ti}): ${n}`,...t)}}function qp(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function L(n="Unexpected state"){let e=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: `+n;throw jt(e),new Error(e)}function Te(n,e){n||L()}function J(n,e){return n}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ff=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Oe.UNAUTHENTICATED))}shutdown(){}},pf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},mf=class{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new Bc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Oe(e)}},gf=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},yf=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new gf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_f=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new vf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nP(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var wf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function te(n,e){return n<e?-1:n>e?1:0}function di(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var dt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new R(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new R(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new R(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var U=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new dt(0,0))}static max(){return new n(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $c=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&L(),r===void 0?r=e.length-t:r>e.length-t&&L(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends $c{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new R(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},rP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class n extends $c{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return rP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new R(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new R(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new R(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new R(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var x=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var Ef=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ef.UNKNOWN_ID=-1;function iP(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=U.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new yr(i,x.empty(),e)}function sP(n){return new yr(n.readTime,n.key,-1)}var yr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(U.min(),x.empty(),-1)}static max(){return new n(U.max(),x.empty(),-1)}};function oP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=x.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}var aP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",If=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zp(n){return p(this,null,function*(){if(n.code!==_.FAILED_PRECONDITION||n.message!==aP)throw n;I("LocalStore","Unexpectedly lost primary lease")})}var y=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Tf=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mr(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Gp(r.target.error);this.V.reject(new mr(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new mr(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Sf(t)}},qc=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ue())===12.2&&jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),ur(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ga())return!1;if(n.C())return!0;let e=Ue(),t=n.S(e),r=0<t&&t<10,i=n.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new mr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new R(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new R(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mr(e,o))},i.onupgradeneeded=s=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return p(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Tf.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),y.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},bf=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ur(this.k.delete())}},mr=class extends R{constructor(e,t){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function To(n){return n.name==="IndexedDbTransactionError"}var Sf=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(I("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ur(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),ur(this.store.add(e))}get(e){return ur(this.store.get(e)).next(t=>(t===void 0&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),ur(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),ur(this.store.count())}W(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.G(i,t)}Z(e){let t=this.cursor({});return new y((r,i)=>{t.onerror=s=>{let o=Gp(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){let r=[];return new y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new bf(a),l=t(a.primaryKey,a.value,c);if(l instanceof y){let u=l.catch(h=>(c.done(),y.reject(h)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>y.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ur(n){return new y((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Gp(r.target.error);t(i)}})}var Fw=!1;function Gp(n){let e=qc.S(Ue());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new R("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fw||(Fw=!0,setTimeout(()=>{throw r},0)),r}}return n}var mE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function pl(n){return n==null}function zc(n){return n===0&&1/n==-1/0}var cP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yV=[...cP,"documentOverlays"],lP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uP=lP,vV=[...uP,"indexConfiguration","indexState","indexEntries"];function Uw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ml(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var pe=class n{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oi(this.root,e,this.comparator,!1)}getReverseIterator(){return new oi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oi(this.root,e,this.comparator,!0)}},oi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ft=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();let e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}};Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class n{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gc(this.data.getIterator())}getIteratorFrom(e){return new Gc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hr=class n{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new n([])}unionWith(e){let t=new qe(Et.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return di(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var We=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};We.EMPTY_BYTE_STRING=new We("");var dP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(n){if(Te(!!n),typeof n=="string"){let e=0,t=dP.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ue(n.seconds),nanos:ue(n.nanos)}}function ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rn(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}function Wp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kp(n){let e=n.mapValue.fields.__previous_value__;return Wp(e)?Kp(e):e}function uo(n){let e=Cn(n.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}var Af=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Kc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wp(n)?4:gE(n)?9007199254740991:10:L()}function Bt(n,e){if(n===e)return!0;let t=vr(n);if(t!==vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uo(n).isEqual(uo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Cn(i.timestampValue),a=Cn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Rn(i.bytesValue).isEqual(Rn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ue(i.geoPointValue.latitude)===ue(s.geoPointValue.latitude)&&ue(i.geoPointValue.longitude)===ue(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ue(i.integerValue)===ue(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ue(i.doubleValue),a=ue(s.doubleValue);return o===a?zc(o)===zc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return di(n.arrayValue.values||[],e.arrayValue.values||[],Bt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Uw(o)!==Uw(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Bt(o[c],a[c])))return!1;return!0}(n,e);default:return L()}}function ho(n,e){return(n.values||[]).find(t=>Bt(t,e))!==void 0}function fi(n,e){if(n===e)return 0;let t=vr(n),r=vr(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ue(s.integerValue||s.doubleValue),c=ue(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jw(n.timestampValue,e.timestampValue);case 4:return jw(uo(n),uo(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Rn(s),c=Rn(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=te(a[l],c[l]);if(u!==0)return u}return te(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=te(ue(s.latitude),ue(o.latitude));return a!==0?a:te(ue(s.longitude),ue(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=fi(a[l],c[l]);if(u)return u}return te(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Lc.mapValue&&o===Lc.mapValue)return 0;if(s===Lc.mapValue)return 1;if(o===Lc.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let d=te(c[h],u[h]);if(d!==0)return d;let f=fi(a[c[h]],l[u[h]]);if(f!==0)return f}return te(c.length,u.length)}(n.mapValue,e.mapValue);default:throw L()}}function jw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);let t=Cn(n),r=Cn(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function pi(n){return Cf(n)}function Cf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Cn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return x.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Cf(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Cf(t.fields[o])}`;return i+"}"}(n.mapValue):L()}function Rf(n){return!!n&&"integerValue"in n}function Hp(n){return!!n&&"arrayValue"in n}function Bw(n){return!!n&&"nullValue"in n}function $w(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cf(n){return!!n&&"mapValue"in n}function so(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ml(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=so(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=so(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(t)}setAll(e){let t=Et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=so(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ml(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(so(this.value))}};var It=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,U.min(),U.min(),U.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,U.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,U.min(),U.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,U.min(),U.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mi=class{constructor(e,t){this.position=e,this.inclusive=t}};function qw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=x.comparator(x.fromName(o.referenceValue),t.key):r=fi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bt(n.position[t],e.position[t]))return!1;return!0}var gi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function fP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Hc=class{},Se=class n extends Hc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Pf(e,t,r):t==="array-contains"?new Of(e,r):t==="in"?new Mf(e,r):t==="not-in"?new xf(e,r):t==="array-contains-any"?new Vf(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Nf(e,r):new kf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fi(t,this.value)):t!==null&&vr(this.value)===vr(t)&&this.matchesComparison(fi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends Hc{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new n(e,t)}matches(e){return yE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function yE(n){return n.op==="and"}function vE(n){return pP(n)&&yE(n)}function pP(n){for(let e of n.filters)if(e instanceof $t)return!1;return!0}function Df(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+pi(n.value);if(vE(n))return n.filters.map(e=>Df(e)).join(",");{let e=n.filters.map(t=>Df(t)).join(",");return`${n.op}(${e})`}}function _E(n,e){return n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&Bt(r.value,i.value)}(n,e):n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_E(o,i.filters[a]),!0):!1}(n,e):void L()}function wE(n){return n instanceof Se?function(t){return`${t.field.canonicalString()} ${t.op} ${pi(t.value)}`}(n):n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(wE).join(" ,")+"}"}(n):"Filter"}var Pf=class extends Se{constructor(e,t,r){super(e,t,r),this.key=x.fromName(r.referenceValue)}matches(e){let t=x.comparator(e.key,this.key);return this.matchesComparison(t)}},Nf=class extends Se{constructor(e,t){super(e,"in",t),this.keys=EE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kf=class extends Se{constructor(e,t){super(e,"not-in",t),this.keys=EE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function EE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>x.fromName(r.referenceValue))}var Of=class extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Hp(t)&&ho(t.arrayValue,this.value)}},Mf=class extends Se{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ho(this.value.arrayValue,t)}},xf=class extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ho(this.value.arrayValue,t)}},Vf=class extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ho(this.value.arrayValue,r))}};var Lf=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Gw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Lf(n,e,t,r,i,s,o)}function Qp(n){let e=J(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Df(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pi(r)).join(",")),e.ce=t}return e.ce}function Yp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_E(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zw(n.startAt,e.startAt)&&zw(n.endAt,e.endAt)}function Ff(n){return x.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var yi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function mP(n,e,t,r,i,s,o,a){return new yi(n,e,t,r,i,s,o,a)}function Jp(n){return new yi(n)}function Ww(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gP(n){return n.collectionGroup!==null}function oo(n){let e=J(n);if(e.le===null){e.le=[];let t=new Set;for(let s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qe(Et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new gi(s,r))}),t.has(Et.keyField().canonicalString())||e.le.push(new gi(Et.keyField(),r))}return e.le}function Ut(n){let e=J(n);return e.he||(e.he=yP(e,oo(n))),e.he}function yP(n,e){if(n.limitType==="F")return Gw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new gi(i.field,s)});let t=n.endAt?new mi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mi(n.startAt.position,n.startAt.inclusive):null;return Gw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Uf(n,e,t){return new yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gl(n,e){return Yp(Ut(n),Ut(e))&&n.limitType===e.limitType}function IE(n){return`${Qp(Ut(n))}|lt:${n.limitType}`}function ri(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>wE(i)).join(", ")}]`),pl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>pi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>pi(i)).join(",")),`Target(${r})`}(Ut(n))}; limitType=${n.limitType})`}function yl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):x.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=qw(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,oo(r),i)||r.endAt&&!function(o,a,c){let l=qw(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,oo(r),i))}(n,e)}function vP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TE(n){return(e,t)=>{let r=!1;for(let i of oo(n)){let s=_P(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _P(n,e,t){let r=n.field.isKeyField()?x.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?fi(c,l):L()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return L()}}var Dn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ml(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hP(this.inner)}size(){return this.innerSize}};var wP=new pe(x.comparator);function Pn(){return wP}var bE=new pe(x.comparator);function io(...n){let e=bE;for(let t of n)e=e.insert(t.key,t);return e}function EP(n){let e=bE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function dr(){return ao()}function SE(){return ao()}function ao(){return new Dn(n=>n.toString(),(n,e)=>n.isEqual(e))}var wV=new pe(x.comparator),IP=new qe(x.comparator);function Y(...n){let e=IP;for(let t of n)e=e.add(t);return e}var TP=new qe(te);function bP(){return TP}function SP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function AP(n){return{integerValue:""+n}}var vi=class{constructor(){this._=void 0}};function CP(n,e,t){return n instanceof fo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wp(s)&&(s=Kp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof _i?AE(n,e):n instanceof wi?CE(n,e):function(i,s){let o=DP(i,s),a=Kw(o)+Kw(i.Ie);return Rf(o)&&Rf(i.Ie)?AP(a):SP(i.serializer,a)}(n,e)}function RP(n,e,t){return n instanceof _i?AE(n,e):n instanceof wi?CE(n,e):t}function DP(n,e){return n instanceof po?function(r){return Rf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var fo=class extends vi{},_i=class extends vi{constructor(e){super(),this.elements=e}};function AE(n,e){let t=RE(e);for(let r of n.elements)t.some(i=>Bt(i,r))||t.push(r);return{arrayValue:{values:t}}}var wi=class extends vi{constructor(e){super(),this.elements=e}};function CE(n,e){let t=RE(e);for(let r of n.elements)t=t.filter(i=>!Bt(i,r));return{arrayValue:{values:t}}}var po=class extends vi{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function Kw(n){return ue(n.integerValue||n.doubleValue)}function RE(n){return Hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function PP(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof _i&&i instanceof _i||r instanceof wi&&i instanceof wi?di(r.elements,i.elements,Bt):r instanceof po&&i instanceof po?Bt(r.Ie,i.Ie):r instanceof fo&&i instanceof fo}(n.transform,e.transform)}var co=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Uc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mo=class{};function DE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jf(n.key,co.none()):new go(n.key,n.data,co.none());{let t=n.data,r=Jt.empty(),i=new qe(Et.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ei(n.key,r,new hr(i.toArray()),co.none())}}function NP(n,e,t){n instanceof go?function(i,s,o){let a=i.value.clone(),c=Qw(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ei?function(i,s,o){if(!Uc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Qw(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(PE(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function lo(n,e,t,r){return n instanceof go?function(s,o,a,c){if(!Uc(s.precondition,o))return a;let l=s.value.clone(),u=Yw(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ei?function(s,o,a,c){if(!Uc(s.precondition,o))return a;let l=Yw(s.fieldTransforms,c,o),u=o.data;return u.setAll(PE(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Uc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&di(r,i,(s,o)=>PP(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var go=class extends mo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ei=class extends mo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function PE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Qw(n,e,t){let r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,RP(o,a,t[i]))}return r}function Yw(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,CP(s,o,e))}return r}var jf=class extends mo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Bf=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&NP(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=lo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=lo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SE();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=DE(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(U.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Y())}isEqual(e){return this.batchId===e.batchId&&di(this.mutations,e.mutations,(t,r)=>Hw(t,r))&&di(this.baseMutations,e.baseMutations,(t,r)=>Hw(t,r))}};var $f=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qf=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var we,H;function NE(n){if(n===void 0)return jt("GRPC error has no .code"),_.UNKNOWN;switch(n){case we.OK:return _.OK;case we.CANCELLED:return _.CANCELLED;case we.UNKNOWN:return _.UNKNOWN;case we.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case we.INTERNAL:return _.INTERNAL;case we.UNAVAILABLE:return _.UNAVAILABLE;case we.UNAUTHENTICATED:return _.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case we.NOT_FOUND:return _.NOT_FOUND;case we.ALREADY_EXISTS:return _.ALREADY_EXISTS;case we.PERMISSION_DENIED:return _.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case we.ABORTED:return _.ABORTED;case we.OUT_OF_RANGE:return _.OUT_OF_RANGE;case we.UNIMPLEMENTED:return _.UNIMPLEMENTED;case we.DATA_LOSS:return _.DATA_LOSS;default:return L()}}(H=we||(we={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var Jw=null;function kP(){return new TextEncoder}var OP=new lr([4294967295,4294967295],0);function Xw(n){let e=kP().encode(n),t=new Vw;return t.update(e),new Uint8Array(t.digest())}function Zw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new lr([t,r],0),new lr([i,s],0)]}var zf=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fr(`Invalid padding: ${t}`);if(r<0)throw new fr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fr(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=lr.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(lr.fromNumber(r)));return i.compare(OP)===1&&(i=new lr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=Xw(e),[r,i]=Zw(t);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let t=Xw(e),[r,i]=Zw(t);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(U.min(),i,new pe(te),Pn(),Y())}},yo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Y(),Y(),Y())}};var ai=class{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}},Yc=class{constructor(e,t){this.targetId=e,this.fe=t}},Jc=class{constructor(e,t,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Xc=class{constructor(){this.ge=0,this.pe=tE(),this.ye=We.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Y(),t=Y(),r=Y();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:L()}}),new yo(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=tE()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Te(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Gf=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Pn(),this.Qe=eE(),this.Ke=new pe(te)}$e(e){for(let t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(let t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:L()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){let s=i.target;if(Ff(s))if(r===0){let o=new x(s.path);this.We(t,o,It.newNoDocument(o,U.min()))}else Te(r===1);else{let o=this.Ze(t);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}Jw?.tt(function(u,h,d,f,g){var v,m,w,O,W,N;let he={localCacheCount:u,existenceFilterCount:h.count,databaseId:d.database,projectId:d.projectId},X=h.unchangedNames;return X&&(he.bloomFilter={applied:g===0,hashCount:(v=X?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(O=(w=(m=X?.bits)===null||m===void 0?void 0:m.bitmap)===null||w===void 0?void 0:w.length)!==null&&O!==void 0?O:0,padding:(N=(W=X?.bits)===null||W===void 0?void 0:W.padding)!==null&&N!==void 0?N:0,mightContain:re=>{var de;return(de=f?.mightContain(re))!==null&&de!==void 0&&de}}),he}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let t=e.fe.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Rn(r).toUint8Array()}catch(c){if(c instanceof Wc)return hi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new zf(o,i,s)}catch(c){return hi(c instanceof fr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){let t=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Ff(a.target)){let c=new x(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,It.newNoDocument(c,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=Y();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Qc(e,t,this.Ke,this.qe,r);return this.qe=Pn(),this.Qe=eE(),this.Ke=new pe(te),i}Ue(e,t){if(!this.je(e))return;let r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Xc,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new qe(te),this.Qe=this.Qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||I("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Xc),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function eE(){return new pe(x.comparator)}function tE(){return new pe(x.comparator)}var MP={asc:"ASCENDING",desc:"DESCENDING"},xP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VP={and:"AND",or:"OR"},Wf=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kf(n,e){return n.useProto3Json||pl(e)?e:{value:e}}function LP(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ci(n){return Te(!!n),U.fromTimestamp(function(t){let r=Cn(t);return new dt(r.seconds,r.nanos)}(n))}function UP(n,e){return Hf(n,e).canonicalString()}function Hf(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kE(n){let e=Ie.fromString(n);return Te(LE(e)),e}function lf(n,e){let t=kE(e);if(t.get(1)!==n.databaseId.projectId)throw new R(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new R(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new x(ME(t))}function OE(n,e){return UP(n.databaseId,e)}function jP(n){let e=kE(n);return e.length===4?Ie.emptyPath():ME(e)}function nE(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ME(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function BP(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:L()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Te(u===void 0||typeof u=="string"),We.fromBase64String(u||"")):(Te(u===void 0||u instanceof Uint8Array),We.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?_.UNKNOWN:NE(l.code);return new R(u,l.message||"")}(o);t=new Jc(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lf(n,r.document.name),s=ci(r.document.updateTime),o=r.document.createTime?ci(r.document.createTime):U.min(),a=new Jt({mapValue:{fields:r.document.fields}}),c=It.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new ai(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lf(n,r.document),s=r.readTime?ci(r.readTime):U.min(),o=It.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ai([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lf(n,r.document),s=r.removedTargetIds||[];t=new ai([],s,i,null)}else{if(!("filter"in e))return L();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qf(i,s),a=r.targetId;t=new Yc(a,o)}}return t}function $P(n,e){return{documents:[OE(n,e.path)]}}function qP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OE(n,i);let s=function(l){if(l.length!==0)return VE($t.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:ii(d.field),direction:WP(d.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Kf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:t,parent:i}}function zP(n){let e=jP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){let d=xE(h);return d instanceof $t&&vE(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(d=>function(g){return new gi(si(g.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(t.orderBy));let a=null;t.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,pl(d)?null:d}(t.limit));let c=null;t.startAt&&(c=function(h){let d=!!h.before,f=h.values||[];return new mi(f,d)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let d=!h.before,f=h.values||[];return new mi(f,d)}(t.endAt)),mP(e,i,o,s,a,"F",c,l)}function GP(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return L()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=si(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=si(t.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=si(t.unaryFilter.field);return Se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=si(t.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(n):n.fieldFilter!==void 0?function(t){return Se.create(si(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $t.create(t.compositeFilter.filters.map(r=>xE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return L()}}(t.compositeFilter.op))}(n):L()}function WP(n){return MP[n]}function KP(n){return xP[n]}function HP(n){return VP[n]}function ii(n){return{fieldPath:n.canonicalString()}}function si(n){return Et.fromServerFormat(n.fieldPath)}function VE(n){return n instanceof Se?function(t){if(t.op==="=="){if($w(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NAN"}};if(Bw(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($w(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NOT_NAN"}};if(Bw(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(t.field),op:KP(t.op),value:t.value}}}(n):n instanceof $t?function(t){let r=t.getFilters().map(i=>VE(i));return r.length===1?r[0]:{compositeFilter:{op:HP(t.op),filters:r}}}(n):L()}function LE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var vo=class n{constructor(e,t,r,i,s=U.min(),o=U.min(),a=We.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qf=class{constructor(e){this.ct=e}};function QP(n){let e=zP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uf(e,e.limit,"L"):e}var Zc=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ue(e.integerValue));else if("doubleValue"in e){let r=ue(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),zc(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Rn(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?gE(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):L()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),x.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Zc.bt=new Zc;var Yf=class{constructor(){this._n=new Jf}addToCollectionParentIndex(e,t){return this._n.add(t),y.resolve()}getCollectionParents(e,t){return y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return y.resolve()}deleteFieldIndex(e,t){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,t){return y.resolve()}getDocumentsMatchingTarget(e,t){return y.resolve(null)}getIndexType(e,t){return y.resolve(0)}getFieldIndexes(e,t){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,t){return y.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return y.resolve(yr.min())}updateCollectionGroup(e,t,r){return y.resolve()}updateIndexEntries(e,t){return y.resolve()}},Jf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qe(Ie.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Ie.comparator)).toArray()}};var EV=new Uint8Array(0);var Lt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var _o=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Xf=class{constructor(){this.changes=new Dn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Zf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ep=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&lo(r.mutation,i,hr.empty(),dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Y()){let i=dr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=io();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=dr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Y()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Pn(),o=ao(),a=function(){return ao()}();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Ei)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),lo(u.mutation,l,u.mutation.getFieldMask(),dt.now())):o.set(l.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new Zf(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ao(),i=new pe((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||hr.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||Y()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=SE();u.forEach(d=>{if(!s.has(d)){let f=DE(t.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return x.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):y.resolve(dr()),a=-1,c=s;return o.next(l=>y.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?y.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Y())).next(u=>({batchId:a,changes:EP(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(r=>{let i=io();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=io();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,c=>{let l=function(h,d){return new yi(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,It.newInvalidDocument(u)))});let a=io();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&lo(u.mutation,l,hr.empty(),dt.now()),yl(t,l)&&(a=a.insert(c,l))}),a})}};var tp=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ci(i.createTime)}}(t)),y.resolve()}getNamedQuery(e,t){return y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:QP(i.bundledQuery),readTime:ci(i.readTime)}}(t)),y.resolve()}};var np=class{constructor(){this.overlays=new pe(x.comparator),this.hr=new Map}getOverlay(e,t){return y.resolve(this.overlays.get(t))}getOverlays(e,t){let r=dr();return y.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),y.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),y.resolve()}getOverlaysForCollection(e,t,r){let i=dr(),s=t.length+1,o=new x(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pe((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=dr(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=dr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return y.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $f(t,r));let s=this.hr.get(t);s===void 0&&(s=Y(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var wo=class{constructor(){this.Pr=new qe(Ee.Ir),this.Tr=new qe(Ee.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Ee(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ee(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new x(new Ie([])),r=new Ee(t,e),i=new Ee(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new x(new Ie([])),r=new Ee(t,e),i=new Ee(t,e+1),s=Y();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ee(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ee=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return x.comparator(e.key,t.key)||te(e.pr,t.pr)}static Er(e,t){return te(e.pr,t.pr)||x.comparator(e.key,t.key)}};var rp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new qe(Ee.Ir)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bf(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Ee(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,t){return y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ee(t,0),i=new Ee(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qe(te);return t.forEach(i=>{let s=new Ee(i,0),o=new Ee(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;x.isDocumentKey(s)||(s=s.child(""));let o=new Ee(new x(s),0),a=new qe(te);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),y.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return y.forEach(t.mutations,i=>{let s=new Ee(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Ee(t,0),i=this.wr.firstAfterOrEqual(r);return y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ip=class{constructor(e){this.vr=e,this.docs=function(){return new pe(x.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return y.resolve(r?r.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let r=Pn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Pn(),o=t.path,a=new x(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||oP(sP(u),r)<=0||(i.has(u.key)||yl(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){L()}Fr(e,t){return y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sp(this)}getSize(e){return y.resolve(this.size)}},sp=class extends Xf{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var op=class{constructor(e){this.persistence=e,this.Mr=new Dn(t=>Qp(t),Yp),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Or=0,this.Nr=new wo,this.targetCount=0,this.Lr=_o.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),y.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,y.resolve()}updateTargetData(e,t){return this.qn(t),y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),y.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return y.resolve(r)}containsKey(e,t){return y.resolve(this.Nr.containsKey(t))}};var ap=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new mE(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new op(this),this.indexManager=new Yf,this.remoteDocumentCache=function(i){return new ip(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Qf(t),this.$r=new tp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new np,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new rp(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){I("MemoryPersistence","Starting transaction:",e);let i=new cp(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},cp=class extends If{constructor(e){super(),this.currentSequenceNumber=e}},lp=class n{constructor(e){this.persistence=e,this.zr=new wo,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw L()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Jr,r=>{let i=x.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,U.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return y.or([()=>y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var up=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Y(),i=Y();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dp=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ov()?8:qc.v(Ue())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hp;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(ro()<=K.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",ri(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),y.resolve()):(ro()<=K.DEBUG&&I("QueryEngine","Query:",ri(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ro()<=K.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",ri(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):y.resolve())}ji(e,t){if(Ww(t))return y.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Uf(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Y(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(t,a);return this.Xi(t,l,o,c.readTime)?this.ji(e,Uf(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return Ww(t)||i.isEqual(U.min())?y.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(t,s);return this.Xi(t,o,r,i)?y.resolve(null):(ro()<=K.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ri(t)),this.es(e,o,t,iP(i,-1)).next(a=>a))})}Zi(e,t){let r=new qe(TE(e));return t.forEach((i,s)=>{yl(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return ro()<=K.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",ri(t)),this.zi.getDocumentsMatchingQuery(e,t,yr.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var fp=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new pe(te),this.rs=new Dn(s=>Qp(s),Yp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ep(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function YP(n,e,t,r){return new fp(n,e,t,r)}function FE(n,e){return p(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Y();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function UE(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function JP(n,e){let t=J(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((u,h)=>{let d=i.get(h);if(!d)return;a.push(t.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(We.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(v,m,w){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,u)&&a.push(t.Qr.updateTargetData(s,f))});let c=Pn(),l=Y();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(XP(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(U.min())){let u=t.Qr.getLastRemoteSnapshotVersion(s).next(h=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ns=i,s))}function XP(n,e,t){let r=Y(),i=Y();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Pn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(U.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function ZP(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function pp(n,e,t){return p(this,null,function*(){let r=J(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!To(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function rE(n,e,t){let r=J(n),i=U.min(),s=Y();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let h=J(c),d=h.rs.get(u);return d!==void 0?y.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(r,o,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:U.min(),t?s:Y())).next(a=>(eN(r,vP(e),a),{documents:a,hs:s})))}function eN(n,e,t){let r=n.ss.get(e)||U.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}var el=class{constructor(){this.activeTargetIds=bP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mp=class{constructor(){this.no=new el,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new el,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gp=class{io(e){}shutdown(){}};var tl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fc=null;function uf(){return Fc===null?Fc=function(){return 268435456+Math.round(2147483648*Math.random())}():Fc++,"0x"+Fc.toString(16)}var tN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yp=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var $e="WebChannelConnection",vp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){let a=uf(),c=this.bo(t,r.toUriEncodedString());I("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(t,c,l,i).then(u=>(I("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw hi("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){let i=tN[t];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){let s=uf();return new Promise((o,a)=>{let c=new xw;c.setWithCredentials(!0),c.listenOnce(Ow.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vc.NO_ERROR:let u=c.getResponseJson();I($e,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Vc.TIMEOUT:I($e,`RPC '${e}' ${s} timed out`),a(new R(_.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:let h=c.getStatus();if(I($e,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);let f=d?.error;if(f&&f.status&&f.message){let g=function(m){let w=m.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(w)>=0?w:_.UNKNOWN}(f.status);a(new R(g,f.message))}else a(new R(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new R(_.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{I($e,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);I($e,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Fo(e,t,r){let i=uf(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nw(),a=kw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");I($e,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=o.createWebChannel(u,c),d=!1,f=!1,g=new yp({lo:m=>{f?I($e,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(d||(I($e,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),I($e,`RPC '${e}' stream ${i} sending:`,m),h.send(m))},ho:()=>h.close()}),v=(m,w,O)=>{m.listen(w,W=>{try{O(W)}catch(N){setTimeout(()=>{throw N},0)}})};return v(h,no.EventType.OPEN,()=>{f||I($e,`RPC '${e}' stream ${i} transport opened.`)}),v(h,no.EventType.CLOSE,()=>{f||(f=!0,I($e,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),v(h,no.EventType.ERROR,m=>{f||(f=!0,hi($e,`RPC '${e}' stream ${i} transport errored:`,m),g.Vo(new R(_.UNAVAILABLE,"The operation could not be completed")))}),v(h,no.EventType.MESSAGE,m=>{var w;if(!f){let O=m.data[0];Te(!!O);let W=O,N=W.error||((w=W[0])===null||w===void 0?void 0:w.error);if(N){I($e,`RPC '${e}' stream ${i} received error:`,N);let he=N.status,X=function(He){let ft=we[He];if(ft!==void 0)return NE(ft)}(he),re=N.message;X===void 0&&(X=_.INTERNAL,re="Unknown error status: "+he+" with message "+N.message),f=!0,g.Vo(new R(X,re)),h.close()}else I($e,`RPC '${e}' stream ${i} received:`,O),g.mo(O)}}),v(a,Mw.STAT_EVENT,m=>{m.stat===af.PROXY?I($e,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===af.NOPROXY&&I($e,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}};function hf(){return typeof document<"u"?document:null}function jE(n){return new Wf(n,!0)}var nl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var _p=class{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new nl(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(jt(t.toString()),jt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(t)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{let i=new R(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){let r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wp=class extends _p{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();let t=BP(this.serializer,e),r=function(s){if(!("targetChange"in s))return U.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?U.min():o.readTime?ci(o.readTime):U.min()}(e);return this.listener.u_(t,r)}c_(e){let t={};t.database=nE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Ff(c)?{documents:$P(s,c)}:{query:qP(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FP(s,o.resumeToken);let l=Kf(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(U.min())>0){a.readTime=LP(s,o.snapshotVersion.toTimestamp());let l=Kf(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=GP(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){let t={};t.database=nE(this.serializer),t.removeTarget=e,this.t_(t)}};var Ep=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new R(_.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Hf(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(_.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Hf(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(_.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Ip=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(jt(t),this.g_=!1):I("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Tp=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){So(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=J(c);l.v_.add(4),yield bo(l),l.x_.set("Unknown"),l.v_.delete(4),yield vl(l)})}(this))}))}),this.x_=new Ip(r,i)}};function vl(n){return p(this,null,function*(){if(So(n))for(let e of n.F_)yield e(!0)})}function bo(n){return p(this,null,function*(){for(let e of n.F_)yield e(!1)})}function BE(n,e){let t=J(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),tm(t)?em(t):bi(t).Jo()&&Zp(t,e))}function Xp(n,e){let t=J(n),r=bi(t);t.C_.delete(e),r.Jo()&&$E(t,e),t.C_.size===0&&(r.Jo()?r.Xo():So(t)&&t.x_.set("Unknown"))}function Zp(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(U.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bi(n).c_(e)}function $E(n,e){n.O_.Oe(e),bi(n).l_(e)}function em(n){n.O_=new Gf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),bi(n).start(),n.x_.p_()}function tm(n){return So(n)&&!bi(n).Ho()&&n.C_.size>0}function So(n){return J(n).v_.size===0}function qE(n){n.O_=void 0}function nN(n){return p(this,null,function*(){n.C_.forEach((e,t)=>{Zp(n,e)})})}function rN(n,e){return p(this,null,function*(){qE(n),tm(n)?(n.x_.S_(e),em(n)):n.x_.set("Unknown")})}function iN(n,e,t){return p(this,null,function*(){if(n.x_.set("Online"),e instanceof Jc&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(n,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iE(n,r)}else if(e instanceof ai?n.O_.$e(e):e instanceof Yc?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(U.min()))try{let r=yield UE(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(We.EMPTY_BYTE_STRING,u.snapshotVersion)),$E(s,c);let h=new vo(u.target,c,l,u.sequenceNumber);Zp(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield iE(n,r)}})}function iE(n,e,t){return p(this,null,function*(){if(!To(e))throw e;n.v_.add(1),yield bo(n),n.x_.set("Offline"),t||(t=()=>UE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield vl(n)}))})}function sE(n,e){return p(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=So(t);t.v_.add(3),yield bo(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield vl(t)})}function sN(n,e){return p(this,null,function*(){let t=J(n);e?(t.v_.delete(2),yield vl(t)):e||(t.v_.add(2),yield bo(t),t.x_.set("Unknown"))})}function bi(n){return n.N_||(n.N_=function(t,r,i){let s=J(t);return s.R_(),new wp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:nN.bind(null,n),To:rN.bind(null,n),u_:iN.bind(null,n)}),n.F_.push(e=>p(this,null,function*(){e?(n.N_.Zo(),tm(n)?em(n):n.x_.set("Unknown")):(yield n.N_.stop(),qE(n))}))),n.N_}var bp=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zE(n,e){if(jt("AsyncQueue",`${e}: ${n}`),To(n))return new R(_.UNAVAILABLE,`${e}: ${n}`);throw n}var rl=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||x.comparator(t.key,r.key):(t,r)=>x.comparator(t.key,r.key),this.keyedMap=io(),this.sortedSet=new pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var il=class{constructor(){this.B_=new pe(x.comparator)}track(e){let t=e.doc.key,r=this.B_.get(t);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(t,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(t):e.type===1&&r.type===2?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):L():this.B_=this.B_.insert(t,e)}k_(){let e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ii=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,rl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Sp=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},Ap=class{constructor(){this.queries=new Dn(e=>IE(e),gl),this.onlineState="Unknown",this.W_=new Set}};function oN(n,e){return p(this,null,function*(){let t=J(n),r=3,i=e.query,s=t.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new Sp,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield t.onListen(i,!0);break;case 1:s.q_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=zE(o,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Q_.push(e),e.G_(t.onlineState),s.q_&&e.z_(s.q_)&&nm(t)})}function aN(n,e){return p(this,null,function*(){let t=J(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function cN(n,e){let t=J(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&nm(t)}function lN(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(t);r.queries.delete(e)}function nm(n){n.W_.forEach(e=>{e.next()})}var Cp,oE;(oE=Cp||(Cp={})).j_="default",oE.Cache="cache";var Rp=class{constructor(e,t,r){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache||!this.U_())return!0;let r=t!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ea(e){e=Ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Cp.Cache}};var sl=class{constructor(e){this.key=e}},ol=class{constructor(e){this.key=e}},Dp=class{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Y(),this.mutatedKeys=Y(),this.ha=TE(e),this.Pa=new rl(this.ha)}get Ia(){return this.ua}Ta(e,t){let r=t?t.Ea:new il,i=t?t.Pa:this.Pa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let d=i.get(u),f=yl(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;d&&f?d.data.isEqual(f.data)?g!==v&&(r.track({type:3,doc:f}),m=!0):this.da(d,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),m=!0):d&&!f&&(r.track({type:1,doc:d}),m=!0,(c||l)&&(a=!0)),m&&(f?(o=o.add(f),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((u,h)=>function(f,g){let v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L()}};return v(f)-v(g)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;let a=t&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new Ii(this.query,e.Pa,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new il,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(t=>this.ua=this.ua.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ua=this.ua.delete(t)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=Y(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let t=[];return e.forEach(r=>{this.la.has(r)||t.push(new ol(r))}),this.la.forEach(r=>{e.has(r)||t.push(new sl(r))}),t}fa(e){this.ua=e.hs,this.la=Y();let t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return Ii.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},Pp=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Np=class{constructor(e){this.key=e,this.pa=!1}},kp=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Dn(a=>IE(a),gl),this.Sa=new Map,this.ba=new Set,this.Da=new pe(x.comparator),this.Ca=new Map,this.va=new wo,this.Fa={},this.Ma=new Map,this.xa=_o.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function uN(n,e,t=!0){return p(this,null,function*(){let r=QE(n),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield GE(r,e,t,!0),i})}function hN(n,e){return p(this,null,function*(){let t=QE(n);yield GE(t,e,!0,!1)})}function GE(n,e,t,r){return p(this,null,function*(){let i=yield ZP(n.localStore,Ut(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield dN(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&BE(n.remoteStore,i),a})}function dN(n,e,t,r,i){return p(this,null,function*(){n.Na=(h,d,f)=>function(v,m,w,O){return p(this,null,function*(){let W=m.view.Ta(w);W.Xi&&(W=yield rE(v.localStore,m.query,!1).then(({documents:re})=>m.view.Ta(re,W)));let N=O&&O.targetChanges.get(m.targetId),he=O&&O.targetMismatches.get(m.targetId)!=null,X=m.view.applyChanges(W,v.isPrimaryClient,N,he);return cE(v,m.targetId,X.Va),X.snapshot})}(n,h,d,f);let s=yield rE(n.localStore,e,!0),o=new Dp(e,s.hs),a=o.Ta(s.documents),c=yo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);cE(n,t,l.Va);let u=new Pp(e,t,o);return n.wa.set(e,u),n.Sa.has(t)?n.Sa.get(t).push(e):n.Sa.set(t,[e]),l.snapshot})}function fN(n,e,t){return p(this,null,function*(){let r=J(n),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!gl(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Xp(r.remoteStore,i.targetId),Op(r,i.targetId)}).catch(zp))):(Op(r,i.targetId),yield pp(r.localStore,i.targetId,!0))})}function pN(n,e){return p(this,null,function*(){let t=J(n),r=t.wa.get(e),i=t.Sa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xp(t.remoteStore,r.targetId))})}function WE(n,e){return p(this,null,function*(){let t=J(n);try{let r=yield JP(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Ca.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Te(o.pa):i.removedDocuments.size>0&&(Te(o.pa),o.pa=!1))}),yield HE(t,r,e)}catch(r){yield zp(r)}})}function aE(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=J(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let d of h.Q_)d.G_(a)&&(l=!0)}),l&&nm(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mN(n,e,t){return p(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new pe(x.comparator);o=o.insert(s,It.newNoDocument(s,U.min()));let a=Y().add(s),c=new Qc(U.min(),new Map,new pe(te),o,a);yield WE(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),rm(r)}else yield pp(r.localStore,e,!1).then(()=>Op(r,e,t)).catch(zp)})}function Op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Sa.get(e))n.wa.delete(r),t&&n.ya.La(r,t);n.Sa.delete(e),n.isPrimaryClient&&n.va.Vr(e).forEach(r=>{n.va.containsKey(r)||KE(n,r)})}function KE(n,e){n.ba.delete(e.path.canonicalString());let t=n.Da.get(e);t!==null&&(Xp(n.remoteStore,t),n.Da=n.Da.remove(e),n.Ca.delete(t),rm(n))}function cE(n,e,t){for(let r of t)r instanceof sl?(n.va.addReference(r.key,e),gN(n,r)):r instanceof ol?(I("SyncEngine","Document no longer in limbo: "+r.key),n.va.removeReference(r.key,e),n.va.containsKey(r.key)||KE(n,r.key)):L()}function gN(n,e){let t=e.key,r=t.path.canonicalString();n.Da.get(t)||n.ba.has(r)||(I("SyncEngine","New document in limbo: "+t),n.ba.add(r),rm(n))}function rm(n){for(;n.ba.size>0&&n.Da.size<n.maxConcurrentLimboResolutions;){let e=n.ba.values().next().value;n.ba.delete(e);let t=new x(Ie.fromString(e)),r=n.xa.next();n.Ca.set(r,new Np(t)),n.Da=n.Da.insert(t,r),BE(n.remoteStore,new vo(Ut(Jp(t.path)),r,"TargetPurposeLimboResolution",mE._e))}}function HE(n,e,t){return p(this,null,function*(){let r=J(n),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=up.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,l){return p(this,null,function*(){let u=J(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>y.forEach(l,d=>y.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>y.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!To(h))throw h;I("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let d=h.targetId;if(!h.fromCache){let f=u.ns.get(d),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(d,v)}}})}(r.localStore,s))})}function yN(n,e){return p(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield FE(t.localStore,e);t.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new R(_.CANCELLED,o))})}),s.Ma.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield HE(t,r.us)}})}function vN(n,e){let t=J(n),r=t.Ca.get(e);if(r&&r.pa)return Y().add(r.key);{let i=Y(),s=t.Sa.get(e);if(!s)return i;for(let o of s){let a=t.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function QE(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.ya.u_=cN.bind(null,e.eventManager),e.ya.La=lN.bind(null,e.eventManager),e}var al=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=jE(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YP(this.persistence,new dp,e.initialUser,this.serializer)}createPersistence(e){return new ap(lp.Hr,this.serializer)}createSharedClientState(e){return new mp}terminate(){return p(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Mp=class{initialize(e,t){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),yield sN(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ap}()}createDatastore(e){let t=jE(e.databaseInfo.databaseId),r=function(s){return new vp(s)}(e.databaseInfo);return function(s,o,a,c){return new Ep(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new Tp(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>aE(this.syncEngine,t,0),function(){return tl.D()?new tl:new gp}())}createSyncEngine(e,t){return function(i,s,o,a,c,l,u){let h=new kp(i,s,o,a,c,l);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=J(r);I("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield bo(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var xp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):jt("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Vp=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Oe.UNAUTHENTICATED,this.clientId=wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){I("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=zE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function df(n,e){return p(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield FE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function lE(n,e){return p(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield wN(n);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sE(e.remoteStore,i)),n._onlineComponents=e})}function _N(n){return n.name==="FirebaseError"?n.code===_.FAILED_PRECONDITION||n.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function wN(n){return p(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!_N(t))throw t;hi("Error using user provided cache. Falling back to memory cache: "+t),yield df(n,new al)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield df(n,new al);return n._offlineComponents})}function EN(n){return p(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield lE(n,n._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield lE(n,new Mp))),n._onlineComponents})}function uE(n){return p(this,null,function*(){let e=yield EN(n),t=e.eventManager;return t.onListen=uN.bind(null,e.syncEngine),t.onUnlisten=fN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pN.bind(null,e.syncEngine),t})}function YE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hE=new Map;function IN(n,e,t){if(!t)throw new R(_.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TN(n,e,t,r){if(e===!0&&r===!0)throw new R(_.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dE(n){if(x.isDocumentKey(n))throw new R(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bN(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":L()}function jc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new R(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=bN(n);throw new R(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var cl=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new R(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new R(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new R(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new R(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new R(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ff;switch(r.type){case"firstParty":return new yf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new R(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=hE.get(t);r&&(I("ComponentProvider","Removing Datastore"),hE.delete(t),r.terminate())}(this),Promise.resolve()}};function JE(n,e,t,r={}){var i;let s=(n=jc(n,Eo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Oe.MOCK_USER;else{a=Dv(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new R(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Oe(l)}n._authCredentials=new pf(new Bc(a,c))}}var ll=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_r=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},li=class n extends ll{constructor(e,t,r){super(e,t,Jp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _r(this.firestore,null,new x(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function XE(n,e,...t){if(n=wn(n),IN("collection","path",e),n instanceof Eo){let r=Ie.fromString(e,...t);return dE(r),new li(n,null,r)}{if(!(n instanceof _r||n instanceof li))throw new R(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return dE(r),new li(n.firestore,null,r)}}var Lp=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new nl(this,"async_queue_retry"),this.cu=()=>{let t=hf();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};let e=hf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let t=new Xt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!To(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let t=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=t,t}enqueueAfterDelay(e,t,r){this.lu(),this.uu.indexOf(e)>-1&&(t=0);let i=bp.createAndSchedule(this,e,t,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&L()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.su)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let t=this.su.indexOf(e);this.su.splice(t,1)}};function fE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Io=class extends Eo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Lp}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eI(this),this._firestoreClient.terminate()}};function ZE(n,e){let t=typeof n=="object"?n:bs(),r=typeof n=="string"?n:e||"(default)",i=Xh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Cv("firestore");s&&JE(i,...s)}return i}function SN(n){return n._firestoreClient||eI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eI(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,u){return new Af(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,YE(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Vp(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Fp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(We.fromBase64String(e))}catch(t){throw new R(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ul=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new R(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Up=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new R(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var AN=new RegExp("[~\\*/\\[\\]]");function CN(n,e,t){if(e.search(AN)>=0)throw pE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ul(...e.split("."))._internalPath}catch{throw pE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pE(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new R(_.INVALID_ARGUMENT,a+n+c)}var hl=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jp=class extends hl{data(){return super.data()}};function tI(n,e){return typeof e=="string"?CN(n,e):e instanceof ul?e._internalPath:e._delegate._internalPath}function RN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new R(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bp=class{convertValue(e,t="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw L()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ml(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Up(ue(e.latitude),ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uo(e));default:return null}}convertTimestamp(e){let t=Cn(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);Te(LE(r));let i=new Kc(r.get(1),r.get(3)),s=new x(r.popFirst(5));return i.isEqual(t)||jt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var pr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dl=class extends hl{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ui(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ui=class extends dl{data(e={}){return super.data(e)}},$p=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ui(this._firestore,this._userDataWriter,r.key,r,new pr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:DN(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function DN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L()}}var fl=class extends Bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _r(this.firestore,null,t)}};function im(n,...e){var t,r,i;n=wn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fE(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fE(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof _r)l=jc(n.firestore,Io),u=Jp(n._key.path),c={next:h=>{e[o]&&e[o](PN(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=jc(n,ll);l=jc(h.firestore,Io),u=h._query;let d=new fl(l);c={next:f=>{e[o]&&e[o](new $p(l,d,h,f))},error:e[o+1],complete:e[o+2]},RN(n._query)}return function(d,f,g,v){let m=new xp(v),w=new Rp(f,m,g);return d.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return oN(yield uE(d),w)})),()=>{m.Qa(),d.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return aN(yield uE(d),w)}))}}(SN(l),u,a,c)}function PN(n,e,t){let r=t.docs.get(e._key),i=new fl(n);return new dl(n,i,e._key,r,new pr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ti=i})(Hr),Tn(new ut("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Io(new mf(r.getProvider("auth-internal")),new _f(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new R(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pe(Lw,"4.5.1",e),Pe(Lw,"4.5.1","esm2017")})();var _l=function(){return _l=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},_l.apply(this,arguments)};var ON={includeMetadataChanges:!1};function nI(n,e){return e===void 0&&(e=ON),new On(function(t){var r=im(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function rI(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:_l(_l({},r),(t={},t[e.idField]=n.id,t))}function iI(n){return nI(n,{includeMetadataChanges:!0}).pipe(q(function(e){return e.docs}))}function sI(n,e){return e===void 0&&(e={}),iI(n).pipe(q(function(t){return t.map(function(r){return rI(r,e)})}))}var wr=class{constructor(e){return e}},oI="firestore",sm=class{constructor(){return As(oI)}};var om=new j("angularfire2.firestore-instances");function MN(n,e){let t=td(oI,n,e);return t&&new wr(t)}function xN(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new wr(r)}}var VN={provide:sm,deps:[[new gt,om]]},LN={provide:wr,useFactory:MN,deps:[[new gt,om],nr]},FN=(()=>{class n{constructor(){Pe("angularfire",Yr.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ge({type:n});static \u0275inj=me({providers:[LN,VN]})}return n})();function aI(n,...e){return{ngModule:FN,providers:[{provide:om,useFactory:xN(n),multi:!0,deps:[ye,zt,Cs,Rs,[new gt,ac],[new gt,Ss],...e]}]}}var am=tr(sI,!0);var cm=tr(XE,!0);var cI=tr(ZE,!0);var jN={apiKey:"AIzaSyDGque-5gwxWMJJqxw_dF5_bpfIO54dw00",authDomain:"myportfolio-457a1.firebaseapp.com",databaseURL:"https://myportfolio-457a1-default-rtdb.firebaseio.com",projectId:"myportfolio-457a1",storageBucket:"myportfolio-457a1.appspot.com",messagingSenderId:"439582592540",appId:"1:439582592540:web:4258f4e2b86debd55719d9"};function BN(n){return new $a(n,"./assets/i18n/",".json")}var lI={providers:[Oy(jy,Fy()),Gg(),gv(),Oo(Ba.forRoot({defaultLanguage:"en",loader:{provide:_n,useFactory:BN,deps:[Zl]}})),Oo(Zo),Oo([Yv(()=>Jv(jN)),aI(()=>cI())])]};var yI=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(B(on),B(Fn))},e.\u0275dir=mt({type:e});let n=e;return n})(),$N=(()=>{let e=class e extends yI{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qt(e)))(s||e)}})(),e.\u0275dir=mt({type:e,features:[ki]});let n=e;return n})(),Ai=new j("NgValueAccessor");var qN={provide:Ai,useExisting:Vn(()=>vI),multi:!0};function zN(){let n=Cr()?Cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var GN=new j("CompositionEventMode"),vI=(()=>{let e=class e extends yI{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zN())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(B(on),B(Fn),B(GN,8))},e.\u0275dir=mt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ze("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[qn([qN]),ki]});let n=e;return n})();var WN=new j("NgValidators"),KN=new j("NgAsyncValidators");function _I(n){return n!=null}function wI(n){return Lo(n)?be(n):n}function EI(n){let e={};return n.forEach(t=>{e=t!=null?T(T({},e),t):e}),Object.keys(e).length===0?null:e}function II(n,e){return e.map(t=>t(n))}function HN(n){return!n.validate}function TI(n){return n.map(e=>HN(e)?e:t=>e.validate(t))}function QN(n){if(!n)return null;let e=n.filter(_I);return e.length==0?null:function(t){return EI(II(t,e))}}function bI(n){return n!=null?QN(TI(n)):null}function YN(n){if(!n)return null;let e=n.filter(_I);return e.length==0?null:function(t){let r=II(t,e).map(wI);return ko(r).pipe(q(EI))}}function SI(n){return n!=null?YN(TI(n)):null}function uI(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JN(n){return n._rawValidators}function XN(n){return n._rawAsyncValidators}function lm(n){return n?Array.isArray(n)?n:[n]:[]}function El(n,e){return Array.isArray(n)?n.includes(e):n===e}function hI(n,e){let t=lm(e);return lm(n).forEach(i=>{El(t,i)||t.push(i)}),t}function dI(n,e){return lm(e).filter(t=>!El(n,t))}var Il=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=SI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},um=class extends Il{get formDirective(){return null}get path(){return null}},Ro=class extends Il{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},hm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ZN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PL=ae(T({},ZN),{"[class.ng-submitted]":"isSubmitted"}),AI=(()=>{let e=class e extends hm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(B(Ro,2))},e.\u0275dir=mt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&$m("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ki]});let n=e;return n})();var Ao="VALID",wl="INVALID",Si="PENDING",Co="DISABLED";function ek(n){return(Tl(n)?n.validators:n)||null}function tk(n){return Array.isArray(n)?bI(n):n||null}function nk(n,e){return(Tl(e)?e.asyncValidators:n)||null}function rk(n){return Array.isArray(n)?SI(n):n||null}function Tl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var dm=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ao}get invalid(){return this.status===wl}get pending(){return this.status==Si}get disabled(){return this.status===Co}get enabled(){return this.status!==Co}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}hasValidator(e){return El(this._rawValidators,e)}hasAsyncValidator(e){return El(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Si,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Co,this.errors=null,this._forEachChild(r=>{r.disable(ae(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(T({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ao,this._forEachChild(r=>{r.enable(ae(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(T({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ao||this.status===Si)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Co:Ao}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Si,this._hasOwnPendingAsyncValidator=!0;let t=wI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ce,this.statusChanges=new ce}_calculateStatus(){return this._allControlsDisabled()?Co:this.errors?wl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Si)?Si:this._anyControlsHaveStatus(wl)?wl:Ao}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=tk(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rk(this._rawAsyncValidators)}};var CI=new j("CallSetDisabledState",{providedIn:"root",factory:()=>fm}),fm="always";function ik(n,e){return[...e.path,n]}function sk(n,e,t=fm){ak(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ck(n,e),uk(n,e),lk(n,e),ok(n,e)}function fI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ok(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ak(n,e){let t=JN(n);e.validator!==null?n.setValidators(uI(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=XN(n);e.asyncValidator!==null?n.setAsyncValidators(uI(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();fI(e._rawValidators,i),fI(e._rawAsyncValidators,i)}function ck(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&RI(n,e)})}function lk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&RI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function RI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uk(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function hk(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dk(n){return Object.getPrototypeOf(n.constructor)===$N}function fk(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===vI?t=s:dk(s)?r=s:i=s}),i||r||t||null}function pI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pk=class extends dm{constructor(e=null,t,r){super(ek(t),nk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var mk={provide:Ro,useExisting:Vn(()=>pm)},gI=Promise.resolve(),pm=(()=>{let e=class e extends Ro{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new pk,this._registered=!1,this.name="",this.update=new ce,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=fk(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),hk(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){gI.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ar(i);gI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?ik(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(B(um,9),B(WN,10),B(KN,10),B(Ai,10),B(st,8),B(CI,8))},e.\u0275dir=mt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[nn.None,"disabled","isDisabled"],model:[nn.None,"ngModel","model"],options:[nn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qn([mk]),ki,Tr]});let n=e;return n})();var gk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ge({type:e}),e.\u0275inj=me({});let n=e;return n})();var yk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ge({type:e}),e.\u0275inj=me({imports:[gk]});let n=e;return n})();var DI=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:CI,useValue:r.callSetDisabledState??fm}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ge({type:e}),e.\u0275inj=me({imports:[yk]});let n=e;return n})();var _k=["input"],wk=(n,e,t)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":n,"p-disabled":e,"p-focus":t}),Ek={provide:Ai,useExisting:Vn(()=>mm),multi:!0},mm=(()=>{class n{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;onChange=new ce;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(t){this.cd=t}onClick(t){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:t,checked:this.modelValue}),t.preventDefault(),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(t){this.modelValue=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(r){return new(r||n)(B(st))};static \u0275cmp=it({type:n,selectors:[["p-inputSwitch"]],viewQuery:function(r,i){if(r&1&&Uo(_k,5),r&2){let s;jn(s=Bn())&&(i.input=s.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[qn([Ek])],decls:5,vars:22,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","focus","blur"],["input",""],[1,"p-inputswitch-slider"]],template:function(r,i){r&1&&(z(0,"div",0),ze("click",function(o){return i.onClick(o)}),z(1,"div",1)(2,"input",2,3),ze("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),$()(),ve(4,"span",4),$()),r&2&&(Sr(i.styleClass),Ce("ngClass",jo(18,wk,i.checked(),i.disabled,i.focused))("ngStyle",i.style),Je("data-pc-name","inputswitch")("data-pc-section","root"),se(),Je("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),se(),Ce("checked",i.checked())("disabled",i.disabled),Je("id",i.inputId)("aria-checked",i.checked())("aria-labelledby",i.ariaLabelledBy)("aria-label",i.ariaLabel)("name",i.name)("tabindex",i.tabindex)("data-pc-section","hiddenInput"),se(2),Je("data-pc-section","slider"))},dependencies:[zo,Go],styles:[`@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}
`],encapsulation:2,changeDetection:0})}return n})(),PI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ge({type:n});static \u0275inj=me({imports:[Ui]})}return n})();var Tk=["container"];function bk(n,e){if(n&1&&ve(0,"span",8),n&2){let t=Ke(2).$implicit;Sr(t.icon),Ce("ngClass","p-button-icon p-button-icon-left"),Je("data-pc-section","icon")}}function Sk(n,e){if(n&1&&(Wm(0),Un(1,bk,1,4,"span",6),z(2,"span",7),_e(3),$(),Km()),n&2){let t=Ke().$implicit,r=Ke();se(),Ce("ngIf",t.icon),se(),Je("data-pc-section","label"),se(),Wt(r.getOptionLabel(t))}}function Ak(n,e){n&1&&Hm(0)}var Ck=(n,e)=>({$implicit:n,index:e});function Rk(n,e){if(n&1&&Un(0,Ak,1,0,"ng-container",9),n&2){let t=Ke(),r=t.$implicit,i=t.index,s=Ke();Ce("ngTemplateOutlet",s.selectButtonTemplate)("ngTemplateOutletContext",Ym(2,Ck,r,i))}}var Dk=(n,e,t)=>({"p-highlight":n,"p-disabled":e,"p-button-icon-only":t});function Pk(n,e){if(n&1){let t=Oi();z(0,"div",3),ze("click",function(i){let s=rn(t),o=s.$implicit,a=s.index,c=Ke();return sn(c.onOptionSelect(i,o,a))})("keydown",function(i){let s=rn(t),o=s.$implicit,a=s.index,c=Ke();return sn(c.onKeyDown(i,o,a))})("focus",function(i){let o=rn(t).index,a=Ke();return sn(a.onFocus(i,o))})("blur",function(){rn(t);let i=Ke();return sn(i.onBlur())}),Un(1,Sk,4,3,"ng-container",4)(2,Rk,1,5,"ng-template",null,5,Zm),$()}if(n&2){let t=e.$implicit,r=e.index,i=$n(3),s=Ke();Sr(t.styleClass),Ce("role",s.multiple?"checkbox":"radio")("ngClass",jo(14,Dk,s.isSelected(t),s.disabled||s.isOptionDisabled(t),t.icon&&!s.getOptionLabel(t))),Je("tabindex",r===s.focusedIndex?"0":"-1")("aria-label",t.label)("aria-checked",s.isSelected(t))("aria-disabled",s.optionDisabled)("aria-pressed",s.isSelected(t))("title",t.title)("aria-labelledby",s.getOptionLabel(t))("data-pc-section","button"),se(),Ce("ngIf",!s.itemTemplate)("ngIfElse",i)}}var Nk={provide:Ai,useExisting:Vn(()=>gm),multi:!0},gm=(()=>{class n{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new ce;onChange=new ce;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(t){this.cd=t}getOptionLabel(t){return this.optionLabel?cn.resolveFieldData(t,this.optionLabel):t.label!=null?t.label:t}getOptionValue(t){return this.optionValue?cn.resolveFieldData(t,this.optionValue):this.optionLabel||t.value===void 0?t:t.value}isOptionDisabled(t){return this.optionDisabled?cn.resolveFieldData(t,this.optionDisabled):t.disabled!==void 0?t.disabled:!1}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionSelect(t,r,i){if(this.disabled||this.isOptionDisabled(r))return;let s=this.isSelected(r);if(s&&this.unselectable)return;let o=this.getOptionValue(r),a;if(this.multiple)s?a=this.value.filter(c=>!cn.equals(c,o,this.equalityKey)):a=this.value?[...this.value,o]:[o];else{if(s&&!this.allowEmpty)return;a=s?null:o}this.focusedIndex=i,this.value=a,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.onOptionClick.emit({originalEvent:t,option:r,index:i})}onKeyDown(t,r,i){switch(t.code){case"Space":{this.onOptionSelect(t,r,i),t.preventDefault();break}case"ArrowDown":case"ArrowRight":{this.changeTabIndexes(t,"next"),t.preventDefault();break}case"ArrowUp":case"ArrowLeft":{this.changeTabIndexes(t,"prev"),t.preventDefault();break}default:break}}changeTabIndexes(t,r){let i,s;for(let o=0;o<=this.container.nativeElement.children.length-1;o++)this.container.nativeElement.children[o].getAttribute("tabindex")==="0"&&(i={elem:this.container.nativeElement.children[o],index:o});r==="prev"?i.index===0?s=this.container.nativeElement.children.length-1:s=i.index-1:i.index===this.container.nativeElement.children.length-1?s=0:s=i.index+1,this.focusedIndex=s,this.container.nativeElement.children[s].focus()}onFocus(t,r){this.focusedIndex=r}onBlur(){this.onModelTouched()}removeOption(t){this.value=this.value.filter(r=>!cn.equals(r,this.getOptionValue(t),this.dataKey))}isSelected(t){let r=!1,i=this.getOptionValue(t);if(this.multiple){if(this.value&&Array.isArray(this.value)){for(let s of this.value)if(cn.equals(s,i,this.dataKey)){r=!0;break}}}else r=cn.equals(this.getOptionValue(t),this.value,this.equalityKey);return r}static \u0275fac=function(r){return new(r||n)(B(st))};static \u0275cmp=it({type:n,selectors:[["p-selectButton"]],contentQueries:function(r,i,s){if(r&1&&Fo(s,mg,5),r&2){let o;jn(o=Bn())&&(i.itemTemplate=o.first)}},viewQuery:function(r,i){if(r&1&&Uo(Tk,5),r&2){let s;jn(s=Bn())&&(i.container=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:"unselectable",tabindex:"tabindex",multiple:"multiple",allowEmpty:"allowEmpty",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[qn([Nk])],decls:3,vars:8,consts:[["role","group",3,"ngClass","ngStyle"],["container",""],["pRipple","","class","p-button p-component",3,"role","class","ngClass","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","",1,"p-button","p-component",3,"role","ngClass","click","keydown","focus","blur"],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&(z(0,"div",0,1),Un(2,Pk,4,18,"div",2),$()),r&2&&(Sr(i.styleClass),Ce("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),Je("aria-labelledby",i.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),se(2),Ce("ngForOf",i.options))},dependencies:[zo,lg,ug,hg,Go,gg],styles:[`@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}
`],encapsulation:2,changeDetection:0})}return n})(),NI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ge({type:n});static \u0275inj=me({imports:[Ui,yg,Kl,Kl]})}return n})();var kI=(()=>{let e=class e{constructor(r){this._Document=r}switchTheme(r){let i=this._Document.getElementById("app-theme");i&&(i.href=r+".css")}};e.\u0275fac=function(i){return new(i||e)(C(Re))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var OI=(()=>{let e=class e{constructor(r,i){this._ThemeService=r,this._TranslateService=i,this.stateOptions=[{label:"\u0639\u0631\u0628\u064A",value:"ar",constant:!1},{label:"English",value:"en",constant:!0}],this.value=this._TranslateService.defaultLang}changlang(r){this._TranslateService.use(r),r=="ar"?(this.stateOptions[0].constant=!0,this.stateOptions[1].constant=!1):(this.stateOptions[1].constant=!0,this.stateOptions[0].constant=!1)}changeTheme(){this.darkmode?this._ThemeService.switchTheme("lara-dark-blue"):this._ThemeService.switchTheme("lara-light-blue")}};e.\u0275fac=function(i){return new(i||e)(B(kI),B(Jn))},e.\u0275cmp=it({type:e,selectors:[["setting"]],standalone:!0,features:[an],decls:9,vars:4,consts:[[1,"pl-4","pr-4"],[1,"flex","justify-content-between","align-items-center","mt-2","mb-4"],[1,"m-0"],[3,"ngModel","ngModelChange","onChange"],[1,"translate","flex","justify-content-between","align-items-center","mt-2","mb-4"],["optionDisabled","constant","optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange","onChange"]],template:function(i,s){i&1&&(z(0,"section",0)(1,"div",1)(2,"h4",2),_e(3),$(),z(4,"p-inputSwitch",3),ze("ngModelChange",function(a){return s.darkmode=a})("onChange",function(){return s.changeTheme()}),$()(),z(5,"div",4)(6,"h4",2),_e(7,"Select language"),$(),z(8,"p-selectButton",5),ze("ngModelChange",function(a){return s.value=a})("onChange",function(){return s.changlang(s.value)}),$()()()),i&2&&(se(3),Wt("Dark mode"),se(),Ce("ngModel",s.darkmode),se(4),Ce("options",s.stateOptions)("ngModel",s.value))},dependencies:[PI,mm,DI,AI,pm,Zo,NI,gm]});let n=e;return n})();var MI=(()=>{let e=class e{constructor(r){this._Firestore=r,this.dateCollection=cm(this._Firestore,"data"),this.linksCollection=cm(this._Firestore,"links")}getData(){return am(this.dateCollection,{idField:"id"})}getLinks(){return am(this.linksCollection,{idField:"id"})}};e.\u0275fac=function(i){return new(i||e)(C(wr))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function xk(n,e){if(n&1){let t=Oi();z(0,"span",31),ze("click",function(){rn(t);let i=Ke(),s=$n(16),o=$n(12);return sn(i.showSettingMenu(s,o))}),ve(1,"i",32),$()}}function Vk(n,e){if(n&1){let t=Oi();z(0,"span",31),ze("click",function(){rn(t);let i=Ke(),s=$n(16),o=$n(12);return sn(i.hideSettingMenu(s,o))}),ve(1,"i",33),$()}}function Lk(n,e){if(n&1&&(z(0,"a",34)(1,"figure",35),ve(2,"img",36),$(),z(3,"figcaption")(4,"p",37),_e(5),$()()()),n&2){let t=e.$implicit;Ce("href",t.url,Mo),se(2),Ce("src",t.img,Mo),se(3),Wt(t.name)}}var xI=(()=>{let e=class e{constructor(r,i,s){this._PrimeNGConfig=r,this._Renderer2=i,this._GetDataService=s,this.isSettingActive=!1}ngOnInit(){this._PrimeNGConfig.ripple=!0,this._GetDataService.getData().subscribe(r=>{this.profilePhoto=r[0].profilePhoto,this.title=r[0].title,this.desc=r[0].desc}),this._GetDataService.getLinks().subscribe({next:r=>{this.links=r}})}showSettingMenu(r,i){this._Renderer2.setStyle(r,"transform","translateY(-100%)"),this._Renderer2.setStyle(i,"transform","translateY(0)"),this.isSettingActive=!0}hideSettingMenu(r,i){this._Renderer2.setStyle(r,"transform","translateY(0)"),this._Renderer2.setStyle(i,"transform","translateY(-120%)"),this.isSettingActive=!1}};e.\u0275fac=function(i){return new(i||e)(B(pg),B(on),B(MI))},e.\u0275cmp=it({type:e,selectors:[["profile-nav"]],standalone:!0,features:[an],decls:55,vars:8,consts:[[1,"pl-4","pr-4","header","shadow-1","flex","align-items-center","justify-content-between","mb-2"],["role","button",1,"Portfolio-name","flex","align-items-center"],[1,"pr-2","font-bold"],[1,"pi","pi-chevron-circle-down"],["role","button","class","setting-icon"],[1,"relative"],[1,"overflow-hidden","absolute","w-full"],["id","setting",1,"mt-2"],["setting",""],[1,"overflow-hidden"],[1,"about","pl-4","pr-4","pb-3"],["about",""],[1,"flex","justify-content-between","align-items-center","text-center"],["role","button",1,"relative","flex","justify-content-center","align-items-center","w-5rem","h-5rem","border-round-3xl"],["alt","work",1,"w-full","border-round-3xl",3,"src"],[1,"icon","inline-block","flex","justify-content-center","align-items-center","absolute","bg-black-alpha-90","border-round-3xl","text-white"],[1,"pi","pi-plus"],[1,"text-sm","text-500"],[1,"bio"],[1,"text-600"],[1,"contacts","flex","justify-content-center"],["pButton","","label","Follow\u{1F440}",1,"contact-btn","mr-4","flex-grow-1","border-round-2xl","shadow-none"],["pButton","","label","Send message (soon)","disabled","",1,"border-round-2xl","p-button-outlined","p-button-secondary","shadow-none","text-sm"],[1,"links","flex","gap-2","mt-3","overflow-x-scroll"],[1,"nav","border-top-1","border-300","pl-5","pr-5","flex","justify-content-between"],["role","button","routerLink","/projects","routerLinkActive","active-link",1,"nav-link","text-500"],[1,"text-3xl","pi","pi-qrcode"],["role","button","routerLink","/skills","routerLinkActive","active-link",1,"nav-link","text-500"],[1,"text-3xl","pi","pi-users"],["role","button","routerLink","/experience","routerLinkActive","active-link",1,"nav-link","text-500"],[1,"text-3xl","pi","pi-bookmark"],["role","button",1,"setting-icon",3,"click"],[1,"pi","pi-cog","text-2xl"],[1,"pi","pi-arrow-right","text-2xl"],["target","_blank",3,"href"],["role","button",1,"relative","w-5rem","h-5rem","border-circle"],["alt","social link","srcset","",1,"w-full","h-full","border-circle",3,"src"],[1,"text-xs","text-center","text-500"]],template:function(i,s){i&1&&(z(0,"section")(1,"div",0)(2,"div",1)(3,"h2",2),_e(4),Jm(5,"translate"),$(),ve(6,"i",3),$(),Un(7,xk,2,0,"span",4)(8,Vk,2,0,"span",4),$(),z(9,"div",5)(10,"div",6)(11,"div",7,8),ve(13,"setting"),$()(),z(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"figure",13),ve(19,"img",14),z(20,"span",15),ve(21,"i",16),$()(),z(22,"span")(23,"h3"),_e(24,"36"),$(),z(25,"p",17),_e(26,"Projects"),$()(),z(27,"span")(28,"h3"),_e(29,"24.6k"),$(),z(30,"p",17),_e(31,"Followers"),$()(),z(32,"span")(33,"h3"),_e(34,"44"),$(),z(35,"p",17),_e(36,"Following"),$()()(),z(37,"div",18)(38,"h2"),_e(39),$(),z(40,"p",19),_e(41),$()(),z(42,"div",20),ve(43,"button",21)(44,"button",22),$(),z(45,"div",23),zm(46,Lk,6,3,"a",34,qm),$()()()(),z(48,"div",24)(49,"span",25),ve(50,"i",26),$(),z(51,"span",27),ve(52,"i",28),$(),z(53,"span",29),ve(54,"i",30),$()()()),i&2&&(se(4),Wt(Xm(5,6,"header.heshammansour")),se(3),$l(7,s.isSettingActive?-1:7),se(),$l(8,s.isSettingActive?8:-1),se(11),Ce("src",s.profilePhoto,Mo),se(20),Wt(s.title),se(2),Wt(s.desc),se(5),Gm(s.links))},dependencies:[_g,vg,Uy,va,Ny,OI,Ba,Iv],styles:['.pi-chevron-circle-down[_ngcontent-%COMP%]{font-size:1.3rem}.active-link[_ngcontent-%COMP%]:after{content:"";position:absolute;width:1.3rem;height:.5rem;border-radius:0 0 5px 5px;background-color:#000;top:0;left:50%;transform:translate(-50%)}.active-link[_ngcontent-%COMP%]{color:#000!important}.about[_ngcontent-%COMP%]{transition:ease-out .3s all}.about[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;left:80%;top:80%}.about[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{background-image:linear-gradient(135deg,#f9ce34 25%,#ee2a7b 66%,#6228d7 99%)}.about[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:transparent .125rem solid}.nav-link[_ngcontent-%COMP%]{position:relative;padding-top:1rem}.links[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.links[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.links[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{min-width:5rem}.contacts[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background-image:linear-gradient(135deg,#f9ce34 25%,#ee2a7b 66%,#6228d7 99%);border:none;border-radius:10px;color:#fff;transition:all .3s ease-in-out;background-size:100% 100%}.contacts[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]:hover{background-size:300% 100%;background-position:-100px}.contacts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(5px)}.nav[_ngcontent-%COMP%]{box-shadow:0 1px 5px -4px #000 inset}#setting[_ngcontent-%COMP%]{transform:translateY(-120%);transition:all .3s ease-in-out}']});let n=e;return n})();var VI=(()=>{let e=class e{constructor(r){this._TranslateService=r,this.blackBackground=["font-size: 38px","background-color: #000","color: #52d273","padding:0.5rem","border: 3px groove #52d273"].join(" ;"),this.lastConsole=["background-color: #ffffb4","color: black","padding:0.5rem","border: 3px groove #000dfb"].join(" ;")}ngOnInit(){setTimeout(()=>{console.log("%c Hello World! \u{1F468}\u200D\u{1F4BB}",this.blackBackground),console.log("%c I'm %O","background-color: white; color: red; padding: 2px;",{name:"Hesham Mansour",age:"22",occupation:"Frontend Developer"}),console.log("%c if you found that, you are now lost on the internet. Email me at nbilha161@gmail.com to guide you \u{1F47D}",this.lastConsole)},3e3),this._TranslateService.onLangChange.subscribe(r=>{console.log("lang changed to "+r.lang)})}};e.\u0275fac=function(i){return new(i||e)(B(Jn))},e.\u0275cmp=it({type:e,selectors:[["app-root"]],standalone:!0,features:[an],decls:9,vars:0,consts:[[1,"hideDesktopView","fixed","top-0","left-0","right-0","bottom-0","flex","flex-column","justify-content-center","align-items-center","text-white"]],template:function(i,s){i&1&&(ve(0,"profile-nav")(1,"router-outlet"),z(2,"div",0)(3,"h2"),_e(4,"Open website in your phone"),$(),z(5,"p"),_e(6,"if your mobile in landscape view please rotate it"),$(),z(7,"p"),_e(8,"Not Ready for Desktop view yet..."),$()())},dependencies:[$u,xI],styles:[".hideDesktopView[_ngcontent-%COMP%]{background-image:linear-gradient(135deg,#f9ce34 25%,#ee2a7b 66%,#6228d7 99%)}@media screen and (max-width: 900px){.hideDesktopView[_ngcontent-%COMP%]{display:none!important}}"]});let n=e;return n})();zg(VI,lI).catch(n=>console.error(n));
